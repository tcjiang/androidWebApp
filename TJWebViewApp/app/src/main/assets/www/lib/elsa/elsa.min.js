!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.elsa=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=!0,e=["name","extend","extends","public","private","protected","init","destroy","mixin","mixins","tagName","tagname","mixinExtended","autoNotifyOnSet"],f=1,g=1,c={memoryLeakWarnings:!0,memoryLeakProtector:!1,autoNotifyOnSet:!0},h={},i=!1;"undefined"==typeof Object.setPrototypeOf&&Object.defineProperties(Object,{getPrototypeOf:{value:function(a){return a.__proto__}},setPrototypeOf:{value:function(a,b){a.__proto__=b}}});var j=function(a,b){return function(c){var d=this.object,e=Object.getPrototypeOf(a)[c];if(!e)throw new TypeError(d["public"].constructor.name+"."+b+"."+c+" does not have a super method");return e.apply(d["public"],Array.prototype.slice.call(arguments,1))}},k=function(a){return Object.getPrototypeOf(this).privateRegistry[a.__id]},l=function(a){return function(b,c,d){var e=a[this.__id];e.__subscribers__||(e.__subscribers__={}),e.__subscribers__[b]||(e.__subscribers__[b]=[]),e.__subscribers__[b].push({id:d||null,fn:c})}},m=function(a){return function(b,c,d){var e=a[this.__id];if(e.__subscribers__){var f=e.__subscribers__[b];if(f)for(var g=0;g<f.length;g++){var h=f[g];d&&h.id&&h.id===d?(f.splice(g,1),g-=1):c&&h.fn&&h.fn===c&&(f.splice(g,1),g-=1)}}}},n=function(a){return function(b,c,d){var e=a[this["public"].__id];if("function"==typeof e["protected"][b]){var f=e["protected"][b](c,d);if(f)return!0}if(e.__subscribers__&&e.__subscribers__[b])for(var g=e.__subscribers__[b].slice(),h=0;h<g.length;h++){var i=g[h];"function"==typeof i.fn&&i.fn.call(this["public"],c,d)}return!1}},o=function(a){return function(b,c,d){var e=a[this.__id];return e["protected"].publish(b,c,d)}},p=function(a){return function(b,c,d){var e=a[this.__id];return e["protected"].publish(b,c,d)}},q=function(a,b){return function(){return a[this.__id]||console.error("callMethod - privateRegistry[this.__id] is undefined",a,this),b.apply(a[this.__id],arguments)}},r=function(a,b){return function(){return b.call(a[this.__id])}},s=function(a,b){return function(){return a[this.__id][b]}},t=function(a,b,c){return function(d){var e=a[this.__id];b.call(e,d),"function"==typeof e["protected"][c]&&e["protected"][c](d),e["protected"].publish(c,d)}},u=function(a,b,c){return function(d){var e=a[this.__id];b.call(e,d),"function"==typeof e["protected"][c]&&e["protected"][c](d),e["protected"].publish(c,d)}},v=function(a,b){return function(c){var d=a[this.__id];b.call(d,c)}},w=function(a,b){return function(c){b.call(a[this.__id],c)}},x=function(a,b){var c=b+"Changed";return function(d){var e=a[this.__id],f=e[b];e[b]=d,"function"==typeof e["protected"][c]&&e["protected"][c](d,f),e["protected"].publish(c,d,f)}},y=function(a,b){var c=b+"Changed";return function(d){var e=a[this.__id],f=e[b];e[b]=d,"function"==typeof e["protected"][c]&&e["protected"][c](d,f)}},z=function(a,b){return function(c){a[this.__id][b]=c}},A=function(a,b,c,d,e,f){return function(){var d,g;if("function"==typeof c&&c.apply(this,arguments),e)for(g=e.length,d=0;g>d;d++)e[d].apply(this["public"],arguments);var h=a[this["public"].__id];if(f)for(g=f.length,d=0;g>d;d++)f[d].init.apply(h,arguments);"function"==typeof b&&b.apply(h,arguments)}},B=function(a,b){(c.memoryLeakWarnings||c.memoryLeakProtector)&&Object.getOwnPropertyNames(a).forEach(function(d){var e=a[d];e&&"object"==typeof e&&(c.memoryLeakWarnings&&console.warn("ecma5-extend.memoryLeakWarning "+b.name+"."+d+" = "+(e.tagName?"<"+e.tagName.toLowerCase()+">":e)),c.memoryLeakProtector&&Object.defineProperty(a,d,{value:void 0}))},this)},C=function(a,b,c,d,e){return function(){var f=a[this.__id];if(f){if(b&&b.call(f),e)for(var g=e.length,h=0;g>h;h++)e[h].destroy.call(f);if(c&&c.call(this),Object.getPrototypeOf(this)===d)if(Object.defineProperties(f["protected"],{"public":{value:void 0}}),B(f["protected"],d),Object.setPrototypeOf(f["protected"],Object.prototype),Object.defineProperties(f["public"],{__id:{value:void 0}}),HTMLElement.prototype.isPrototypeOf(f["public"])){for(var i=Object.getPrototypeOf(f["public"]);"function"==typeof i.constructor.extend&&"string"==typeof i.constructor.tagName;)i=Object.getPrototypeOf(i);Object.setPrototypeOf(f["public"],i)}else Object.setPrototypeOf(f["public"],Object.prototype);Object.defineProperties(f,{"protected":{value:void 0},"public":{value:void 0},__subscribers__:{value:void 0}}),B(f,d.constructor),Object.setPrototypeOf(f,Object.prototype),delete a[this.__id]}}},D=["configurable","enumerable","writable","set","get","value","publish"],E=function(a){if("object"!=typeof a||null===a)return!1;for(var b=Object.getOwnPropertyNames(a),c=0;c<b.length;c++){var d=b[c];if(-1===D.indexOf(d))return!1}return b.length>0},F=function(a){var b=Object.keys(Object.prototype),c=a.prototype||a;Object.keys(c).forEach(function(a){if(-1===b.indexOf(a)){var d=c[a],e="function"==typeof d;this[a]=Object.getOwnPropertyDescriptor(c,a)||{configurable:!0,writable:!0,enumerable:!e,value:d}}},this)},G=function(a,b,c,d,e){e=e||[],Object.getOwnPropertyNames(a).forEach(function(c){if(-1===e.indexOf(c)){var d=a[c];b[c]=E(d)?d:{configurable:!0,writable:!0,enumerable:!0,value:d}}});var f={};Object.defineProperties(f,{"public":{value:j(d,"public"),writable:!1},"protected":{value:j(c,"protected"),writable:!1}}),b["super"]={get:function(){return f.object=this,f}},b.getPrivate={value:k}},H=function(a){for(var b,c,d=a.mixinExtended.length,e=0;d>e;e++){b=a.mixinExtended[e];for(c in b["public"])a["public"][c]=b["public"][c];for(c in b["protected"])c in a["protected"]||(a["protected"][c]=b["protected"][c]);for(c in b["private"])c in a["private"]||(a["private"][c]=b["private"][c])}},I=function(a,b,e,f,g,h){var i,j={};i=e?"protected"===b?"function"==typeof e.extend?e.extend({}):{}:Object.create(e.prototype):{};var k="autoNotifyOnSet"in a?a.autoNotifyOnSet:c.autoNotifyOnSet;Object.getOwnPropertyNames(a[b]).forEach(function(c){if(!("constructor"===c&&"public"===b||"public"===c&&("protected"===b||"private"===b)||"protected"===c&&"private"===b)){var e=a[b][c];if(!E(e)){var h="function"==typeof e;j[c]=e={configurable:!1,enumerable:!h,writable:!h,value:e}}if("function"==typeof e.value){var i=q(g,e.value);return void(j[c]={enumerable:e.enumerable||!1,configurable:e.configurable||!1,writable:e.writable||!1,value:i})}var l,m,n=j[c]={enumerable:e.enumerable!==!1,configurable:e.configurable||!1},o=c+"Changed";e.hasOwnProperty("get")&&(l=e.get,n.get=r(g,l)),e.hasOwnProperty("set")&&(e.hasOwnProperty("get")||(n.get=s(g,c)),m=e.set,n.set=e.publish||d?"public"===b?(k?t:u)(g,m,o):v(g,m,o):w(g,m)),"undefined"==typeof l&&"undefined"==typeof m&&(f[c]={configurable:!0,writable:!0,enumerable:!0,value:e.value},n.get=s(g,c),e.writable!==!1&&(n.set=(e.publish||d)&&"public"===b?(k?x:y)(g,c):z(g,c)))}}),h&&("public"!==b||j.subscribe&&j.unsubscribe?"protected"!==b||j.publish||(j.publish={enumerable:!1,configurable:!1,writable:!1,value:n(g)}):(j.subscribe={enumerable:!1,configurable:!1,writable:!1,value:l(g)},j.unsubscribe={enumerable:!1,configurable:!1,writable:!1,value:m(g)}),"public"!==b||j.publish||(j.publish={enumerable:!1,configurable:!1,writable:!1,value:(k?o:p)(g)}));var B;return a.mixin&&(B=Array.isArray(a.mixin)?a.mixin:[a.mixin]),"protected"===b?j.init={value:A(g,a.init,Object.getPrototypeOf(i).init,a.name,B,a.mixinExtended)}:"public"===b&&(j.destroy={value:C(g,a.destroy,Object.getPrototypeOf(i).destroy,i,a.mixinExtended)},a.mixin&&(B=Array.isArray(a.mixin)?a.mixin:[a.mixin],B.forEach(F,j))),Object.defineProperties(i,j),i},J=function(a){return"undefined"==typeof window||"undefined"==typeof window.Node||"undefined"==typeof a?!1:a.prototype instanceof window.Node||a instanceof window.Node},K="75E3BA8C-63AF-45DE-85C3-260FF96453B9",L=function(a,b,c,d){var e=a.self,g=function(a){return Object.create(c,a||{})};return Object.defineProperty(g," oracle ",{value:K}),{create:{value:function(){var g=Array.prototype.slice.apply(arguments);if(this===e){var h,j=f++;if(J(g[0])&&J(b))h=g[0],g=g.slice(1),Object.getPrototypeOf(h)!==b&&Object.setPrototypeOf(h,b);else if(void 0!==this.tagName)h=document.createElement(this.tagName),Object.setPrototypeOf(h,b);else{for(var k=a?a.baseType:void 0;k&&"function"==typeof k.extend&&k.extend[" oracle "]===K;){var l=Object.getPrototypeOf(k.prototype);k=l?l.constructor:void 0}k&&"function"==typeof k?(h=new(Function.prototype.bind.apply(k,[k].concat(g))),Object.setPrototypeOf(h,b)):h=Object.create(b)}Object.defineProperty(h,"__id",{configurable:!0,writable:!1,enumerable:!1,value:j});var m=Object.create(c,{"public":{enumerable:!0,writable:i,configurable:!0,value:h},__id:{configurable:!0,writable:!1,enumerable:!1,value:j}});return e.create.apply(m,g),m.init.apply(m,g),h}a.baseType&&"function"==typeof a.baseType.extend&&a.baseType.extend[" oracle "]===K&&a.baseType.create.apply(this,g);var n=Object.create(d,{"protected":{enumerable:!0,writable:i,configurable:!0,value:this},"public":{enumerable:!0,writable:i,configurable:!0,value:this["public"]}});a.privateRegistry[this["public"].__id]=n}},extend:{value:g},prototype:{enumerable:!0,writable:!1,configurable:!1,value:b},constructor:{configurable:!1,writable:!1,enumerable:!1,value:Object.create({},{name:{configurable:!1,writable:!1,enumerable:!1,value:"Type<"+a.name+">"}})},name:{enumerable:!0,value:a.name}}},M=function(a,b){return function(c){if(!a.isPrototypeOf(c))throw TypeError("object "+c.constructor.name+" is not of type "+a.constructor.name);return b[c.__id]}},N=function(a){return"function"==typeof a.extend?a.extend[" oracle "]===K:!1},O=function(a){if(a.__id)return h[a.__id];var b,c,d,f={},i={},j={},k=null,l=!0,m=a.extend;Object.defineProperties(a,{__id:{writable:!1,configurable:!1,enumerable:!1,value:g++}}),m?"function"==typeof m.create&&m!==Object?(k=m,d=Object.create(k),l=!1):J(m)?(k=m,d={}):"function"==typeof m?(k=m,d={}):"string"==typeof m?(k=document.createElement(m).constructor,d={},d.tagName=m.toUpperCase()):(k=m,d={}):d={},k&&J(k)&&(d.tagName="EL-"+a.name.toUpperCase()),h[a.__id]=d,a["public"]=a["public"]||{},a["protected"]=a["protected"]||{},a["private"]=a["private"]||{},a.mixinExtended&&H(a),Object.defineProperties(j,{privateRegistry:{value:f}}),b=I(a,"protected",k,i,f,l),c=I(a,"public",k,i,f,l),G(a["private"],i,b,c),Object.defineProperties(j,i);var n={};return G(a,n,b,c,e),Object.defineProperties(d,n),Object.defineProperties(d,L({self:d,name:a.name,privateRegistry:f,baseType:k},c,b,j)),Object.defineProperties(c,{constructor:{configurable:!0,writable:!1,enumerable:!1,value:d}}),Object.defineProperties(a,{getPrivate:{writable:!1,configurable:!1,enumerable:!1,value:M(c,f)}}),d};b.exports=c,Object.defineProperties(b.exports,{createType:{enumerable:!0,value:O},isType:{enumerable:!0,value:N}})},{}],2:[function(){},{}],3:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:2}],4:[function(a,b){b.exports={name:"elsa",description:"BlackBerry Enterprise SDK UI toolkit",version:"0.0.1-dev",author:{name:"Anzor Bashkhaz"},contributors:[{name:"Isaac Gordezky"},{name:"Paul LeMarquand"}],homepage:"https://gerrit.rim.net/gitweb?p=meapclient/ui-components.git",repository:{type:"git",url:"ssh://gerrit.rim.net:29418/meapclient/ui-components.git"},bugs:{url:"https://jira.bbqnx.net/browse/MEAPCLIENT/component/20018"},main:"dist/elsa.js",devDependencies:{angular:"^1.3.4",backbone:"~1.1.2","browserify-istanbul":"^0.1.1",chai:"^1.9.1",cheerio:"^0.18.0","clean-css":"^2.1.8",colors:"^0.6.2","connect-livereload":"^0.3.2",cssify:"^0.5.1","ecma5-extend":"^0.3.0",faketouches:"0.0.5","faketouches-gestures":"^0.0.1","font-awesome":"^4.2.0",grunt:"~0.4.4","grunt-autoprefixer":"^1.0.0","grunt-browserify":"^3.0.0","grunt-complexity":"^0.1.6","grunt-concurrent":"^0.5.0","grunt-contrib-clean":"~0.5.0","grunt-contrib-concat":"~0.4.0","grunt-contrib-connect":"^0.7.1","grunt-contrib-jshint":"^0.10.0","grunt-contrib-less":"~0.11.0","grunt-contrib-uglify":"~0.4.0","grunt-contrib-watch":"~0.6.1","grunt-cordova-app":"^0.0.10","grunt-exorcise":"^0.1.0","grunt-focus":"^0.1.1","grunt-githooks":"~0.3.1","grunt-jscs":"^0.7.1","grunt-jsdoc":"^0.6.1","grunt-karma":"^0.8.2","grunt-lesslint":"^1.1.0","grunt-nsp-package":"0.0.4","grunt-open":"^0.2.3","grunt-subgrunt":"^0.4.4","grunt-sync":"0.0.7","grunt-wrap":"~0.3.0",hammerjs:"~1.1.3",ip:"","jit-grunt":"^0.4.1",jquery:"~2.1.0","jshint-jenkins-checkstyle-reporter":"^0.1.2","jshint-stylish":"^0.1.5",jstify:"^0.7.0",karma:"^0.12.14","karma-chai":"^0.1.0","karma-chrome-launcher":"^0.1.3","karma-coverage":"^0.2.1","karma-junit-reporter":"^0.2.2","karma-mocha":"^0.1.3","karma-mocha-reporter":"^0.2.8","karma-sinon":"^1.0.3","karma-spec-reporter":"~0.0.13","karma-telemetry":"^0.1.1","karma-webdriver-launcher":"^0.2.0",mocha:"^1.18.2","mold-source-map":"^0.3.0",mustache:"^0.8.2",sinon:"^1.9.1","source-map":"^0.1.33",stringify:"^3.0.0",through:"^2.3.4","time-grunt":"^0.3.1",underscore:"^1.7.0"},dependencies:{htmlparser2:"^3.7.3",through:"^2.3.4",falafel:"^0.3.1",glob:"^4.0.6"},peerDependencies:{"grunt-browserify":">= 3.0.0","module-deps":"< 3.5.11"},scripts:{test:"grunt test",release:"grunt prod"},publishConfig:{registry:"http://npm-proxy.rim.net:5984/"},files:["README.md","CHANGELOG.md","loader","docs/output","docs/live","dist","demo"]}},{}],5:[function(a,b){var c=window.Ecma5Extend,d=a("./template.html"),e=a("./signature.html"),f=a("../common/fastTouch.js"),g=a("../../shared/utils.js").applyAttributes;b.exports={name:"action",attributes:["iconsource","iconclass","label","description","overflow","disabled"],extend:c.createType(a("../base-action")),mixinExtended:[f.mixin],"public":{overflow:{get:function(){return this["public"].classList.contains("el-action-overflow")},set:function(a){a?this["public"].classList.add("el-action-placement-overflow","el-managed-action"):this["public"].classList.remove("el-action-placement-overflow","el-managed-action"),this["protected"].publish("overflowChanged",a)}}},init:function(){var a;a=this["public"].parentElement&&"EL-EXPANDABLE-ACTION"===this["public"].parentElement.tagName||this["public"].classList.contains("signature")?e:d,this["protected"].render(a),g(this["public"],b.exports.attributes)},destroy:function(){this.wrapperEl=void 0,this.iconEl=void 0,this.labelEl=void 0,this.descriptionEl=void 0,this.iconclass=void 0}}},{"../../shared/utils.js":118,"../base-action":11,"../common/fastTouch.js":14,"./signature.html":6,"./template.html":7}],6:[function(a,b){b.exports='<div class=el-signature-action-wrapper><div class=el-signature-action-bg></div><div class="el-action-icon el-signature-action-icon-box"></div><div class=el-action-content><div class=el-action-label></div><div class=el-action-description></div></div></div>'},{}],7:[function(a,b){b.exports="<div class=el-action-icon></div><div class=el-action-content><div class=el-action-label></div><div class=el-action-description></div></div>"},{}],8:[function(a,b){var c=(window.Ecma5Extend,a("./template.html"));b.exports={name:"activityindicator",extend:HTMLElement,"public":{visible:{get:function(){return this.visible},set:function(a){this.visible!==a&&this["public"].toggle()}},show:function(){this.visible||(this["public"].classList.remove("el-hidden"),this.visible=!0)},hide:function(){this.visible&&(this["public"].classList.add("el-hidden"),this.visible=!1)},toggle:function(){this.visible?this["public"].hide():this.visible||this["public"].show()}},init:function(){this["public"].innerHTML=c,this.visible=this["public"].classList.contains("el-hidden")?!1:!0},destroy:function(){}}},{"./template.html":9}],9:[function(a,b){b.exports="<div class=el-activityindicator-wrapper><div class=el-activityindicator-spinner></div></div>"},{}],10:[function(a,b){var c=window.elsa.compiler,d=(window.elsa,window.Ecma5Extend),e=a("../../shared/utils.js").applyAttributes,f=a("../common/fastTouch.js"),g=d.createType(a("../overflow-menu/index.js")),h={FALSE:"false",ALWAYS:"always",AUTO:"auto"},i={FALSE:"false",STACK:"stack",AUTO:"auto"};b.exports={name:"bar",extend:HTMLElement,attributes:["backbutton","drawerbutton"],"public":{drawerbutton:{get:function(){return this.drawerButtonState},set:function(a){if(a!==this.drawerButtonState){if(a===i.FALSE)this["public"].removeChild(this.drawerbutton),this.drawerbutton.removeEventListener("trigger",this.toggleSidemenu),this.toggleSidemenu=void 0,this.drawerbutton=void 0;else{if(a!==i.STACK&&a!==i.AUTO)return;this.drawerbutton||(this.toggleSidemenu=function(a,b){"EL-DRAWER"===window.elsa.App.scene.tagName&&b.target&&b.target.classList.contains("el-drawerbutton")&&(window.elsa.App.scene.visualState="toggle")},this.drawerbutton=document.createElement("div"),this.drawerbutton.classList.add("el-action","el-drawerbutton","el-managed-action"),this.drawerbutton.innerHTML='<div class="el-action-icon"></div>',this.drawerbutton.querySelector(".el-action-icon").classList.add("el-icon","core-actionbar-tab-icon-taboverflow"),this.drawerbuttonFastTouch=new f(this.drawerbutton,this.toggleSidemenu.bind(this)),this["public"].insertBefore(this.drawerbutton,this["public"].firstElementChild)),this.drawerbutton.classList.remove("drawerbuttonstate-"+this.drawerButtonState),this.drawerbutton.classList.add("drawerbuttonstate-"+a)}this.drawerButtonState=a}}},backbutton:{get:function(){return this.backButtonState},set:function(a){if(a!==this.backButtonState){if(a===h.FALSE)this["public"].removeChild(this.backbutton),this.backbutton.removeEventListener("trigger",this.pop),this.pop=void 0,this.backbutton=void 0;else{if(a!==h.ALWAYS&&a!==h.AUTO)return;if(!this.backbutton){var b=this;this.pop=function(){for(var a=b["public"].parentNode;a&&"EL-PAGE"!==a.tagName;a=a.parentNode);a&&a.stack&&a.stack.pop()},this.backbutton=document.createElement("div"),this.backbutton.classList.add("el-action","el-backbutton","el-managed-action"),this.backbutton.innerHTML='<div class="el-action-icon"></div>',this.backbutton.querySelector(".el-action-icon").classList.add("el-icon","core-actionbar-icon-back"),this.backbuttonFastTouch=new f(this.backbutton,this.pop.bind(this)),this["public"].insertBefore(this.backbutton,this["public"].firstElementChild)}this.backbutton.classList.remove("backbuttonstate-"+this.backButtonState),this.backbutton.classList.add("backbuttonstate-"+a)}this.backButtonState=a}}}},"private":{overflow:function(){this.overflowMenu.open()}},init:function(){this.more=function(){console.error("NOT IMPLEMENTED: more")},this.morebutton=document.createElement("div"),this.morebutton.classList.add("el-action","el-morebutton","el-managed-action"),this.morebutton.innerHTML='<div class="el-action-icon"></div>',this.morebutton.firstElementChild.classList.add("el-icon","core-actionbar-icon-actionoverflow"),this.morebuttonFastTouch=new f(this.morebutton,this.overflow.bind(this)),this.overflowMenu=g.create({bar:this["public"]});var a=document.createElement("div"),c=document.createElement("div");a.classList.add("el-bar-start"),c.classList.add("el-bar-end"),this["public"].appendChild(this.morebutton),this["public"].appendChild(a),this["public"].appendChild(c),this.backButtonState=h.FALSE,this.drawerButtonState=i.FALSE,e(this["public"],b.exports.attributes)},destroy:function(){this.morebutton=void 0,this.more=void 0,c.destroy(this.overflowMenu),this.overflowMenu.destroy&&this.overflowMenu.destroy(),this.overflowMenu=void 0,this.morebuttonFastTouch.destroy(),this.morebuttonFastTouch=void 0,this.backbutton&&(this.backbuttonFastTouch.destroy(),this.backbuttonFastTouch=void 0,this.backbutton=void 0),this.drawerbutton&&(this.drawerbuttonFastTouch.destroy(),this.drawerbuttonFastTouch=void 0,this.drawerbutton=void 0),this.pop=void 0,this.toggleSidemenu=void 0}}},{"../../shared/utils.js":118,"../common/fastTouch.js":14,"../overflow-menu/index.js":52}],11:[function(a,b){var c=(window.Ecma5Extend,a("../../shared/events"));b.exports={name:"base-action",extend:window.HTMLElement,"public":{label:{get:function(){return this.labelEl.textContent},set:function(a){this.labelEl&&(this.labelEl.textContent=a),this["protected"].publish("labelChanged",a)}},disabled:{get:function(){return this.disabled},set:function(a){this.disabled!==a&&(this.disabled=a,this.disabled?(this["public"].setAttribute("disabled",""),this["public"].setAttribute("aria-disabled",this.disabled)):(this["public"].removeAttribute("disabled"),this["public"].removeAttribute("aria-disabled")),this["protected"].publish("disabledChanged",a))}},description:{get:function(){return this.descriptionEl.textContent},set:function(a){this.descriptionEl&&(this.descriptionEl.textContent=a),this["protected"].publish("descriptionChanged",a)}},iconsource:{set:function(a){this.iconEl.style.backgroundImage=a?"url("+a+")":"",this.iconsource=a}},iconclass:{set:function(a){this.iconclass&&this.toggleImageClass(this.iconclass,!1),this.toggleImageClass(a,!0),this.iconclass=a}}},"private":{toggleImageClass:function(a,b){if(a){var c=this.iconEl.classList;a=a instanceof Array?a:a.split(" ");for(var d=0;d<a.length;d++)c.toggle(a[d],b)}}},"protected":{render:function(a){this["public"].innerHTML=a,this.labelEl=this["public"].querySelector(".el-action-label"),this.descriptionEl=this["public"].querySelector(".el-action-description"),this.iconEl=this["public"].querySelector(".el-action-icon")},trigger:function(){if(!this.disabled){var a=c.trigger({action:this["public"]});this["public"].dispatchEvent(a)}}},init:function(){this.disabled=!1},destroy:function(){this.wrapperEl=void 0,this.iconEl=void 0,this.labelEl=void 0,this.descriptionEl=void 0,this.iconclass=void 0}}},{"../../shared/events":115}],12:[function(a,b){b.exports={name:"Collection",extend:Array,"public":{append:function(a){var b,c=this["public"].length;if(Array.isArray(a)){a.unshift(0),a.unshift(-1),b=Array.prototype.splice.apply(this["public"],a);for(var d=0;d<a.length-2;d++)this["protected"].publish("add",c+d,a[d+2])}else b=Array.prototype.push.call(this["public"],a),this["protected"].publish("add",c,a);return b},insert:function(a){var b=Array.prototype.slice.call(arguments,1);if(b.length>1){b=[a,0].concat(b),Array.prototype.splice.apply(this["public"],b);for(var c=0;c<b.length-2;c++)this["protected"].publish("add",a+c-2,b[c])}else Array.prototype.splice.call(this["public"],a,0,b[0]),this["protected"].publish("add",a,b[0]);return a},push:function(){var a=[this["public"].length];return a.push.apply(a,arguments),this["public"].insert.apply(this["public"],a),this.length},pop:function(){return this["public"].remove(this["public"].length-1)[0]},at:function(a){return this["public"][a]},remove:function(a,b){b=void 0===b?1:b;for(var c=this["public"].length,d=Array.prototype.splice.call(this["public"],a,b),e=0;e<d.length;e++)this["protected"].publish("remove",this.wrapIndex(a+e,c),d[e]);return d},isEmpty:{writable:!1,get:function(){return 0===this["public"].length?!0:!1}},replace:function(a,b){return this["public"][a]?(this["public"][a]=b,this["protected"].publish("change",a,b),!0):!1},empty:function(){for(var a=Array.prototype.splice.call(this["public"],0,this["public"].length),b=a.length,c=b-1;c>=0;c--)this["protected"].publish("remove",c,a[c])},sort:function(){throw new TypeError("Not Implemented: elsa.Collection.sort()")},reverse:function(){throw new TypeError("Not Implemented: elsa.Collection.reverse()")},splice:function(){throw new TypeError("Not Implemented: elsa.Collection.reverse()")}},"private":{wrapIndex:function(a,b){return a%=b,0>a&&(a+=b),a}},destroy:function(){Array.prototype.splice.call(this["public"],0,this["public"].length)}}},{}],13:[function(a,b){b.exports={easeOutCubic:function(a,b,c,d){return c*(Math.pow(a/d-1,3)+1)+b},easeInCubic:function(a,b,c,d){return c*Math.pow(a/d,3)+b},easeInOutCubic:function(a,b,c,d){return(a/=d/2)<1?c/2*Math.pow(a,3)+b:c/2*(Math.pow(a-2,3)+2)+b},easeOutQuad:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},linear:function(a,b,c,d){return c*a/d+b}}},{}],14:[function(a,b){var c=(a("../../shared/interactionMode.js"),a("../../shared/events.js")),d=function(a,b){return a.top===b.top&&a.left===b.left},e=function(a,b,c,d){return b>=a.left-d&&b<=a.right+d&&c>=a.top-d&&c<=a.bottom+d},f=b.exports=function g(a,b){return this===g?new g(a,b):(this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onTouchCancel=this.onTouchCancel.bind(this),this["protected"]||(this["protected"]={trigger:b}),a&&this.enableFastTouch(a),this)};f.create=f,f.prototype={dragThreshold:10,originalTouch:void 0,enableFastTouch:function(a,b){return void 0!==b&&(this.lock=b),this.__fastTouchTarget=a,this.__fastTouchTarget.addEventListener("touchstart",this.onTouchStart),this.__fastTouchTarget.addEventListener("mousedown",this.onTouchStart),this},disableFastTouch:function(){return this.__fastTouchTarget&&(this.triggerFrame&&(window.cancelAnimationFrame(this.triggerFrame),this.triggerFrame=void 0),this.triggerTimeout&&clearTimeout(this.triggerTimeout),document.body.removeEventListener("touchend",this.onTouchEnd),document.body.removeEventListener("touchcancel",this.onTouchCancel),document.body.removeEventListener("mouseup",this.onTouchEnd),document.body.removeEventListener("mouseleave",this.onTouchCancel),this.__fastTouchTarget.removeEventListener("touchstart",this.onTouchStart),this.__fastTouchTarget.removeEventListener("mousedown",this.onTouchStart),this.__fastTouchTarget=void 0),this.state="up",this},onTouchStart:function(a){this.stateChange("down",a)},onTouchMove:function(a){if(this.firstMove)this.firstMove=!1,this.onTouchMoveHandler(a,!0);else{var b=this;window.requestAnimationFrame(function(){b.onTouchMoveHandler(a)})}},onTouchMoveHandler:function(a){if(!a.cancelable)return void this.stateChange("cancel");if(!d(this.boundingClientRect,this.__fastTouchTarget.getBoundingClientRect()))return void this.stateChange("cancel");var b=a.touches?a.touches[0].clientX:a.clientX,c=a.touches?a.touches[0].clientY:a.clientY;b>=this.boundingClientRect.left-this.dragThreshold&&b<=this.boundingClientRect.right+this.dragThreshold&&c>=this.boundingClientRect.top-this.dragThreshold&&c<=this.boundingClientRect.bottom+this.dragThreshold?this.stateChange("in",a):this.stateChange("out",a)},onTouchEnd:function(a){a.cancelable&&a.preventDefault();var b=!1,c=!a.cancelable,f=this.__fastTouchTarget.getBoundingClientRect();if(c||(c=!d(this.boundingClientRect,f)),!c){var g=a.changedTouches?a.changedTouches[0].clientX:a.clientX,h=a.changedTouches?a.changedTouches[0].clientY:a.clientY;b=!e(f,g,h,this.dragThreshold),b&&a.target!==this.__fastTouchTarget&&(b=!e(a.target.getBoundingClientRect(),g,h,this.dragThreshold))}c||b?this.stateChange("cancel"):this.stateChange("up",a)},onTouchCancel:function(a){this.stateChange("cancel",a)},"up-exit":function(){this.boundingClientRect=this.__fastTouchTarget.getBoundingClientRect(),document.body.addEventListener("touchend",this.onTouchEnd),document.body.addEventListener("touchcancel",this.onTouchCancel),document.body.addEventListener("mouseup",this.onTouchEnd),document.body.addEventListener("mouseleave",this.onTouchCancel),this.triggerTimeout&&clearTimeout(this.triggerTimeout)},"up-enter":function(){document.body.removeEventListener("touchmove",this.onTouchMove),document.body.removeEventListener("touchend",this.onTouchEnd),document.body.removeEventListener("touchcancel",this.onTouchCancel),document.body.removeEventListener("mousemove",this.onTouchMove),document.body.removeEventListener("mouseup",this.onTouchEnd),document.body.removeEventListener("mouseleave",this.onTouchCancel)},"trigger-enter":function(a){this.triggerFrame=window.requestAnimationFrame(function(){this.triggerFrame=void 0,this.stateChange("frame",a)}.bind(this))},"trigger-exit":function(a){if(this.triggerFrame&&(window.cancelAnimationFrame(this.triggerFrame),this.triggerFrame=void 0),!this.lock||this.__fastTouchTarget===a.target){var b=this.__fastTouchTarget||a.target;this.triggerTimeout=setTimeout(function(){if("getSelection"in document){var d=document.getSelection();d&&d.removeAllRanges()}if("function"==typeof this["protected"].trigger)this["protected"].trigger(b,a);else{var e=c.trigger({detail:b});b.dispatchEvent(e),e=void 0}if(-1===a.type.indexOf("mouse")){var f=document.createEvent("MouseEvents");f.initMouseEvent("click",!0,!0,document.defaultView,a.detail,a.clientX,a.clientY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null),f.forwardedTouchEvent=!0,b.dispatchEvent(f)}}.bind(this),0)}},state:"up",stateChange:function(a,b,c,d){var e={up:{down:"press"},press:{up:"trigger",cancel:"up",out:"press-out"},"press-out":{up:"up",cancel:"up","in":"press"},trigger:{frame:"up"}},f=e[this.state],g=f&&f[a];if(g){var h=this.state;this.state=g;var i=this[h+"-exit"];"function"==typeof i&&i.call(this,b,c,d);var j=this[g+"-enter"];return"function"==typeof j&&j.call(this,b,c,d),this.state}},destroy:function(){this.disableFastTouch(),this.boundingClientRect=void 0,this["protected"]=void 0}},f.mixin={init:function(){f.call(this,this["public"])},destroy:f.prototype.destroy,"private":Object.create(f.prototype,{destroy:{value:void 0}})}},{"../../shared/events.js":115,"../../shared/interactionMode.js":116}],15:[function(a,b){var c=window.Ecma5Extend;b.exports=c.createType({name:"pool","public":{get:function(a){var b=this["public"].getPool(a);return b.length?b.pop():null},getPool:function(a){return this.pool[a]||[]},put:function(a,b){this.pool[b]=this["public"].getPool(b),this.pool[b].push(a)},forEach:function(a,b){if(b)this["public"].getPool(b).forEach(a);
else for(var c in this.pool)this["public"].forEach(a,c)},empty:function(){this.pool={}}},init:function(){this["public"].empty()},destroy:function(){this.pool=void 0}})},{}],16:[function(a,b){var c=(window.Ecma5Extend,window.elsa.utils.styles),d=a("../../shared/overlayTouch.js"),e=a("../../shared/events"),f=function(a){a.stopPropagation()};b.exports={name:"dialog",extend:window.elsa.control,events:{open:e.createEventType("open",{bubbles:!0}),close:e.createEventType("close")},"public":{open:function(){var a=this,c=b.exports.events.open();window.elsa.App.requestAnimationFrame(this,function(){window.elsa.App.requestAnimationFrame(a,function(){window.elsa.App.scene.classList.add("fade-in"),a["public"].classList.add("fade-in"),a.overlayTouch.enableOverlayTouch(window.elsa.App.scene,this["public"])}),a["public"].classList.add("open"),window.elsa.App.scene.classList.add("el-overlay")}),this["public"].dispatchEvent(c)},close:function(a){var d=this,e=b.exports.events.close({result:a});this.overlayTouch.disableOverlayTouch(window.elsa.App.scene),this.scene=window.elsa.App.scene,this.scene.addEventListener(c.transitionend,this.hideDialog),this.scene.classList.remove("fade-in"),d["public"].classList.remove("fade-in"),this["public"].dispatchEvent(e)}},"private":{lock:!0,hideDialog:function(){this.scene.removeEventListener(c.transitionend,this.hideDialog),this["public"].classList.remove("open"),this.scene.classList.remove("el-overlay"),this.scene=void 0}},"protected":{trigger:function(){this["public"].close()}},init:function(){this.hideDialog=this.hideDialog.bind(this),this.overlayTouch=new d(void 0,this["protected"].trigger.bind(this["protected"]))},destroy:function(){this.overlayTouch=this.overlayTouch.destroy(),window.elsa.App.cancelAnimationFrame(this),this.scene&&(this.scene.removeEventListener(c.transitionend,this.hideDialog),this.scene=void 0),this["public"].removeEventListener("mouseup",f),this["public"].removeEventListener("touchend",f),this["public"].removeEventListener("touchcancel",f),this.hideDialog=void 0}}},{"../../shared/events":115,"../../shared/overlayTouch.js":117}],17:[function(a,b){var c=window.Ecma5Extend,d=a("./template.html"),e=a("../common/fastTouch.js"),f=a("../../shared/utils.js").applyAttributes,g=(a("path"),a("../../shared/utils")),h={};b.exports={name:"draweritem",extend:c.createType(a("../base-action")),mixinExtended:[e.mixin],attributes:["iconsource","iconclass","label","category","description","badgecount","defaultroute","stateid"],"public":{badgecount:{get:function(){return this.badgecount},set:function(a){return"undefined"==typeof a||""===a||null===a||0===parseInt(a)?(this.badgecountEl.classList.add("el-hidden"),this.badgecountEl.textContent="",void(this.badgecount=void 0)):(this.badgecount=a,this.badgecountEl.classList.remove("el-hidden"),this.badgecountEl.textContent=this.badgecount,void this["protected"].publish("badgecountChanged",this.badgecount))}},stateid:{writable:!1},stack:{writable:!1},memorymanagement:{value:"remove"},defaultroute:{set:function(a){this.stack.defaultroute=a},get:function(){return this.stack.defaultroute}}},"private":{createStack:function(a){this.stack=window.elsa.stack.create({parentControl:a.parentControl})}},"protected":{creationCompleted:function(){this.stack.publish("creationCompleted")}},init:function(a){if(a=a||{},this.sourcepath=a?a.sourcepath:"/"+this.routename,this.defaultroute=a.defaultroute||g.getAttribute(this["public"],"defaultroute"),this.createStack(a),this["protected"].render(d),this.badgecountEl=this["public"].querySelector(".el-action-badgecount"),f(this["public"],b.exports.attributes),this.stateid=a.stateid||g.getAttribute(this["public"],"stateid")||(this["public"].label?g.slugify(this["public"].label):!1)||(this.defaultroute?this.defaultroute.split("/")[0]:!1),!this.stateid)throw new Error("draweritem expects label or stateid",this["public"],this.sourcepath);this.memorymanagement=g.getAttribute(this["public"],"memorymanagement")||this.memoryManagementStrategy,this.iconclass||this.iconsource?this["public"].classList.remove("no-image"):this["public"].classList.add("no-image")},destroy:function(){this.stack&&this.stack.destroy&&window.elsa.compiler.destroy(this.stack),this.wrapperEl=void 0,this.iconEl=void 0,this.labelEl=void 0,this.iconclass=void 0,this.descriptionEl=void 0,this.iconclass=void 0,this.badgecountEl=void 0,h[this.routename]=void 0,this.stack=void 0}}},{"../../shared/utils":118,"../../shared/utils.js":118,"../base-action":11,"../common/fastTouch.js":14,"./template.html":18,path:3}],18:[function(a,b){b.exports='<div class=el-action-icon></div><div class=el-action-content><div class=el-action-label></div><div class=el-action-description></div></div><div class="el-action-badgecount el-hidden"></div>'},{}],19:[function(a,b){var c,d,e,f,g=window.elsa.utils.styles,h=navigator.userAgent.match(/Android/i);e=2.426018941204166,f=.715573712385627,d=132.5,c=-52.5,b.exports=function(a,b){if(h)for(var i=0;i<a.length;i++){var j=a[i].style;j[g.transitionDuration]="0ms",j[g.transform]="translate(0px, -30px) scale(0)"}var k=(f-e)/(a.length-1),l=0,m=e;for(l=0;l<a.length;l++){var n=Math.round(d*Math.cos(m)),o=Math.round(c+d*Math.sin(m)),p=a[l],q=p.style;if(h){{p.offsetHeight}q.visibility="visible"}q[g.transitionDuration]=180+50*l+"ms",q[g.transform]="translate("+n+"px,"+(b-o)+"px) scale(1)",m+=k}}},{}],20:[function(a,b){b.exports='<div class=el-signature-action-overlay></div><div class=el-signature-action-wrapper><div class=el-expandable-actions></div><div class=el-signature-action-bg></div><div class="el-action-icon el-signature-action-icon-box"></div></div>'},{}],21:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.utils.styles,e=a("./expandable.html"),f=a("./calc.js"),g=a("../../shared/utils.js").applyAttributes,h=a("../../shared/events"),i=(navigator.userAgent.match(/Android/i),function(a){return a.targetTouches?a.targetTouches[0].clientX:a.touches?a.touches[0].clientX:a.pageX}),j=function(a){return a.targetTouches?a.targetTouches[0].clientY:a.touches?a.touches[0].clientY:a.pageY};b.exports={name:"expandable-action",extend:c.createType(a("../base-action")),attributes:["iconsource","iconclass","label","category","description"],"private":{expandableActionDistance:-5,debouncedTraceMoveAnimID:void 0,oldElement:void 0,currentElement:void 0,startElement:void 0,closeExpanadableActions:function(){window.elsa.App.requestAnimationFrame(this,this.closeExpandableActionsFrame),this.open=!1,this.currentElement=void 0,this.oldElement=void 0,this.startElement=void 0,this["public"].classList.remove("open")},closeExpandableActionsFrame:function(){for(var a=0;a<this.subActionsEl.children.length;a++){var b=this.subActionsEl.children[a];b.style[d.transform]=""}this.overlayEl.classList.remove("open")},openExpandableActions:function(){this.open=!0;var a=this;f(this.subActionsEl.children,-this.expandableActionDistance),this["public"].classList.add("open"),this.openTimeout=setTimeout(function(){a.openTimeout=void 0,a.overlayEl.classList.add("open")},50)},handleTriggered:function(a){this.stateChange("up",a)},handleTouchMove:function(a){a.preventDefault(),this.debouncedTraceMoveAnimID||(this.debouncedTraceMoveAnimID=window.elsa.App.requestAnimationFrame(this,this.updateCurrentElement,[a]))},handleTouchCancel:function(a){this.handleCommonTouchFinished(),this.stateChange("cancel",a)},handleTouchEnd:function(a){a.preventDefault(),this["public"]&&(this.handleCommonTouchFinished(),this.stateChange("up",a))},handleCommonTouchFinished:function(){document.body.removeEventListener("mouseleave",this.handleTouchCancel),this.mainIconBg.classList.remove("active")},handleTouchStart:function(a){a.preventDefault();if(!this.disabled){if("closed"===this.state&&a.target===this.overlayEl)return!0;this.startElement=this.getActionElement(a),this.mainIconBg.classList.add("active"),this.stateChange("down",a),document.body.addEventListener("mouseleave",this.handleTouchCancel)}},"closed-exit":function(){this["public"].addEventListener("touchcancel",this.handleTouchCancel),this["public"].addEventListener("touchend",this.handleTouchEnd),this["public"].addEventListener("mouseup",this.handleTouchEnd)},"closed-enter":function(a){this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=void 0),this["public"].removeEventListener("touchcancel",this.handleTouchCancel),this["public"].removeEventListener("touchend",this.handleTouchEnd),this["public"].removeEventListener("mouseup",this.handleTouchEnd),document.body.removeEventListener("mouseup",this.handleTouchEnd),document.body.removeEventListener("touchend",this.handleTouchEnd),document.body.removeEventListener("touchcancel",this.handleTouchCancel),this.subActionsEl.removeEventListener("trigger",this.handleTriggered),"destroy"!==a&&this.closeExpanadableActions()},"closed-down-enter":function(){var a=this;this.timeout=setTimeout(function(){a.timeout=void 0,a.stateChange("hold")},400),this["public"].classList.add("active")},"closed-down-exit":function(){this.openExpandableActions(),this["public"].classList.remove("active"),this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.subActionsEl.addEventListener("trigger",this.handleTriggered),document.body.addEventListener("mouseup",this.handleTouchEnd),document.body.addEventListener("touchend",this.handleTouchEnd),document.body.addEventListener("touchcancel",this.handleTouchCancel)},"open-down-enter":function(){document.body.addEventListener("touchmove",this.handleTouchMove),document.body.addEventListener("mousemove",this.handleTouchMove)},"open-down-exit":function(){if(document.body.removeEventListener("touchmove",this.handleTouchMove),document.body.removeEventListener("mousemove",this.handleTouchMove),this.currentElement&&this.currentElement!==this["public"]&&(this.currentElement.classList.remove("label-visible"),this.startElement!==this.currentElement)){var a=h.trigger({action:this.currentElement});this.currentElement.dispatchEvent(a),a=void 0}this.oldElement&&this.oldElement.classList.remove("label-visible")},"open-up-exit":function(a){this.updateCurrentElement(a)},getActionElement:function(a){for(var b=document.elementFromPoint(i(a),j(a));b&&"EL-ACTION"!==b.tagName&&b.parentElement;)if(b=b.parentElement,"EL-EXPANDABLE-ACTION"===b.tagName||"EL-PAGE"===b.tagName||"BODY"===b.tagName){b=void 0;break}return b},updateCurrentElement:function(a){this.debouncedTraceMoveAnimID=void 0,this.currentElement=this.getActionElement(a),this.oldElement&&this.oldElement.classList.remove("label-visible"),this.currentElement&&(this.currentElement.classList.add("label-visible"),this.oldElement=this.currentElement)},state:"closed",stateChange:function(a,b,c,d){var e={closed:{down:"closed-down"},"closed-down":{up:"open-up",hold:"open-down",cancel:"closed"},"open-up":{down:"open-down"},"open-down":{down:"open-up",up:"closed",cancel:"open-up"}},f=e[this.state],g=f&&f[a];if(g){var h=this.state;Object.getPrototypeOf(this["public"]).constructor.debug&&console.log("action.state ("+a+") "+h+" => "+g),this.state=g;var i=this[h+"-exit"];"function"==typeof i&&i.call(this,b,c,d);var j=this[g+"-enter"];return"function"==typeof j&&j.call(this,b,c,d),this.state}}},"protected":{trigger:function(){}},init:function(){this.handleTouchMove=this.handleTouchMove.bind(this),this.handleTouchStart=this.handleTouchStart.bind(this),this.handleTouchEnd=this.handleTouchEnd.bind(this),this.handleTouchCancel=this.handleTouchCancel.bind(this),this.handleTriggered=this.handleTriggered.bind(this);for(var a=document.createDocumentFragment(),c=this,d=c["public"].firstElementChild;d;d=c["public"].firstElementChild)d.classList.contains("signature")||(d.classList.add("signature"),d.classList.add("expandable-child")),a.appendChild(d);this["protected"].render(e),g(this["public"],b.exports.attributes),this.disabled=!1,this["public"].querySelector(".el-expandable-actions").appendChild(a),this["public"].classList.add("signature"),this.overlayEl=this["public"].querySelector(".el-signature-action-overlay"),this.subActionsEl=this["public"].querySelector(".el-expandable-actions"),this.mainIconBg=this["public"].querySelector(".el-signature-action-wrapper>.el-signature-action-bg"),this["public"].addEventListener("touchstart",this.handleTouchStart),this["public"].addEventListener("mousedown",this.handleTouchStart)},destroy:function(){window.elsa.App.cancelAnimationFrame(this),document.body.removeEventListener("mouseleave",this.handleTouchCancel),document.body.removeEventListener("touchmove",this.handleTouchMove),document.body.removeEventListener("mousemove",this.handleTouchMove),this["closed-enter"]("destroy"),this["public"].removeEventListener("touchstart",this.handleTouchStart),this["public"].removeEventListener("mousedown",this.handleTouchStart),this.openTimeout&&(clearTimeout(this.openTimeout),this.openTimeout=void 0),this.handleTouchMove=void 0,this.handleTouchStart=void 0,this.handleTouchEnd=void 0,this.handleTouchCancel=void 0,this.handleTriggered=void 0,this.mainIconBg=void 0,this.overlayEl=void 0,this.subActionsEl=void 0,this.cancelLongPress=void 0,this.openExpandableActions=void 0,this.beginTrace=void 0,this.traceMove=void 0,this.cancelTouchHold=void 0,this.currentElement=void 0,this.oldElement=void 0,this.startElement=void 0}}},{"../../shared/events":115,"../../shared/utils.js":118,"../base-action":11,"./calc.js":19,"./expandable.html":20}],22:[function(a,b){var c=(window.Ecma5Extend,a("./template.html")),d=a("../../shared/utils.js").applyAttributes;b.exports={name:"header",extend:window.HTMLElement,attributes:["iconsource","iconclass","label"],precompile:function(a){var d=Object.create(b.exports["private"],{"public":{value:a}});a.innerHTML=c,d.labelEl=a.querySelector(".el-action-label"),d.iconEl=a.querySelector(".el-action-icon");for(var e=b.exports.attributes,f=e.length-1;f>=0;f--){var g=e[f],h=a.getAttribute("data-"+g);h&&(b.exports["public"][g].set.call(d,h),a.removeAttribute("data-"+g))}return a},"public":{label:{get:function(){return this.labelEl.innerHTML},set:function(a){this.labelEl.innerHTML=a}},iconsource:{set:function(a){this.iconEl.style.backgroundImage=a?"url("+a+")":"",this.iconsource=a,this.toggleNoIconClass()}},iconclass:{set:function(a){this.iconclass&&this.toggleImageClass(this.iconclass,!1),this.toggleImageClass(a,!0),this.iconclass=a,this.toggleNoIconClass()}}},"private":{toggleImageClass:function(a,b){if(a){var c=this.iconEl.classList;a=a instanceof Array?a:a.split(" ");for(var d=0;d<a.length;d++)c.toggle(a[d],b)}},toggleNoIconClass:function(){this.iconclass||this.iconsource?this["public"].classList.remove("no-icon"):this["public"].classList.add("no-icon")}},init:function(){this["public"].innerHTML=c,this.labelEl=this["public"].querySelector(".el-action-label"),this.iconEl=this["public"].querySelector(".el-action-icon"),d(this["public"],b.exports.attributes),this.toggleNoIconClass()},destroy:function(){this.labelEl=void 0,this.iconEl=void 0,this.iconclass=void 0}}},{"../../shared/utils.js":118,"./template.html":23}],23:[function(a,b){b.exports="<div class=el-action-icon></div><div class=el-action-content><div class=el-action-label></div></div>"},{}],24:[function(a,b){var c=window.Ecma5Extend,d=window.elsa,e=window.elsa.compiler.plugins;b.exports=c.createType({name:"list-adapter",extend:void 0,"public":{get:function(a){return this.plugin.get(this["public"],this.collection,a)},indexOf:function(a){return this.plugin.indexOf(this["public"],this.collection,a)},length:{writable:!1,get:function(){return this.plugin.length(this["public"],this.collection)}}},"private":{collection:void 0,type:void 0,getScheme:function(a){var b;return Array.isArray(a)||d.collection.prototype.isPrototypeOf(a)?b="elsa":window.Backbone&&window.Backbone.Collection.prototype.isPrototypeOf(a)&&(b="backbone"),b},getPlugin:function(a){if(a){var b=e.get(a);if(b.collection)return Object.create(b.collection)}}},init:function(a){if(this.collection=a,a){var b=this.getScheme(a);this.plugin=this.getPlugin(b),this.plugin?this.plugin.bind(this["public"],this.collection):console.error("Unable to load collection plugin for "+b)}},destroy:function(){this.plugin&&(this.plugin.unbind(this["public"],this.collection),this.plugin=void 0),this.collection=void 0}})},{}],25:[function(a,b){var c=window.Ecma5Extend,d=a("../../common/easing.js");b.exports=c.createType({name:"Animator","extends":Object,"public":{onAnimated:null,complete:{writable:!1,value:!0},tick:function(a){if(this.complete)return this.destination;a=window.performance.polyfilled?Date.now():a;var b=Math.min(a-this.startTime,this.duration),c=this.easingMethod(b,this.startValue,this.destination,this.duration);return this.complete=b>=this.duration,this["protected"].calculatedCallback(c),c},configure:function(a,b,c){this["protected"].duration=c,c&&(this["protected"].startValue=a,this["protected"].destination=b,this["protected"].startTime=window.performance.polyfilled?Date.now():window.performance.now());var d=!!c;return this.complete=!d,d},setEasing:function(a){this.easingMethod=a},cancel:function(){this.complete=!0}},"protected":{duration:0,startTime:0,startValue:0,destination:0,calculatedCallback:function(a){this["protected"].dispatchAnimatedCallback(a)},dispatchAnimatedCallback:function(a){this["public"].onAnimated&&this["public"].onAnimated(a)}},"private":{easingMethod:d.easeOutCubic},init:function(){this.boundTick=this["public"].tick.bind(this["public"])},destroy:function(){window.cancelAnimationFrame(this.configureAnimationId),window.cancelAnimationFrame(this.tickAnimationId),this.boundTick=void 0}})},{"../../common/easing.js":13}],26:[function(a,b){b.exports=function(a,b,c){return{animationDuration:function(c){var d=Math.log(b/c)/Math.log(a);return d>0?Math.round(d):0},animationLength:function(b,d){var e=a*c,f=(1-Math.pow(e,d+1))/(1-e);return b*f}}}},{}],27:[function(a,b){var c=a("../../../shared/utils.js"),d=function(){this.getX=c.getInteractionPositionMethod("x"),this.getY=c.getInteractionPositionMethod("y"),this.delta=0};d.prototype.track=function(a){var b=this.getX(a),c=this.getY(a);void 0!==this.lastX&&(this.delta+=Math.abs(b-this.lastX)+Math.abs(c-this.lastY)),this.lastX=b,this.lastY=c},b.exports=d},{"../../../shared/utils.js":118}],28:[function(a,b){var c=window.Ecma5Extend;b.exports=c.createType({name:"MovingAverage","extends":Object,"public":{size:16,average:{writable:!1,value:0},push:function(a){for(this.movingAverage+=a,this.values.push(a);this.size>0&&this.values.length>this.size;)this.movingAverage-=this.values.splice(0,1)[0];return this.movingAverage/this.values.length},reset:function(){this.values.length=0,this.movingAverage=0}},"private":{values:null,movingAverage:0},init:function(){this.values=[],this.movingAverage=0},destroy:function(){this.values=void 0}})},{}],29:[function(a,b){var c=window.Ecma5Extend,d=a("./animator.js"),e=a("../../common/easing.js"),f=a("./animutil.js"),g={START:"start",END:"end"},h=function(a,b,c){return Math.min(Math.max(c,a),b)};b.exports=c.createType({name:"OverscrollAnimator",extend:d,"public":{maxOverscroll:75,configure:function(a,b){a=h(-this.maxMomentum,this.maxMomentum,a);var c=this.util.animationDuration(Math.abs(a)),d=this.util.animationLength(a,c);this["public"].setEasing(e.easeOutCubic);var f=this["super"]["public"]("configure",b,d,c);return this.phase=f?g.START:g.END,f},configureResetScroll:function(a,b){var c=3.5*Math.abs(a-b),d=a-b,e=this["super"]["public"]("configure",b,d,c);return this.phase=e?g.END:g.START,e},dragOverscroll:function(a){var b=h(-1,1,a/this.maxOverscroll);return this.maxOverscroll*Math.sin(.5*b*Math.PI)}},"protected":{minSpeed:.2,friction:.975,sizeMultiplier:.76,maxMomentum:50,calculatedCallback:function(a){if(this["public"].complete&&this.phase===g.START){var b=a,c=this["protected"].startValue-a,d=1.3*this["protected"].duration;this["public"].setEasing(e.easeInOutCubic),this.phase=g.END,this["super"]["public"]("configure",b,c,d)}this["protected"].dispatchAnimatedCallback(a)}},"private":{phase:void 0},init:function(){this.util=f(this.friction,this.minSpeed,this.sizeMultiplier)},destroy:function(){this.util=void 0}})},{"../../common/easing.js":13,"./animator.js":25,"./animutil.js":26}],30:[function(a,b){var c=window.Ecma5Extend,d=a("./animator.js"),e=(a("../../common/easing.js"),a("./animutil.js"));b.exports=c.createType({name:"ScrollAnimator",extend:d,"public":{configure:function(a,b){var c=this.util.animationDuration(Math.abs(a)),d=this.util.animationLength(a,c);return this["super"]["public"]("configure",b,d,c)}},"protected":{minSpeed:.2,friction:.995,sizeMultiplier:.96},init:function(){this.util=e(this.friction,this.minSpeed,this.sizeMultiplier)},destroy:function(){this.util=void 0}})},{"../../common/easing.js":13,"./animator.js":25,"./animutil.js":26}],31:[function(a,b){{var c=window.Ecma5Extend,d=a("./animator.js");a("../../common/easing.js")}b.exports=c.createType({name:"ScrollToAnimator",extend:d,"public":{onComplete:null,updateDestination:function(a){this["protected"].destination=a}},"protected":{calculatedCallback:function(a){this["protected"].dispatchAnimatedCallback(a),this["public"].complete&&this["public"].onComplete&&this["public"].onComplete()}}})},{"../../common/easing.js":13,"./animator.js":25}],32:[function(a,b){var c=a("ecma5-extend"),d=a("../../../shared/events.js"),e={vertical:{Up:-1,Down:1},horizontal:{Left:-1,Right:1}};b.exports=c.createType({name:"list-keyboard-interactions",select:d.createEventType("select",{bubbles:!0}),"public":{mode:null,orientation:null,modelProxy:null,ctrlMode:!1,shiftMode:!1,enabled:{set:function(a){a?this.addKeyboardEventListeners():this.removeKeyboardEventListeners()}},updateState:function(a){this.processState(a)}},"private":{addKeyboardEventListeners:function(){document.addEventListener("keydown",this.boundKeyPressed),document.addEventListener("keyup",this.boundProcessState)},removeKeyboardEventListeners:function(){document.removeEventListener("keydown",this.boundKeyPressed),document.removeEventListener("keyup",this.boundProcessState)},getKeyDirection:function(a){return e[this["public"].orientation][a]||0},isIndexInvalid:function(a){return 0>a||a>=this.list.collection.length},processState:function(a){return this.ctrlMode=a.metaKey||a.ctrlKey,this.shiftMode=a.shiftKey,!0},processSelection:function(b){if("BODY"!==document.activeElement.tagName)return!1;var c,d,e=a("../index.js");if(this.list.selectedIndices.length){if(this.mode===e.UserSelectable.SINGLE||this.userSelectable===e.UserSelectable.MULTI||this.userSelectable===e.UserSelectable.MULTI_KEYBOARD){var f=this.list.selectedIndices.concat();if(c=f[f.length-1]+b,this.isIndexInvalid(c))return!1;if(d=this.modelProxy(c,b),null===d)return!1;if(this.userSelectable===e.UserSelectable.MULTI_KEYBOARD&&this.shiftMode)if(-1!==f.indexOf(d.index)){var g=f.length-1;f.splice(g,1),this.updateSelectedIndices(f)}else this.updateSelectedIndices(f.concat([d.index]));else this.updateSelectedIndices([d.index]);this.list.isIndexVisible(d.index)||this.list.scrollTo(d.index)}}else{var h=this.getFirstVisibleElement();if(!h)return;if(c=parseInt(h.getAttribute("data-index"))+b,this.isIndexInvalid(c))return;if(d=this.modelProxy(c,b),null===d)return!1;this.list.scrollTo(d.index)}return!0},updateSelectedIndices:function(a){this.list.selectedIndices=a;var c=b.exports.select({indices:a.concat()});this.list.dispatchEvent(c)},onKeyPressed:function(a){this.processState(a);var b=this.getKeyDirection(a.keyIdentifier);if(b)return this.processSelection(b)?(a.preventDefault(),!1):void 0}},init:function(a,b){this.list=a,this.getFirstVisibleElement=b,this.boundKeyPressed=this.onKeyPressed.bind(this),this.boundProcessState=this.processState.bind(this)},destroy:function(){this.removeKeyboardEventListeners(),this.boundKeyPressed=void 0,this.boundProcessState=void 0,this.getFirstVisibleElement=void 0,this.list=void 0}})},{"../../../shared/events.js":115,"../index.js":37,"ecma5-extend":1}],33:[function(a,b){var c=a("ecma5-extend");b.exports=c.createType({name:"list-touch-interactions","public":{mode:null,modelProxy:null,updateSelection:function(a,b,c){var d=this.deselectItems(a,b);if(this.mode===this.UserSelectable.MULTI_KEYBOARD&&this.keyboardInteractions.shiftMode&&a.length){for(var e=a[a.length-1],f=Math.min(e,b),g=Math.max(e,b),h=a.concat(),i=f;g>=i;i++){var j=this.modelProxy(i);if(j&&-1===d.indexOf(j.index)&&-1===a.indexOf(j.index)){var k=this.list.querySelector('li[data-index="'+i+'"]');k&&k.classList.add("el-listitem-selected"),h.push(i)}}a=h}else this.mode===this.UserSelectable.SINGLE&&-1===d.indexOf(b)||this.mode===this.UserSelectable.MULTI_KEYBOARD&&!this.keyboardInteractions.ctrlMode?(c.classList.add("el-listitem-selected"),a=[b]):-1===d.indexOf(b)&&(c.classList.add("el-listitem-selected"),a.push(b));return this.lastShiftMode=this.keyboardInteractions.shiftMode,a}},"private":{getIndicesToDeselect:function(b,c){if(!b.length)return[];var d=(a("../index.js"),this.mode===this.UserSelectable.SINGLE),e=this.mode===this.UserSelectable.MULTI_KEYBOARD,f=this.mode===this.UserSelectable.MULTI,g=b.indexOf(c);if(d&&b.length)return b.splice(0,b.length);if(e&&this.keyboardInteractions.shiftMode&&(!this.lastShiftMode||-1!==g)&&b.length){var h=b[this.lastShiftMode?0:b.length-1],i=Math.min(h,c),j=Math.max(h,c);return this.deselectIndicesRange(i,j,b)}if(e&&this.keyboardInteractions.shiftMode&&b.length){var k=b[0],l=b[b.length-1],m=l-k>0,n=m&&k>c||!m&&c>l;if(n)return this.deselectIndicesRange(m?k:c,m?c:k,b)}else{if((f||e&&this.keyboardInteractions.ctrlMode)&&-1!==g)return[b.splice(g,1)[0]];if(e&&!this.keyboardInteractions.shiftMode&&!this.keyboardInteractions.ctrlMode)return b.splice(0,b.length)}return[]},deselectIndicesRange:function(a,b,c){if(a>b){var d=a;a=b,b=d}for(var e=[],f=0;f<c.length;f++)(c[f]<a||c[f]>b)&&e.push(c[f]);for(var g=0;g<e.length;g++)c.splice(c.indexOf(e[g]),1);return e},deselectItems:function(a,b){var c=this.getIndicesToDeselect(a,b);if(c)for(var d=c.length,e=0;d>e;e++){var f=this.list.querySelector('li[data-index="'+c[e]+'"]');f&&f.classList.remove("el-listitem-selected")}return c}},init:function(b,c){this.list=b,this.UserSelectable=a("../index.js").UserSelectable.value,this.keyboardInteractions=c},destroy:function(){this.list=void 0,this.UserSelectable=void 0,this.keyboardInteractions=void 0}})},{"../index.js":37,"ecma5-extend":1}],34:[function(a,b){var c=window.Ecma5Extend,d=a("../../../shared/utils.js"),e={UNDEFINED:"undefinedRail",ON_RAIL:"onRail",OFF_RAIL:"offRail"};b.exports=c.createType({name:"RailDetector",ScrollRailAngle:30,DerailingAngle:45,States:{writable:!1,value:e},"public":{horizontalRailState:{writable:!1,value:e.UNDEFINED},verticalRailState:{writable:!1,value:e.UNDEFINED},start:function(a){this.lastX=this.xVal(a),this.lastY=this.yVal(a)},track:function(a){if(this.horizontalRailState!==e.OFF_RAIL||this.verticalRailState!==e.OFF_RAIL){var c=this.xVal(a),d=this.yVal(a),f=c-this.lastX,g=d-this.lastY,h=Math.abs(f),i=Math.abs(g);this.lastX=c,this.lastY=d;var j=b.exports.ScrollRailAngle,k=j*(Math.PI/180),l=Math.PI/2-k,m=Math.max(b.exports.DerailingAngle,j),n=m*(Math.PI/180),o=Math.PI/2-n,p=Math.atan(i/h),q=k>=p,r=p>=l,s=n>=p,t=p>=o;this.horizontalRailState===e.UNDEFINED&&h>=this.threshold&&(this.horizontalRailState=q?e.ON_RAIL:e.OFF_RAIL,this.verticalRailState=q?e.OFF_RAIL:this.verticalRailState),this.verticalRailState===e.UNDEFINED&&i>=this.threshold&&(this.verticalRailState=r?e.ON_RAIL:e.OFF_RAIL,this.horizontalRailState=r?e.OFF_RAIL:this.horizontalRailState),this.horizontalRailState===e.ON_RAIL&&s&&(g=0),this.verticalRailState===e.ON_RAIL&&t&&(f=0),a.deltaX=f,a.deltaY=g}},end:function(){this.horizontalRailState=e.UNDEFINED,this.verticalRailState=e.UNDEFINED}},"private":{horizontalRailState:void 0,verticalRailState:void 0,threshold:10},init:function(){this.xVal=d.getInteractionPositionMethod("x"),this.yVal=d.getInteractionPositionMethod("y"),this["public"].end()},destroy:function(){this.xVal=void 0,this.yVal=void 0}})},{"../../../shared/utils.js":118}],35:[function(a,b){var c=window.Ecma5Extend,d=a("../animation/movingAverage.js"),e=a("../../../shared/utils.js"),f={IDLE:"idle",DETECTING:"detecting",SCROLLING:"scrolling",CANCELLED:"cancelled"},g={START:"start",MOVE:"move",END:"end"},h=19,i=function(a){var b=1;return a.deltaMode===window.WheelEvent.DOM_DELTA_LINE&&(b=h),-b*a.deltaY};b.exports=c.createType({name:"ScrollGestureDetector",States:{writable:!1,value:f},"public":{threshold:20,orientation:{set:function(a){this.getScrollInteractionPosition=e.getInteractionPositionMethod("vertical"===a?"y":"x"),this.getDelta=e.getEventDelta("vertical"===a?"y":"x")}},scrollDelta:{writable:!1,value:0},scrollMomentum:{writable:!1,value:0},timeSinceLastMove:{writable:!1,value:0},state:{writable:!1,value:f.IDLE},start:function(a){this.state=f.DETECTING,this.movingAverage.reset(),this.lastScrollDelta=this.scrollTriggerTally=this.scrollMomentum=this.scrollMovingAverage=0,this.lastEventPos=this.getScrollInteractionPosition(a)},track:function(a,b){if(this.state!==f.CANCELLED){var c;if(b)c=i(a),this.scrollDelta=c;else{var d=this.getScrollInteractionPosition(a);c=a.hasOwnProperty("deltaX")?this.getDelta(a):d-this.lastEventPos,this.scrollDelta=this.lastScrollDelta+c,this.lastEventPos=d}this.lastScrollTimestamp=a.timeStamp,this.scrollTriggerTally+=Math.abs(c),this.scrollMomentum=this.calculateScrollMomentum(this.lastScrollDelta-this.scrollDelta),this.lastScrollDelta=this.scrollDelta,0!==c&&this.dispatchTrackedEvent(b)}},trackScrollWheel:function(a){a.preventDefault(),this.state!==f.SCROLLING&&(this["public"].start(a),this.state=f.SCROLLING,this["protected"].publish(g.START)),this["public"].track(a,!0)},end:function(a){this.timeSinceLastMove=a.timeStamp-this.lastScrollTimestamp,this.state!==f.CANCELLED&&this["protected"].publish(g.END),this.state=f.IDLE},cancel:function(){this.state=f.CANCELLED}},"private":{getScrollInteractionPosition:function(){},getDelta:function(){},calculateScrollMomentum:function(a){return this.movingAverage.push(a)},dispatchTrackedEvent:function(a){this.state===f.DETECTING&&this.scrollTriggerTally>this.threshold?(this.state=f.SCROLLING,this.scrollDelta=this.lastScrollDelta=0,this["protected"].publish(g.START,a)):this.state===f.SCROLLING&&this["protected"].publish(g.MOVE,a)}},init:function(){this.state=f.IDLE,this.movingAverage=d.create()},destroy:function(){this.movingAverage.destroy(),this.scrollMovingAverageSpeeds=void 0,this.movingAverage=void 0}})},{"../../../shared/utils.js":118,"../animation/movingAverage.js":28}],36:[function(a,b){var c=window.Ecma5Extend,d=a("../../../shared/utils.js"),e={IDLE:"idle",DETECTING:"detecting",SWIPING:"swiping",CANCELLED:"cancelled"},f={LEFT:-1,RIGHT:1},g={START:"start",MOVE:"move",END:"end"};b.exports=c.createType({name:"SwipeGestureDetector",States:{writable:!1,value:e},"public":{threshold:40,state:e.IDLE,orientation:{set:function(a){this.getSwipeInteractionPosition=d.getInteractionPositionMethod("vertical"===a?"x":"y"),this.getDelta=d.getEventDelta("vertical"===a?"x":"y")}},start:function(a){this.state=e.DETECTING,this.lastSwipeDelta=this.swipeTriggerTally=0,this.lastEventPos=this.getSwipeInteractionPosition(a)},track:function(a){if(this.state!==e.IDLE){var b=this.getSwipeInteractionPosition(a),c=a.hasOwnProperty("deltaX")?this.getDelta(a):b-this.lastEventPos,d=this.lastSwipeDelta+c;b!==this.lastEventPos&&(this.lastEventPos=b,this.direction=0>d?f.LEFT:f.RIGHT,this.swipeTriggerTally+=c,this.state===e.DETECTING&&Math.abs(this.swipeTriggerTally)>this["public"].threshold?(this.state=e.SWIPING,this.swipeStart=b,this["protected"].publish(g.START,this.eventDetails(a,this.direction))):this.state===e.SWIPING&&this["protected"].publish(g.MOVE,this.eventDetails(a,this.direction)),this.lastSwipeDelta=d)}},end:function(a){this.state===e.SWIPING&&this["protected"].publish(g.END,this.eventDetails(a,this.direction)),this.state=e.IDLE},cancel:function(){this.state=e.CANCELLED}},"private":{eventDetails:function(a,b){return{originalEvent:a,direction:b}},getSwipeInteractionPosition:function(){},getDelta:function(){},getDeltaX:function(a){return a.deltaX
},getDeltaY:function(a){return a.deltaY}},init:function(a){this["public"].orientation="vertical","number"==typeof a&&(this["public"].threshold=a)},destroy:function(){}})},{"../../../shared/utils.js":118}],37:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.compiler,e=window.elsa.utils.styles,f=a("./template.html"),g=a("./standardListItem.html"),h=a("./adapter.js"),i=a("./controller/keyboardInteractions.js"),j=a("./controller/touchInteraction.js"),k=a("./gestures/swipeGestureDetector.js"),l=a("./gestures/scrollGestureDetector.js"),m=a("./gestures/railDetector.js"),n=a("../../shared/interactionMode.js"),o=(a("../common/easing.js"),a("../../shared/events.js")),p=a("./swipe/swipeDelegate.js"),q=a("./animation/scrollAnimator.js"),r=a("./animation/scrollToAnimator.js"),s=a("./animation/overscrollAnimator.js"),t=a("./animation/cumulativeDelta.js"),u=a("./templates/templater.js"),v=a("../common/pool.js"),w=c.createType(a("./scrollbar/scrollbar.js")),x=navigator.userAgent.match(/Android/i),y=Array.prototype.slice,z=function(a,b){var c=y.call(arguments,2);return function(){return a.apply(b,c.concat(y.call(arguments)))}},A="data-itemsize",B="data-triggerable",C=[A,B],D={NONE:"none",SINGLE:"single",MULTI:"multi",MULTI_KEYBOARD:"multi-keyboard"},E={RENDER:"render",SELECT:"select",SWIPE_START:"swipestart",SWIPE_MOVE:"swipemove",SWIPE_END:"swipeend"};b.exports={name:"list",extend:window.HTMLElement,select:o.createEventType(E.SELECT,{bubbles:!0}),render:o.createEventType(E.RENDER,{bubbles:!1}),Events:{writable:!1,value:E},UserSelectable:{writable:!1,value:D},attributes:["selectedIndex","selectedIndices","userSelectable","dispatchSwipeEvents","orientation"],"public":{itemTemplate:{get:function(){return this.itemTemplate||[]},set:function(a){a=Array.isArray(a)?a:[a],this.nodeList=[],this.extrasAddedToPool=!1,this.emptyPool(),this.listItemTemplates=this.createTemplateLookup(a),this.itemTemplate=a,this.invalidate()}},collection:{set:function(a){this.collection=a,this.collectionAdapter=h.create(a),this.onChangeHandler=this.modelChanged.bind(this),this.boundAddedHandler=this.modelAdded.bind(this),this.boundRemovedHandler=this.modelRemoved.bind(this),this.collectionAdapter.subscribe("change",this.onChangeHandler),this.collectionAdapter.subscribe("add",this.boundAddedHandler),this.collectionAdapter.subscribe("remove",this.boundRemovedHandler),this.scrollbar.collectionSize=this.collectionAdapter.length,this.invalidate()}},orientation:{set:function(a){this.orientation!==a&&(this.orientation=a,this.configureOrientation(this.orientation),this.invalidate())}},selectedIndex:{get:function(){return this.selectedIndices.length?this.selectedIndices[this.selectedIndices.length-1]:-1},set:function(a){if("number"!=typeof a)throw new Error("selectedIndex must be an integer");this["public"].selectedIndices=[a]}},selectedIndices:{set:function(a){a=Array.isArray(a)?a:[],this.toggleSelectedIndices(this.selectedIndices,!1),this.selectedIndices=a,this.toggleSelectedIndices(a,!0)}},userSelectable:{value:D.NONE,set:function(a){this.keyboardInteractions.mode=this.touchInteractions.mode=a,this.userSelectable=a}},dispatchSwipeEvents:!1,modelTransform:{set:function(a){this.modelTransform=a,this.scrollbar.style.visibility="visible";var b=this;this.wrappedDataModelProxy=this.modelTransform?function(c,d){for(var e,f=b.collection.length,g=c;!e&&f>g&&g>=0;){e=b.collectionAdapter.get(g);var h=JSON.parse(JSON.stringify(e));if(e=a(h,g),!e&&0===d)break;e||(b.scrollbar.style.visibility="hidden",g+=d)}return e?(b.transformedPointer.index=g,b.transformedPointer.model=e,b.transformedPointer):null}:this.defaultModelProxy,this.keyboardInteractions.modelProxy=this.touchInteractions.modelProxy=this.wrappedDataModelProxy.bind(this),this.invalidate()}},recycleNodes:{set:function(a){this.recycleNodes!==a&&(this.recycleNodes=a,this["public"].setAttribute("data-recycle-nodes",a.toString()),this.configureRecyclable(a),this.configureOrientation(this.orientation),this.invalidate())}},templateType:{set:function(a){var b=a||Object.getPrototypeOf(this["public"]).constructor.templateType;b!==this.templateType&&(this.templateType=b,this["public"].itemTemplate=this["public"].itemTemplate)},get:function(){return this.templateType||Object.getPrototypeOf(this["public"]).constructor.templateType||"legacy"}},isIndexVisible:function(a){if(!this.hasNodes())return!1;var b=this.contentEl.querySelector('li[data-index="'+a+'"]');return b?this.intersectsRect(this["public"].getBoundingClientRect(),b.getBoundingClientRect()):!1},scrollTo:function(a,b,c){a="object"==typeof a?this.collectionAdapter.indexOf(a):Math.max(0,Math.min(a,this.collectionAdapter.length-1));var d=this.contentEl.querySelector('li[data-index="'+a+'"]');this.recycleNodes?this.scrollToRecyclableSync(d,a,c):this.scrollToNonRecylable(d,a,b,c)},scrollToIfNeeded:function(a,b,c){a="object"==typeof a?this.collectionAdapter.indexOf(a):Math.max(0,Math.min(a,this.collectionAdapter.length-1));var d=this.contentEl.querySelector('li[data-index="'+a+'"]');this.recycleNodes?d&&d.transformVal>=this.scrollVal&&d.transformVal+this.getElementSize(d)<=this.scrollVal+this.listSize?c&&c(a):this.scrollToRecyclableSync(d,a,c):b?this.scrollToNonRecylable(d,a,b,c):(d.scrollIntoViewIfNeeded(),c&&c(a))},cancelSwipe:function(){this.swipeDelegate&&this.swipeDelegate.clear()},isScrollPositionAtTop:function(){if(this.recycleNodes){var a=this.getFirstNode();if(this.getNodeIndex(a)===this.collectionFirstIndex){var b=a.transformVal;return this.scrollVal<=b}return!1}return this["public"].scrollTop<=0},overscrollEnabled:{set:function(a){this.overscrollEnabled=a},get:function(){return this.overscrollEnabled}}},"private":{orientation:null,listItemPool:null,templateSizeLookup:null,nodeList:null,scrollStyle:null,touchHighlightDelay:150,numOverrunElements:1,numExtraPooledElements:2,dragStartThreshold:10,selectedIndices:null,touchedNodes:null,overscrollEnabled:!0,selectedClassName:"el-listitem-selected",recycleClass:"el-list-recycle",transformedPointer:{model:null,index:null},listSize:{get:function(){return this._listSize},set:function(a){this._listSize=a,this.scrollbar.scrollableArea=a}},invalidate:function(){this.dirty||!this.addedToDOM||this.ignoreInvalidation||(this.dirty=!0,this.invalidateTimeoutId=window.requestAnimationFrame(this.boundRepopulate))},unitTestInvalidate:function(){this.dirty||this.ignoreInvalidation||(this.dirty=!0,this.boundRepopulate())},repopulate:function(){this.dirty=!1,this.collection&&(Object.getPrototypeOf(this["public"]).constructor.debug&&console.log("list.repopulate"),this.dirtyLookup={},this.scrollDetector.scrollMomentum=0,this.scrollVal=this.lastScrollVal=0,window.cancelAnimationFrame(this.momentumScrollAnimationId),this.swipeDelegate.resetAll(),this.configureDefaultTemplate(),this.poolAll(),this.listSize=this.getElementSize(this["public"]),this.addNodes(),this["public"].dispatchEvent(b.exports.render()),this.hasNodes()&&this.applyScroll(this.scrollVal))},rebuildList:function(a){this.poolAll(),this.addNodes(a)},addNodes:function(a){a=a||0,this.scrollbar.reset();for(var b,c=this.recycleNodes?a-1:-1,d=0,e=0,f=[],g=!1;0!==(d=this.layoutTopToBottom(this.getLastNode(),!1,f,c))&&(c=this.getNodeIndex(this.getLastNode()),0!==a||g||(this.collectionFirstIndex=c,g=!0),this.recycleNodes&&(b=this.lastElementBottom())>this.listSize&&e++,!(e===this.numOverrunElements+1||c>=this.collectionAdapter.length)););if(this.recycleNodes&&0!==a&&0===e)for(f.push=f.unshift,c=a;0!==(d=this.layoutBottomToTop(this.getFirstNode(),!1,f,c))&&(c=this.getNodeIndex(this.getFirstNode()),b+=this.getElementSize(this.getFirstNode()),this.recycleNodes&&b>this.listSize&&e++,e!==this.numOverrunElements););return f.length&&this.applyTransformations(f,null,1),this.recycleNodes&&(this.itemTemplate&&this.itemTemplate.length>1||!this.allTemplateSizesCached)&&this.addPoolBufferNodes(this.contentEl),this.scrollVal=this.lastScrollVal=0,this.translateItem(this.scrollStyle,this.scrollVal),this.nodeList},addPoolBufferNodes:function(a){if(!this.extrasAddedToPool){this.extrasAddedToPool=!0;var b=this,c=function(c){var d=b.processFetchedListItem(null,c);return b.poolNode(d),a.appendChild(d),d},d=function(a){for(var d=[],e=b.listItemPool.getPool(a),f=b.numExtraPooledElements-e.length,g=0;f>g;g++)d.push(c(a));return d};for(var e in this.templateAttributeLookup)for(var f=d(e),g=0;g<f.length;g++){var h=f[g];this.translateItem(h.style,-this.getElementSize(h)-4*this.overscrollAnimator.maxOverscroll)}}},configureDefaultTemplate:function(){this.collection&&this.collection.length&&(this.itemTemplate&&0!==this.itemTemplate.length||(this.listItemTemplates=this.createTemplateLookup([g])))},createItem:function(a,b){var c=this.getListItemDOM(a,b);return this.populateListItemDOM(a,b,c),this.setListItemElementIndex(b,c),c},createTemplateLookup:function(a){var b=[];b.actionLookup={},this.allTemplateSizesCached=!0,this.templateAttributeLookup={},this.templater.clear();var c=function(a){var c=this.templater.instantiate(a),e=c.firstElementChild,f=c.innerHTML,g=this.extractSwipeActions(e),h=this.createUseWhenLookupFunction(e.getAttribute("data-use-when"),f);b.actionLookup[f]=g.map(function(a){return d.compile(a,this["public"])}),this.setTemplateAttributes(e,f),this.addLookupFunction(b,h,f),this.allTemplateSizesCached&&!this.templateAttributeLookup[f][A]&&(this.allTemplateSizesCached=!1);var i=this.templater.parse(c,f);this.cacheListItemDOM(i,f)};return a.forEach(c,this),b.lookupDefault||c.call(this,g),b},setTemplateAttributes:function(a,b){this.templateAttributeLookup[b]={};for(var c=0;c<C.length;c++){var d=C[c];this.templateAttributeLookup[b][d]=a.getAttribute(d)||null}},extractSwipeActions:function(a){var b=Array.prototype.slice.call(a.querySelectorAll("el-action"));return b.forEach(function(a){a.parentElement.removeChild(a)}),b},addLookupFunction:function(a,b,c){b?a.push(b):a.lookupDefault=c},createUseWhenLookupFunction:function(a,b){if(a&&-1!==a.indexOf(":")){var c=a.split(":");return function(a){return c[0]in a&&(a[c[0]].toString()===c[1]||a[c[0]]===parseInt(c[1]))?b:null}}return a&&"*"!==a?function(c){return a in c&&c[a]?b:null}:null},findUseWhenResult:function(a,b){for(var c,d=a.length,e=0;d>e;e++)if(c=a[e](b))return c;return a.lookupDefault},getListItemDOM:function(a,b){var c=this.dirtyLookup[b]||this.findUseWhenResult(this.listItemTemplates,a),d=this.poolFetch(c);return d=this.processFetchedListItem(d,c),this.configureNodeSelectionState(d,b),d},processFetchedListItem:function(a,b){return a||(a=this.templater.fetch(b),a.cachedSize=a.dataTargets=null),a.itemTemplateType=b,a},cacheListItemDOM:function(a,b){var c=this.templateAttributeLookup[b]?this.templateAttributeLookup[b][A]:null;c&&(a.style[this.dimensionProp]=c)},getListItemDOMFromPool:function(a,b,c){var d=this.dirtyLookup[b]||this.findUseWhenResult(this.listItemTemplates,a);c&&this.annotateIfDirtyNode(c);var e;if(c&&c.itemTemplateType===d)e=c;else{c&&this.poolNode(c);var f=this.getListItemDOM(a,b);f.parentNode||this.contentEl.appendChild(f),e=f}return this.configureNodeSelectionState(e,b),this.swipeDelegate.resetDOM(e),e},annotateIfDirtyNode:function(a){var b=a.getAttribute("data-dirty-dom");b&&(this.templater.copyCache(a.itemTemplateType,b),this.templateAttributeLookup[b]=this.templateAttributeLookup[a.itemTemplateType],this.dirtyLookup[this.getNodeIndex(a)]=a.itemTemplateType=b,this.templater.parse(a,b))},lookupTemplateAttribute:function(a,b){return this.templateAttributeLookup[a.itemTemplateType][b]},poolNode:function(a){this.annotateIfDirtyNode(a),this.listItemPool.put(a,a.itemTemplateType),a.style.visibility="hidden"},poolAll:function(){this.nodeList.forEach(this.poolNode,this),this.nodeList.length=0,this.contentEl.children.length&&(this.contentEl.innerHTML="")},poolFetch:function(a){var b=this.listItemPool.get(a);return b?(b.style.visibility="visible",this.cleanNode(b)):void 0},emptyPool:function(){this.listItemPool.forEach(function(a){d.destroy(a),this.cleanNode(a)},this),this.listItemPool.empty(),this.extrasAddedToPool=!1},cleanNode:function(a){return a.dataTargets=null,a.cachedSize=null,a},cleanNodes:function(){this.nodeList.forEach(function(a){d.destroy(a),this.cleanNode(a)},this),this.nodeList.length=0},configureNodeSelectionState:function(a,b){-1!==this.selectedIndices.indexOf(b)?a.classList.add(this.selectedClassName):a.classList.remove(this.selectedClassName)},setListItemElementIndex:function(a,b){b.__listIndex=a,b.setAttribute("data-index",a),-1!==this.selectedIndices.indexOf(a)&&b.classList.add(this.selectedClassName)},populateListItemDOMAndIndex:function(a,b,c){this.populateListItemDOM(a,b,c),this.setListItemElementIndex(b,c)},populateListItemDOM:function(a,b,c){this.templater.bind(c,a,c.itemTemplateType,b),c.cachedSize=null},modelChanged:function(a,b){var c=this.contentEl.querySelector('li[data-index="'+b+'"]');if(c){var d=this.wrappedDataModelProxy(b,0);d?this.populateListItemDOM(d.model,b,c,!0):this.invalidate()}},modelAdded:function(a){if(!this.dirty){this.scrollbar.collectionSize=this.collectionAdapter.length;var b=this.collection.indexOf(a);if(this.recycleNodes)(this.isIndexInNodeList(b)||this.lastElementBottom()<=this.listSize)&&this.invalidate();else{this.configureDefaultTemplate();for(var c,d=b===this.collection.length-1,e=b;e>=0&&!(c=this.contentEl.querySelector('li[data-index="'+e+'"]'));)e--;c||e++,d=d||c===this.contentEl.lastElementChild;var f=this.getNodeDOM(b,1,null),g=d?void 0:c||this.contentEl.firstElementChild,h=g&&e!==b?g.nextElementChild:g;this.nodeList.splice(e,0,f),this.contentEl.insertBefore(f,h),this.updateDataIndices(f,1)}}},modelRemoved:function(a,b){if(!this.dirty)if(this.scrollbar.collectionSize=this.collectionAdapter.length,this.recycleNodes)(this.isIndexInNodeList(b)||this.lastElementBottom()<=this.listSize)&&this.invalidate();else{var c=this.contentEl.querySelector('li[data-index="'+b+'"]');c&&(this.updateDataIndices(c,-1),this.contentEl.removeChild(c))}},updateDataIndices:function(a,b){for(var c=Array.prototype.slice.call(this.contentEl.children),d=c.indexOf(a)+1,e=d;e<c.length;e++){var f=c[e],g=this.getNodeIndex(f),h=g+b;f.__listIndex=h,f.setAttribute("data-index",h)}},onTouchStart:function(a){this.listItemTouchStart(a,this.findListItem(a.target))},listItemTouchStart:function(a,b){if(this.interactionMode.isValid(a)&&(!a.hasOwnProperty("button")||2!==a.button)&&this.hasNodes()&&this.scrollDetector.state!==l.States.DETECTING){var c=new t;c.track(a),this.recycleNodes&&(a.preventDefault(),this.touchStartEvent=a,document.activeElement&&document.activeElement!==document.body&&!this["public"].contains(document.activeElement)&&document.activeElement.blur(),this.isValidRetriggerClickTarget(this.touchStartEvent.target)&&this.touchStartEvent.target.focus());var d=this,e={e:a};this.onListItemTouchMove=function(a){e.e=a},this.onListItemTouchEnd=function(e){if(Object.getPrototypeOf(d["public"]).constructor.debug>1&&console.log("list.events.touchend"),d.recycleNodes&&c.delta<15){a.preventDefault();var f=document.createEvent("MouseEvents");f.initEvent("click",!0,!0),d.isValidRetriggerClickTarget(d.touchStartEvent.target)&&d.touchStartEvent.target.dispatchEvent(f)}window.cancelAnimationFrame(d.touchMoveAnimationId),d.scrolling=!1,d.listItemTouchEnd(e,b)},document.body.addEventListener("touchend",this.onListItemTouchEnd),document.body.addEventListener("touchcancel",this.onListItemTouchEnd),document.body.addEventListener("touchmove",this.onListItemTouchMove),document.body.addEventListener("mouseup",this.onListItemTouchEnd),document.body.addEventListener("mouseleave",this.onListItemTouchEnd),document.body.addEventListener("mousemove",this.onListItemTouchMove),this.overscrollAnimator.cancel(),this.scrollAnimator.cancel(),this.scrollToAnimator&&this.scrollToAnimator.cancel(),window.cancelAnimationFrame(this.momentumScrollAnimationId),b&&(this.setActiveItemTimeout=setTimeout(function(){d.setActiveItem(b)},this.touchHighlightDelay)),this.scrolling=!0,this.railDetector.start(a),this.swipeDetector.start(a),this.scrollDetector.start(a),this.dragStartPos=this.scrollVal,(this.recycleNodes||x)&&b&&b.setCapture&&b.setCapture(),window.cancelAnimationFrame(this.touchMoveAnimationId);var f=function g(){c.track(e.e),d.listItemTouchMove(e.e,b),d.scrolling&&(d.touchMoveAnimationId=window.requestAnimationFrame(g))};this.touchMoveAnimationId=window.requestAnimationFrame(f),Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("list.events.touchstart")}},isValidRetriggerClickTarget:function(a){return"INPUT"===a.tagName&&"checkbox"===a.getAttribute("type")?!1:!0},listItemTouchMove:function(a){a=a||window.event,this.recycleNodes&&a.preventDefault(),this.railDetector.track(a),this.swipeDetector.track(a),this.scrollDetector.track(a)},listItemTouchEnd:function(a,b){this.interactionMode.isValid(a)&&(Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("list touch end",a.type),document.body.removeEventListener("touchend",this.onListItemTouchEnd),document.body.removeEventListener("touchcancel",this.onListItemTouchEnd),document.body.removeEventListener("touchmove",this.onListItemTouchMove),document.body.removeEventListener("mouseup",this.onListItemTouchEnd),document.body.removeEventListener("mouseleave",this.onListItemTouchEnd),document.body.removeEventListener("mousemove",this.onListItemTouchMove),this.onListItemTouchEnd=this.onListItemTouchMove=null,b&&this.scrollDetector.state===l.States.DETECTING&&"touchcancel"!==a.type&&this.listItemTapped(a,b),b&&b.releaseCapture&&(this.recycleNodes||x)&&b.releaseCapture(),this.clearActiveItem(),this.railDetector.end(a),this.swipeDetector.end(a),this.scrollDetector.end(a))},onScrollGestureStart:function(){Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("list.gestures.scrollstart"),this.swipeDetector.cancel(),this.swipeDelegate.clear(),this.activeListItem&&this.clearActiveItem()},onScrollGestureMove:function(a){if(this.recycleNodes){var b=this.dragStartPos-this.scrollDetector.scrollDelta,c=this.constrainScroll(b);b=b!==c&&!a&&this.overscrollEnabled?this.overscrollAmt:c,this.setScrollVal(b),this.applyScroll(this.scrollVal,!0)}},onScrollGestureEnd:function(){if(Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("list.gestures.scrollend"),this.clearActiveItem(),this.recycleNodes){var a,b=this.constrainScroll(this.scrollVal);b!==this.scrollVal&&this.overscrollEnabled?(a=this.overscrollAnimator.configureResetScroll(b,this.scrollVal),a&&this.runScrollAnimator(this.overscrollAnimator)):0!==this.scrollDetector.scrollMomentum&&this.scrollDetector.state!==l.States.CANCELLED&&(this.scrollDetector.scrollMomentum/=.1*this.scrollDetector.timeSinceLastMove,a=this.scrollAnimator.configure(this.scrollDetector.scrollMomentum,this.scrollVal),a&&this.runScrollAnimator(this.scrollAnimator))}},animatedScroll:function(a,b,c,d){this.scrollToAnimator||(this.scrollToAnimator=r.create(),this.scrollToAnimator.onAnimated=this.boundMomentumScroll),this.scrollToAnimator.configure(a,b,c),this.scrollToAnimator.onComplete=d,this.runScrollAnimator(this.scrollToAnimator)},momentumScroll:function(a){var b=a,c=this.overscrollAnimator.complete;c&&(b=this.constrainScroll(a));var d=a!==b;d&&c&&this.overscrollEnabled&&(this.overscrollAnimator.configure(this.scrollVal-this.lastScrollVal,this.constrainScroll(a)),this.scrollAnimator.complete=!0),this.setScrollVal(b),this.applyScroll(this.scrollVal,!0);this.runScrollAnimator(this.overscrollAnimator)||this.runScrollAnimator(this.scrollAnimator)||this.runScrollAnimator(this.scrollToAnimator)},runScrollAnimator:function(a){var b=a&&!a.complete;return b&&(this.momentumScrollAnimationId=window.requestAnimationFrame(function(b){a&&!a.complete&&a.tick&&a.tick(b)})),b},lastElementBottom:function(){if(this.hasNodes()){var a=this.getLastNode();return a.transformVal+this.getElementSize(a)}return 0},configureOrientation:function(a){this["public"].classList.remove("el-list-"+("vertical"===a?"horizontal":"vertical")),this["public"].classList.add("el-list-"+a),this["public"].setAttribute("data-orientation",a),this.swipeDelegate.orientation=this.swipeDetector.orientation=this.scrollDetector.orientation=this.scrollbar.orientation=this.keyboardInteractions.orientation=a,"vertical"===a?(this.dimensionProp="height",this.invertedDimensionProp="width",this.sizeProp="clientHeight",this.translateProp="Y",this.translateItem=this.recycleNodes?this.translateItemY:this.translateNone):(this.dimensionProp="width",this.invertedDimensionProp="height",this.sizeProp="clientWidth",this.translateProp="X",this.translateItem=this.recycleNodes?this.translateItemX:this.translateNone)},configureRecyclable:function(a){a?(this["public"].addEventListener("wheel",this.boundMouseWheelHandler,!1),this["public"].classList.add(this.recycleClass)):(this["public"].removeEventListener("wheel",this.boundMouseWheelHandler,!1),this["public"].classList.remove(this.recycleClass))},findListItem:function(a){for(;a&&a!==this["public"];){if(a.hasAttribute("data-index"))return a;a=a.parentElement}return null},listItemTapped:function(a,b){if("false"!==this.lookupTemplateAttribute(b,B)){var c=this.swipeDelegate.isActiveItem(b);if(this.swipeDelegate.hasActiveItem()){if(c&&this.swipeDetector.state===k.States.DETECTING||!c)return void this.swipeDelegate.clear();if(c&&this.swipeDetector.state===k.States.SWIPING)return}var d=this.getNodeIndex(b);this.userSelectable!==D.NONE&&(this.keyboardInteractions.updateState(a),this.updateSelection(d,b));var e=o.trigger({index:d});b.firstElementChild.dispatchEvent(e)}},updateSelection:function(a,c){this.selectedIndices=this.touchInteractions.updateSelection(this.selectedIndices,a,c);var d=b.exports.select({indices:this.selectedIndices.concat()});this["public"].dispatchEvent(d)},constrainScroll:function(a){if(!this.hasNodes())return 0;if(!this.recycleNodes)return a;var b=this.getFirstNode(),c=this.getLastNode();if(this.getNodeIndex(c)===this.collectionLastIndex){var d=this.lastElementBottom(),e=d<this.listSize,f=e?0:d-this.listSize;if(a>f||e)return this.overscrollAmt=f+this.overscrollAnimator.dragOverscroll(a-f),f}if(this.getNodeIndex(b)===this.collectionFirstIndex){var g=b.transformVal;if(g>a)return this.overscrollAmt=g-this.overscrollAnimator.dragOverscroll(-(a-g)),g}return this.overscrolled=!1,a},applyScroll:function(a,b){if(!this.recycleNodes)return void(this["public"].scrollTop=a);for(var c=0,d=0;0!==(c=this.relayout(a,c,this.touchedNodes));)0!==c&&(d=c);0!==d&&this.applyTransformations(this.touchedNodes,this.touchedNodes.startElement,d),this.touchedNodes.length=0,this.touchedNodes.startElement=null,this.translateItem(this.scrollStyle,-a),this.scrollbar.scroll(a,b)},setScrollVal:function(a){this.lastScrollVal=this.scrollVal,this.scrollVal=a},scrollbarScroll:function(a){this.applyScroll(a)},relayout:function(a,b,c){var d=0;if(!this.hasNodes())return d;var e,f=this.getFirstNode(),g=this.getLastNode(),h=Math.round(this.lastElementBottom()-a);if(h<=this.listSize&&(0===b||1===b)){var i=this.getElementSize(f);c.startElement=c.startElement||g,e=f.transformVal+i<a,d=this.layoutTopToBottom(g,e,c)}else a<f.transformVal&&(0===b||-1===b)&&(c.startElement=c.startElement||f,d=this.layoutBottomToTop(f,!0,c));return d},layoutTopToBottom:function(a,b,c,d){var e=void 0!==d?d:this.getNodeIndex(a);if(!(e<this.collection.length-1))return this.collectionLastIndex=e,0;var f=this.wrappedDataModelProxy(e+1,1);if(null===f)return this.collectionLastIndex=e,0;var g=null;return b&&(g=this.nodeList.shift()),g=this.getListItemDOMFromPool(f.model,f.index,g),this.populateListItemDOMAndIndex(f.model,f.index,g),g.transformVal=a?a.transformVal+this.getElementSize(a):0,c.push(g),this.nodeList.push(g),1},layoutBottomToTop:function(a,b,c,d){var e=void 0!==d?d:this.getNodeIndex(a);if(!(e>0))return this.collectionFirstIndex=e,0;var f=this.wrappedDataModelProxy(e-1,-1);if(null===f)return this.collectionFirstIndex=e,0;var g=null;return b&&(g=this.nodeList.pop()),g=this.getListItemDOMFromPool(f.model,f.index,g),this.populateListItemDOMAndIndex(f.model,f.index,g),g.transformVal=a?a.transformVal-this.getElementSize(g):this.listSize-this.getElementSize(g),c.push(g),this.nodeList.unshift(g),-1},applyTransformations:function(a,b,c){var d,e,f=a.length;for(d=0;f>d;d++){e=a[d];var g=1===c?b?this.getElementSize(b):0:this.getElementSize(e);e.transformVal=b?b.transformVal+c*g:0,this.scrollbar.itemShown(g,this.getNodeIndex(e)),b=e}for(d=0;f>d;d++)e=a[d],this.translateItem(e.style,e.transformVal)},getNodeDOM:function(a,b,c){var d=this.wrappedDataModelProxy(a,b);return null===d?(1===b?this.collectionLastIndex=a-1:this.collectionFirstIndex=a+1,null):(c=this.getListItemDOMFromPool(d.model,d.index,c),this.populateListItemDOMAndIndex(d.model,d.index,c),c)},toggleSelectedIndices:function(a,b){var c=this.nodeList;if(0!==c.length&&0!==a.length){var d=this;a.forEach(function(a){var c=d.contentEl.querySelector('li[data-index="'+a+'"]');if(c){var e=c.classList;b?e.add(d.selectedClassName):e.remove(d.selectedClassName)}})}},translateItem:function(){},translateItemX:function(a,b){a[e.transform]="translate3d("+(0|b)+"px,0,0)"},translateItemY:function(a,b){a[e.transform]="translate3d(0,"+(0|b)+"px,0)"},translateNone:function(a){a[e.transform]&&(a[e.transform]="")},clearActiveItem:function(){clearTimeout(this.setActiveItemTimeout),this.activeListItem&&this.activeListItem.classList.remove("el-listview-active")},setActiveItem:function(a){"false"!==this.lookupTemplateAttribute(a,B)&&(this.activeListItem=a,a.classList.add("el-listview-active"))},getElementSize:function(a){if(!this.recycleNodes&&a===this["public"])return 1/0;var b=this.templateAttributeLookup[a.itemTemplateType]?parseInt(this.lookupTemplateAttribute(a,A))||a.cachedSize:0;if(b)return b;var c=a.style[this.dimensionProp];return c=-1===c.indexOf("px")?null:parseInt(c),a.cachedSize=c||a[this.sizeProp]||parseInt(window.getComputedStyle(a)[this.dimensionProp])},defaultModelProxy:function(a){var b=this.collectionAdapter.get(a);if(b)return this.transformedPointer.index=a,this.transformedPointer.model=b,this.transformedPointer;throw new Error("Expected model at index "+a+" but found null or undefined")},isInDOMTree:function(a){return!!this.findUltimateAncestor(a).body},isIndexInNodeList:function(a){if(!this.hasNodes())return!1;var b=this.getFirstNode(),c=this.getLastNode();return a>=this.getNodeIndex(b)&&a<=this.getNodeIndex(c)},findUltimateAncestor:function(a){for(var b=a;b.parentNode;)b=b.parentNode;return b},executeOnLoad:function(a,b){if(this.isInDOMTree(a))b();else{var c=this;this.domAdditionTimeout=window.requestAnimationFrame(function(){c.executeOnLoad(a,b)})}},prepareSwipeUI:function(a,b){var c=this.listItemTemplates.actionLookup[this.swipeTarget.itemTemplateType];c&&(c=c.filter(this.filterActions.bind(this,-b,this.orientation)),c.length&&this.swipeDelegate.show(c,a,b,this.recycleNodes)),this.clearActiveItem()},filterActions:function(a,b,c){var d,e=c.getAttribute("data-position")||"1";return d="vertical"===b?-1===a?"left":"right":-1===a?"bottom":"top",e===a.toString()||e===d},processSwipeStartEvent:function(a,b){this.swipeTarget=this.findListItem(b.originalEvent.target),this.swipeTarget?(this.index=parseInt(this.swipeTarget.getAttribute("data-index")),this.scrollDetector.cancel(),this.prepareSwipeUI(this.swipeTarget,b.direction),this.swipeDelegate.swipeStart(b.originalEvent),this.processSwipeEvent(a,b)):this.swipeDetector.cancel()},processSwipeMoveEvent:function(a,b){this.swipeDelegate.swipeMove(b.originalEvent),this.processSwipeEvent(a,b)},processSwipeEndEvent:function(a,b){this.swipeDelegate.swipeEnd(b.originalEvent),this.processSwipeEvent(a,b)},processSwipeEvent:function(a,b){this.dispatchSwipeEvents&&(b.target=this.swipeTarget,b.index=this.index,b.swipeDelta=b.originalEvent.swipeDelta||0,delete b.originalEvent.swipeDelta,b.originalEvent.hasOwnProperty("open")&&(b.open=b.originalEvent.open,delete b.originalEvent.open),this.forwardEvent(a,b)||(this.swipeDetector.cancel(),this.swipeDelegate.clear()))},forwardEvent:function(a,b){var c=new CustomEvent(a,{bubbles:!0,cancelable:!0});for(var d in b)c[d]=b[d];return b.target.dispatchEvent(c)},processScrollWheel:function(a){this.overscrollAnimator.cancel(),this.scrollAnimator.cancel();var b=this;a.preventDefault(),this.scrollWheelAnim=window.requestAnimationFrame(function(){b.dragStartPos=b.scrollVal,b.scrollDetector.trackScrollWheel(a)})},processResize:function(){if(this.recycleNodes){clearTimeout(this.resizeDebounceTimeout);var a=this.getElementSize(this["public"]);a&&(a>this.listSize||!this.allTemplateSizesCached?this.resizeDebounceTimeout=setTimeout(this.executeResize.bind(this,a),250):this.listSize=a)}},scrollToRecyclableSync:function(a,b,c){a?(this.setScrollVal(this.constrainScroll(a.transformVal)),this.applyScroll(this.scrollVal)):this.rebuildList(b),this.scrollbar.scrollToIndex(b),c&&c(b)},allTemplateSameSize:function(){if(!this.allTemplateSizesCached)return!1;var a;for(var b in this.templateAttributeLookup){var c=this.templateAttributeLookup[b][A];if(void 0===a)a=c;else if(a!==c)return!1}return parseInt(a)},scrollToNonRecylable:function(a,b,c,d){var e=a.getBoundingClientRect().top;c?this.animatedScroll(this["public"].scrollTop,e,c,z(d,window,b)):(this["public"].scrollTop=e,d&&d(b))},getFirstVisibleElement:function(){for(var a=0;a<this.nodeList.length;a++){var b=this.nodeList[a];if(b.transformVal+this.getElementSize(b)>this.scrollVal)return b}},getNodeIndex:function(a){return a.__listIndex||parseInt(a.getAttribute("data-index"))},getLastNode:function(){return this.nodeList[this.nodeList.length-1]},getFirstNode:function(){return this.nodeList[0]},hasNodes:function(){return this.nodeList.length>0},intersectsRect:function(a,b){return a.left<b.right&&a.right>b.left&&a.top<b.bottom&&a.bottom>b.top},executeResize:function(a){if(this.listSize=a,this.allTemplateSizesCached)this.applyScroll(this.scrollVal);else{var b=this.getFirstVisibleElement();if(!b)return;var c=this.scrollVal-b.transformVal;this.rebuildList(this.getNodeIndex(b)),this.setScrollVal(this.constrainScroll(this.scrollVal+c)),this.applyScroll(this.scrollVal)}},processListAdded:function(){window.addEventListener("resize",this.boundProcessResize),this.addedToDOM=!0,this.invalidate()},processPageFirstVisible:function(){this.parentPage.removeEventListener("visible",this.boundPageFirstVisible),this.parentPage.addEventListener("visible",this.boundProcessResize),this.processListAdded()},addKeyboardEventListeners:function(){this.keyboardInteractions.enabled=!0},removeKeyboardEventListeners:function(){this.keyboardInteractions.enabled=!1},configurePageVisibilityListeners:function(a){for(;a;){if("EL-PAGE"===a.tagName){this.parentPage=a,this.parentPage.addEventListener("visible",this.boundPageFirstVisible),this.parentPage.addEventListener("visible",this.boundAddKeyboardEventListeners),this.parentPage.addEventListener("invisible",this.boundRemoveKeyboardEventListeners);break}a=a.parentControl}a||this.UNIT_TESTING||this.executeOnLoad(this["public"],this.processListAdded.bind(this))},enableUnitTestMode:function(){this.oldInvalidate=this.invalidate,this.invalidate=this.unitTestInvalidate,window.addEventListener("resize",this.boundProcessResize),this.addKeyboardEventListeners()},disableUnitTestMode:function(){this.invalidate=this.oldInvalidate,this.removeKeyboardEventListeners()}},init:function(a){a=a||{};var b=Array.prototype.slice.call(this["public"].querySelectorAll('script[type="text/template"]'));if(0===b.length&&this["public"].children.length>0){var c=a.sourcepath?a.sourcepath+":\n":"";c+='Found children in the list that aren\'t templates. Did you forget to wrap them in a <script type="text/template"> tag?',console.warn(c)}b.forEach(function(a){a.parentNode.removeChild(a)}),this["public"].innerHTML=f,this.contentEl=this["public"].querySelector("ul"),this.wrappedDataModelProxy=this.defaultModelProxy,this.scrollStyle=this.contentEl.style,this.sourcepath=a.sourcepath,this.require=a.require||window.require||function(){},this.keyboardInteractions=i.create(this["public"],this.getFirstVisibleElement.bind(this)),this.touchInteractions=j.create(this["public"],this.keyboardInteractions),this.keyboardInteractions.modelProxy=this.touchInteractions.modelProxy=this.wrappedDataModelProxy.bind(this),this.interactionMode=new n,this.scrollVal=this.lastScrollVal=0,this.listItemPool=v.create(),this.templateAttributeLookup={},this.dirtyLookup={},this.nodeList=[],this.selectedIndices=[],this.touchedNodes=[],this.templater=u.create({sourcepath:this.sourcepath,require:this.require,list:this["public"]}),this.swipeStartHandler=z(this.processSwipeStartEvent,this,E.SWIPE_START),this.swipeMoveHandler=z(this.processSwipeMoveEvent,this,E.SWIPE_MOVE),this.swipeEndHandler=z(this.processSwipeEndEvent,this,E.SWIPE_END),this.railDetector=m.create(),this.swipeDelegate=p.create(this["public"],this.contentEl),this.swipeDetector=k.create(),this.swipeDetector.subscribe("start",this.swipeStartHandler),this.swipeDetector.subscribe("move",this.swipeMoveHandler),this.swipeDetector.subscribe("end",this.swipeEndHandler),this.scrollStartHandler=this.onScrollGestureStart.bind(this),this.scrollMoveHandler=this.onScrollGestureMove.bind(this),this.scrollEndHandler=this.onScrollGestureEnd.bind(this),this.scrollDetector=l.create(),this.scrollDetector.subscribe("start",this.scrollStartHandler),this.scrollDetector.subscribe("move",this.scrollMoveHandler),this.scrollDetector.subscribe("end",this.scrollEndHandler),this.boundMomentumScroll=this.momentumScroll.bind(this),this.boundRepopulate=this.repopulate.bind(this),this.boundMouseWheelHandler=this.processScrollWheel.bind(this),this.boundProcessResize=this.processResize.bind(this),this.boundPageFirstVisible=this.processPageFirstVisible.bind(this),this.boundScrollbarScroll=this.scrollbarScroll.bind(this),this.overscrollAnimator=s.create(),this.overscrollAnimator.onAnimated=this.boundMomentumScroll,this.scrollAnimator=q.create(),this.scrollAnimator.onAnimated=this.boundMomentumScroll,this.boundTouchStart=this.onTouchStart.bind(this),this.boundAddKeyboardEventListeners=this.addKeyboardEventListeners.bind(this),this.boundRemoveKeyboardEventListeners=this.removeKeyboardEventListeners.bind(this),this["public"].addEventListener("touchstart",this.boundTouchStart),this["public"].addEventListener("mousedown",this.boundTouchStart);
var d=document.createElement("div");d.classList.add("scrollbar"),this.scrollbar=w.create(d,{}),this.scrollbar.onScroll=this.boundScrollbarScroll,this["public"].appendChild(this.scrollbar),this.UNIT_TESTING&&this.enableUnitTestMode(),this["public"].templateType=this["public"].getAttribute("data-template-type"),this.recycleNodes="true"===this["public"].getAttribute("data-recycle-nodes"),this.configureRecyclable(this.recycleNodes),this.dispatchSwipeEvents="true"===this["public"].getAttribute("data-swipe-events"),this.ignoreInvalidation=!0,this["public"].orientation=this["public"].getAttribute("data-orientation")||"vertical",this["public"].userSelectable=this["public"].getAttribute("data-user-selectable")||D.NONE,this.ignoreInvalidation=!1,b.length>0&&(this["public"].itemTemplate=b),this.configurePageVisibilityListeners(a?a.parentControl:null)},destroy:function(){window.removeEventListener("resize",this.boundProcessResize),window.cancelAnimationFrame(this.momentumScrollAnimationId),window.cancelAnimationFrame(this.invalidateTimeoutId),window.cancelAnimationFrame(this.domAdditionTimeout),window.cancelAnimationFrame(this.touchMoveAnimationId),window.cancelAnimationFrame(this.scrollWheelAnim),clearTimeout(this.setActiveItemTimeout),clearTimeout(this.resizeDebounceTimeout),this["public"].removeEventListener("touchstart",this.boundTouchStart),this["public"].removeEventListener("mousedown",this.boundTouchStart),this.boundTouchStart=void 0,document.body.removeEventListener("touchmove",this.onListItemTouchMove),document.body.removeEventListener("touchend",this.onListItemTouchEnd),document.body.removeEventListener("touchcancel",this.onListItemTouchEnd),document.body.removeEventListener("mousemove",this.onListItemTouchMove),document.body.removeEventListener("mouseup",this.onListItemTouchEnd),document.body.removeEventListener("mouseleave",this.onListItemTouchEnd),this.onListItemTouchEnd=this.onListItemTouchMove=null,this.cleanNodes(),this.emptyPool(),this.contentEl=this.activeListItem=null,this.collectionAdapter&&(this.collectionAdapter.unsubscribe("change",this.onChangeHandler),this.collectionAdapter.unsubscribe("add",this.boundAddedHandler),this.collectionAdapter.unsubscribe("remove",this.boundRemovedHandler),this.collectionAdapter.destroy(),this.collectionAdapter=null),this.interactionMode.destroy(),this.interactionMode=void 0,this.listItemPool.destroy(),this.listItemPool=void 0,this.railDetector.destroy(),this.railDetector=void 0,this.swipeDelegate.destroy(),this.swipeDelegate=void 0,this.swipeDetector.unsubscribe("start",this.swipeStartHandler),this.swipeDetector.unsubscribe("move",this.swipeMoveHandler),this.swipeDetector.unsubscribe("end",this.swipeEndHandler),this.swipeStartHandler=void 0,this.swipeMoveHandler=void 0,this.swipeEndHandler=void 0,this.swipeDetector.destroy(),this.swipeDetector=void 0,this.scrollDetector.unsubscribe("start",this.scrollStartHandler),this.scrollDetector.unsubscribe("move",this.scrollMoveHandler),this.scrollDetector.unsubscribe("end",this.scrollEndHandler),this.scrollStartHandler=void 0,this.scrollMoveHandler=void 0,this.scrollEndHandler=void 0,this.scrollDetector.destroy(),this.scrollDetector=void 0,this.scrollbar.destroy&&(this.scrollbar.onScroll=void 0,this.scrollbar.destroy()),this.scrollbar=void 0,this.scrollAnimator&&(this.scrollAnimator.destroy(),this.scrollAnimator=void 0),this.overscrollAnimator&&(this.overscrollAnimator.destroy(),this.overscrollAnimator=void 0),this.scrollToAnimator&&(this.scrollToAnimator.destroy(),this.scrollToAnimator=void 0),this.templater.destroy(),this.parentPage&&(this.parentPage.removeEventListener("visible",this.boundProcessResize),this.parentPage.removeEventListener("visible",this.boundAddKeyboardEventListeners),this.removeKeyboardEventListeners(),this.parentPage.removeEventListener("invisible",this.boundRemoveKeyboardEventListeners)),this.keyboardInteractions.destroy(),this.keyboardInteractions=void 0,this.touchInteractions.destroy(),this.touchInteractions=void 0,this.boundMomentumScroll=void 0,this.boundRepopulate=void 0,this.boundMouseWheelHandler=void 0,this.boundProcessResize=void 0,this.boundScrollbarScroll=void 0,this.boundAddKeyboardEventListeners=void 0,this.boundRemoveKeyboardEventListeners=void 0,this.parentPage=void 0,this.swipeTarget=void 0,this.scrollStyle=void 0,this.templateAttributeLookup=void 0,this.dirtyLookup=void 0,this.nodeList=void 0,this.listItemTemplates=void 0,this.itemTemplate=void 0,this.modelTransform=void 0,this.collection=void 0,this.selectedIndices=void 0,this.touchedNodes=void 0,this.templater=void 0,this.touchStartEvent=void 0,this.templateType=void 0}}},{"../../shared/events.js":115,"../../shared/interactionMode.js":116,"../common/easing.js":13,"../common/pool.js":15,"./adapter.js":24,"./animation/cumulativeDelta.js":27,"./animation/overscrollAnimator.js":29,"./animation/scrollAnimator.js":30,"./animation/scrollToAnimator.js":31,"./controller/keyboardInteractions.js":32,"./controller/touchInteraction.js":33,"./gestures/railDetector.js":34,"./gestures/scrollGestureDetector.js":35,"./gestures/swipeGestureDetector.js":36,"./scrollbar/scrollbar.js":38,"./standardListItem.html":41,"./swipe/swipeDelegate.js":43,"./template.html":44,"./templates/templater.js":49}],38:[function(a,b){var c=window.elsa.utils.styles,d=a("../animation/movingAverage.js"),e=a("../../../shared/utils.js"),f=(a("../../common/easing.js"),a("./template.html")),g=a("./sizeAnimator.js"),h=function(a,b,c){return Math.min(Math.max(c,a),b)};b.exports={name:"scrollbar",extend:window.HTMLElement,"public":{orientation:{set:function(a){this.orientation!==a&&(this.orientation=a,this.configureOrientation(this.orientation))}},onScroll:void 0,scrollableArea:0,collectionSize:0,scroll:function(a,b){var c=this.areaAnimator.tick(this.averageItemSize,b)*this.collectionSize,d=c-this.scrollableArea;if(!(0>d)){this.size=this.sizeBar(b),b&&this.showBar();var e=(a+this.offsetPosition)/d;this.positionBar(e)}},scrollToIndex:function(a){var b=a*this.averageItemSize;this["public"].scroll(b,!1),this.offsetPosition=b},itemShown:function(a,b){this.itemLookup[b]||(this.itemLookup[b]=!0,this.averageItemSize=this.movingAverage.push(a))},reset:function(){this.itemLookup={},this.movingAverage.reset(),this.offsetPosition=0}},"private":{minSize:20,size:40,padding:5,hideTimeoutDuration:300,hideTimeoutId:0,offsetPosition:0,sizeInterpolationMaxTicks:20,sizeInterpolationCtr:0,estimatedScrollArea:{get:function(){return this.averageItemSize*this.collectionSize}},configureOrientation:function(a){"vertical"===a?(this.translateProp="Y",this.dimensionProp="height",this.girthProp="width",this.translateItem=this.translateItemY,this.getInteractionPosition=e.getInteractionPositionMethod("y")):(this.translateProp="X",this.dimensionProp="width",this.girthProp="height",this.translateItem=this.translateItemX,this.getInteractionPosition=e.getInteractionPositionMethod("x")),this.onDeviceResize(window.elsa.App.device.type)},sizeBar:function(a){var b=this.sizeAnimator.tick(this.calculateSize(),a);return b!==this.size&&(this.size=b,this.barStyle[this.dimensionProp]=(0|b)+"px"),b},calculateSize:function(){var a=this.scrollableArea/this.estimatedScrollArea,b=a*this.scrollableArea;return h(this.minSize,this.scrollableArea,b)},showBar:function(){this.lastShownTime=Date.now(),this.hideTimeoutId||(window.elsa.App.cancelAnimationFrame(this),window.elsa.App.requestAnimationFrame(this,function(){this.barEl.classList.remove("hidden"),this.hideTimeoutId=setTimeout(this.hideBar,this.hideTimeoutDuration)}))},hideBar:function(){Date.now()-this.lastShownTime>this.hideTimeoutDuration-50?(window.elsa.App.cancelAnimationFrame(this),window.elsa.App.requestAnimationFrame(this,function(){this.barEl.classList.add("hidden"),this.hideTimeoutId=void 0})):this.hideTimeoutId=setTimeout(this.hideBar,this.hideTimeoutDuration)},positionBar:function(a){var b=this.scrollableArea-2*this.padding,c=Math.round(a*b-this.sizeAnimator.currentSize()*a),d=this.padding+h(0,b-this.sizeAnimator.currentSize(),c);this.position=d,this.translateItem(this.translateStyle,d)},getInteractionPosition:function(){},translateItem:function(){},translateItemX:function(a,b){a[c.transform]="translate3d("+b+"px,0,0)"},translateItemY:function(a,b){a[c.transform]="translate3d(0,"+b+"px,0)"},onMouseDown:function(a){a.preventDefault(),a.stopPropagation(),this.touchStartPos=this.getInteractionPosition(a)+this.position,window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousecancel",this.onMouseUp),this.barEl.classList.add("scrolling")},onMouseMove:function(a){var b=this.getInteractionPosition(a)-this.touchStartPos,c=h(0,1,b/this.scrollableArea);this.positionBar(c),this["public"].onScroll&&this["public"].onScroll(c*(this.estimatedScrollArea-this.scrollableArea))},onMouseUp:function(){window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousecancel",this.onMouseUp),this.barEl.classList.remove("scrolling")},onDeviceResize:function(a){var b="narrow"===a?4:8;this.barEl.style[this.girthProp]=b+"px"}},init:function(){this["public"].innerHTML=f,this.barEl=this["public"].querySelector(".bar"),this.translateStyle=this["public"].style,this.barStyle=this.barEl.style,this.movingAverage=d.create(),this.sizeAnimator=g(this.size,this.sizeInterpolationMaxTicks),this.areaAnimator=g(0,this.sizeInterpolationMaxTicks),this.movingAverage.size=void 0,this["public"].reset(),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this),this.hideBar=this.hideBar.bind(this),this.onDeviceResize=this.onDeviceResize.bind(this),window.elsa.App.device.addListener(this.onDeviceResize)},destroy:function(){window.elsa.App.cancelAnimationFrame(this),this.movingAverage.destroy(),this.movingAverage=void 0,this.barEl=void 0,this.barStyle=void 0,this.itemLookup=void 0,this.translateStyle=void 0,this.sizeAnimator=void 0,this.areaAnimator=void 0,this["public"].removeEventListener("mousedown",this.onMouseDown),window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousecancel",this.onMouseUp),window.elsa.App.device.removeListener(this.onDeviceResize),clearTimeout(this.hideTimeoutId)}}},{"../../../shared/utils.js":118,"../../common/easing.js":13,"../animation/movingAverage.js":28,"./sizeAnimator.js":39,"./template.html":40}],39:[function(a,b){var c=a("../../common/easing.js"),d=function(a,b){var d,e,f=a,g=!1,h=function(b){a=b,e=0,g=!1},i=function(b){f=a,d=b,e=0,g=!0};return{tick:function(j,k){return j!==d&&i(j),k&&g?(e+=1,b>e?j=c.linear(e,f,d-f,b):h(j)):h(j),a=j,j},currentSize:function(){return a}}};b.exports=d},{"../../common/easing.js":13}],40:[function(a,b){b.exports='<div class="bar hidden"></div>'},{}],41:[function(a,b){b.exports='<div class=el-listitem data-template-type=legacy data-itemsize=54px><img class=el-listitem-image data-src="image"><div class=el-listitem-textcontent><div class=el-listitem-subtextcontent><div class=el-listitem-title data-content=title></div><div class=el-listitem-subtitle data-content=subtitle></div></div><div class=el-listitem-description data-content=description></div></div></div>'},{}],42:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.compiler,e=(window.elsa.action,window.elsa.utils.styles),f=a("../../../shared/utils.js"),g=a("../../../shared/events.js"),h={},i=function(){if(h.p)return h.p;var a=function c(a,b){var d=Object.getOwnPropertyNames(a);for(var e in d){var f=Object.getOwnPropertyDescriptor(a,d[e]);f.hasOwnProperty("get")&&f.hasOwnProperty("set")&&b.push(d[e])}var g=Object.getPrototypeOf(a);return g!==HTMLElement.prototype?c(g,b):b},b=d.elements.action;return h.p=[],a(b.prototype,h.p)};b.exports=c.createType({name:"swipeui",extend:window.HTMLElement,actiontrigger:g.createEventType("actiontrigger",{bubbles:!0,cancelable:!0}),"public":{listItem:{writable:!1},reset:function(){this.isReset||(this.isReset=!0,this.listItem.removeEventListener(e.transitionend,this.transitionEnd),this.swipePos?(this.listItem.addEventListener(e.transitionend,this.resetTransitionEnd),this.listItem.classList.add(this.transitioningClassName),this.translateItem(0)):this.resetTransitionEnd())},swipeEnd:function(a){var b,c=this.childrenSize,d=!1;if(b=a&&a.velocity?this.direction>0?Math.max(this.swipePos,a.velocity.x):Math.min(this.swipePos,a.velocity.x):this.swipePos,!c||this.direction>0&&.5*c>b||this.direction<0&&b>.5*-c)return this["public"].reset(),d;var e=c*this.direction;return"undefined"!=typeof this.listItem.transformValX&&(this.listItem.transformValX+e<=-this.listItem.scrollWidth||this.listItem.transformValX+e>=this.listItem.clientWidth)?(this["public"].reset(),d):(this.positionSwipe(e,!0),d=!0,this.firstTouchPosition=void 0,this.listItem&&"undefined"!==this.listItem.transformValX&&this.actionContainer===this.listItem&&(this.listItem.transformValX=this.transformValX),this.listItem&&"undefined"!==this.listItem.transformValY&&this.actionContainer===this.listItem&&(this.listItem.transformValY=this.transformValY),d)},swipeMove:function(a){this.isReset=!1;var b=(this.listItem.transformValX||0)+this.getSwipeInteractionPosition(a);this.firstTouchPosition||(this.firstTouchPosition=b-(this.swipePos||0)),this.positionSwipe(b-this.firstTouchPosition)},resetDOM:function(){this.listItem.classList.remove(this.swipeContainerClassName),this.listItem.classList.remove(this.swipeDirectionClasses[this.direction]),this.listItem.removeEventListener(e.transitionend,this.transitionEnd),this.listItem.removeEventListener(e.transitionend,this.resetTransitionEnd)}},"private":{swipeContainerClassName:"el-swipe-container",transitioningClassName:"transitioning",swipeDirectionClasses:{1:"swipe-right","-1":"swipe-left"},swipeActionClasses:{1:"action-right","-1":"action-left"},cloneAction:function(a){var b=d.elements.action,c=i(),e=b.create();for(var f in c)e[c[f]]=a[c[f]];var g=Array.prototype.slice.call(a.attributes);return g.forEach(function(a){e.setAttribute(a.name,a.value)}),e},createActions:function(a){for(var b=this["public"],c=0;c<a.length;c++){var e=a[c],f=this.cloneAction(e);if(f=d.compile(f,this.listItem),f.originalAction=e,b.appendChild(f),f.addEventListener("trigger",this.actionTriggered),c!==a.length-1){var g=document.createElement("div");g.classList.add("el-pipe"),b.appendChild(g)}}return b},actionTriggered:function(a){a.preventDefault(),a.stopPropagation();var c=b.exports.actiontrigger({action:a.action,index:parseInt(this.listItem.getAttribute("data-index"))});this["public"].dispatchEvent(c),this["public"].reset()},resetTransitionEnd:function(){this["public"].resetDOM(),this.swipePos=void 0,this.translateItem(0),this["public"].publish("reset",this["public"])},transitionEnd:function(){this.listItem.classList.remove(this.transitioningClassName),this.listItem.removeEventListener(e.transitionend,this.resetTransitionEnd)},positionSwipe:function(a,b){a!==this.swipePos&&this.childrenSize&&(b?(this.listItem.addEventListener(e.transitionend,this.transitionEnd),this.listItem.removeEventListener(e.transitionend,this.resetTransitionEnd),this.listItem.classList.add(this.transitioningClassName)):(this.listItem.removeEventListener(e.transitionend,this.transitionEnd),this.listItem.removeEventListener(e.transitionend,this.resetTransitionEnd),this.listItem.classList.remove(this.transitioningClassName)),this.translateItem(this.constrainSwipePosition(a)))},constrainSwipePosition:function(a){return this.direction>0?Math.max(0,Math.min(this.childrenSize,a)):Math.min(0,Math.max(-this.childrenSize,a))},translateItem:function(){},translateItemX:function(a){this.transformValX=this.getListItemTransformX(a),this.listItem.style[e.transform]="translate3d("+this.transformValX+"px,"+this.getListItemTransform()+"px,0)",this.swipePos=a},translateItemY:function(a){this.transformValY=this.getListItemTransformY(a),this.listItem.style[e.transform]="translate3d("+this.getListItemTransform()+","+this.transformValY+"px,0)",this.swipePos=a},getSwipeInteractionPosition:function(){},getListItemTransformX:function(a){return(this.listItem.transformValX||0)+(a||0)},getListItemTransformY:function(a){return(this.listItem.transformValY||0)+(a||0)},getListItemTransform:function(){return this.recycledNodes?this.listItem.transformVal:0}},init:function(a,b,c,d,e){this.listItem=b,this.direction=c,this.orientation=d,this.recycledNodes=e,this.getSwipeInteractionPosition=f.getInteractionPositionMethod("vertical"===d?"x":"y"),this.resetTransitionEnd=this.resetTransitionEnd.bind(this),this.transitionEnd=this.transitionEnd.bind(this),this.translateItem="vertical"===d?this.translateItemX:this.translateItemY,this["public"].classList.add("el-swipe-ui"),"li"===b.nodeName.toLowerCase()?(this.actionTriggered=this.actionTriggered.bind(this),this.createActions(a),this.actionContainer=this["public"]):this.actionContainer=b,this.listItem.classList.add(this.swipeContainerClassName,this.swipeDirectionClasses[c]),this["public"].classList.add(this.swipeActionClasses[c]);var g="vertical"===d?"clientWidth":"clientHeight",h=this;this.sizeAnimationId=window.requestAnimationFrame(function(){h.childrenSize=h.actionContainer[g]})},destroy:function(){window.cancelAnimationFrame(this.sizeAnimationId),d.destroy(this.actionContainer.children),this.listItem=void 0,this.actionContainer=void 0,this.transitionEnd=void 0}})},{"../../../shared/events.js":115,"../../../shared/utils.js":118}],43:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.utils.styles,e=a("./swipeActions.js"),f=a("../../../shared/utils.js"),g=function(a){var b,c=f.getInteractionPositionMethod("vertical"===a?"x":"y");return function(a){return void 0===b?(b=c(a),0):c(a)-b}};b.exports=c.createType({name:"SwipeDelegate","public":{orientation:{set:function(a){this.orientation=a}},show:function(a,b,c,d){var f=this.findItemByListItem(b);if(f)return void(this.activeItem=f);this["public"].clear();var g=e.create(a,b,c,this.orientation,d);return g.subscribe("reset",this.resetItem),this.sizeItem(g,b,this.orientation),this.positionItem(g,b,this.orientation,d),this.insertItem(g),this.activeItem=g,g},clear:function(){this.items.forEach(this.clearItem)},isActiveItem:function(a){return this.activeItem?this.activeItem.listItem===a:!1},hasActiveItem:function(){return!!this.activeItem},swipeStart:function(a){this.swipeDeltaCalculator=g(this.orientation),a.swipeDelta=this.swipeDeltaCalculator(a)},swipeMove:function(a){this.activeItem&&this.activeItem.swipeMove(a),a.swipeDelta=this.swipeDeltaCalculator(a)},swipeEnd:function(a){var b=!1;this.activeItem&&(b=this.activeItem.swipeEnd(a)),a.swipeDelta=this.swipeDeltaCalculator(a),a.open=b},resetDOM:function(a){var b=this.findItemByListItem(a);b&&this.cleanItem(b)},resetAll:function(){for(var a=this.items.length-1;a>=0;a--)this.resetItem(this.items[a]);this.items=[]}},"private":{items:void 0,activeItem:void 0,cleanItem:function(a){a.resetDOM(),this.resetItem(a)},getDimensionProp:function(a){return"vertical"===a?"height":"width"},getBoundingProp:function(a){return"vertical"===a?"top":"left"},sizeItem:function(a,b,c){var d=this.getDimensionProp(c);a.style[d]=f.getElementSize(b,d)+"px"},positionItem:function(a,b,c,d){var e;if(d)e=b.transformVal;else{var f=this.list.getBoundingClientRect(),g=b.getBoundingClientRect(),h=this.getBoundingProp(c);e=g[h]-f[h]}var i="vertical"===c?this.translateItemY:this.translateItemX;i(a.style,e)},translateItemX:function(a,b){a[d.transform]="translate3d("+(0|b)+"px,0,0)"},translateItemY:function(a,b){a[d.transform]="translate3d(0,"+(0|b)+"px,0)"},insertItem:function(a){this.container.insertBefore(a,this.container.firstChild),this.items.push(a)},clearItem:function(a){a.reset()},resetItem:function(a){var b=this.items.indexOf(a);-1!==b&&this.items.splice(b,1),a===this.activeItem&&(this.activeItem=void 0),this.container.removeChild(a),a.unsubscribe("reset",this.resetItem),window.elsa.destroy(a),"function"==typeof a.destroy&&a.destroy()},findItemByListItem:function(a){var b=this.items.length;if(0===b)return null;for(var c=0;b>c;c++){var d=this.items[c];if(d.listItem===a)return d}return null}},init:function(a,b){this.list=a,this.container=b,this.resetItem=this.resetItem.bind(this),this.items=[]},destroy:function(){this["public"].resetAll(),this.list=void 0,this.container=void 0,this.items=void 0,this.activeItem=void 0,this.swipeDeltaCalculator=void 0}})},{"../../../shared/utils.js":118,"./swipeActions.js":42}],44:[function(a,b){b.exports="<ul class=el-list-ul></ul>"},{}],45:[function(a,b){var c=window.angular;b.exports=function(){return{bind:function(a,b,d,e){var f=c.element(a);f.scope().$apply(function(a){a[a.listValueIdentifier]=b,a.$index=e})},create:function(a){var b=document.createElement("div");return b.innerHTML=a,b.firstElementChild},initializeDOM:function(a,b){var d=c.element(a),e=d.scope(),f=e.$new();f.listValueIdentifier=e.listValueIdentifier;var g=elsa.compiler.plugins.get("angular").controller.injector;g.invoke(function(a){a(b)(f)})},parse:function(){return null},render:function(){}}}},{}],46:[function(a,b){var c=a("./mustache.js"),d=["data-content","data-src","data-class"],e=function(a){return"{{{"+a+"}}}"};b.exports={parse:function(a,b,c){if(b&&-1!==d.indexOf(b.name)){if("data-content"===b.name)return{property:".textContent",value:e(b.value)};var f=b.name.replace("data-",""),g=c.getAttribute(f);return"data-class"===b.name&&g?{property:f,value:g+" "+e(b.value)}:{property:f,value:e(b.value)}}return null},render:function(a,b){return c.render(a,b)}}},{"./mustache.js":47}],47:[function(a,b){var c=/\{\{(.*?)\}\}/,d="Mustache not found on window. Please load the library via script tag.";b.exports={parse:function(a,b){if(c.test(a)){if(!window.Mustache)throw new Error(d);window.Mustache.parse(a);var e=b?b.name:".textContent";return{property:e,value:a}}},render:function(a,b){if(!window.Mustache)throw new Error(d);return window.Mustache.render(a,b)}}},{}],48:[function(a,b){var c=new RegExp("<%.*?%>"),d={};b.exports={parse:function(a,b){if(c.test(a)){if(!window._)throw new Error("Underscore not found on window. Please load the library via script tag.");d[a]=window._.template(a);var e=b?b.name:".textContent";return{property:e,value:a}}},render:function(a,b){return d[a](b)}}},{}],49:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.compiler,e=a("./templaterUtils.js"),f=/data-template-type\s*=\s*['"]([A-Za-z]+)['"]/;b.exports=c.createType({name:"templater",extend:Object,"public":{instantiate:function(a){var b=e.stringify(a),c=f.exec(b),d=this.getEngine(this.getType(c?c[1]:null)),g=e.normalize(b,d.create,this.list),h=document.createElement("li");return h.classList.add("el-list-li"),h.appendChild(g),h.templateType=g.templateType,e.mapAttributes(g,h),h},parse:function(a,b){var c=b||a.templateType,d=this.extractTemplatedNodes(this.getEngine(a),a);return this.cachedTemplates[c]=d,this.cachedTemplateDOM[c]=a,a},bind:function(a,b,c,d){var e=this.getEngine(a);if(e.bind)return e.bind(a,b,c,d);c=void 0!==c?c:a.templateType||a.outerHTML;var f=this.cachedTemplates[c];if(!f)throw new Error("Template must be registered with Templater.parse() first.");return this.bindNodes(e,a,f,b)},clear:function(){this.guid=0,this.engines={},this.cachedTemplates={},this.cachedTemplateDOM={}},replaceKey:function(a,b){this.cachedTemplates[b]=this.cachedTemplates[a],delete this.cachedTemplates[a]},fetch:function(a){var b=this.cachedTemplateDOM[a].cloneNode(!0),c=this.getEngine(b);return c.initializeDOM&&c.initializeDOM(this.list,b),b},copyCache:function(a,b){this.cachedTemplates[b]=this.cachedTemplates[a]}},"private":{templateAttribute:"data-template-guid",cachedTemplates:null,engines:null,guid:0,extractTemplatedNodes:function(a,b,c){if(c=c||{},3===b.nodeType){var d=a.parse(b.textContent);if(d)return b.parentNode.hasAttribute(this.templateAttribute)||(this.guid+=1,b.parentNode.setAttribute(this.templateAttribute,this.guid)),this.addProperty(c,this.guid,{property:".textContent",value:d.value}),c}return this.extractAttributes(a,b,c),this.extractChildren(a,b,c),c},extractChildren:function(a,b,c){var d=Array.prototype.slice.call(b.childNodes);if(d.length)for(var e=0;e<d.length;e++)this.extractTemplatedNodes(a,d[e],c)},extractAttributes:function(a,b,c){var d=b.attributes;if(d)for(var e=this.guid,f=0;f<d.length;f++){var g=d[f],h=a.parse(g.value,g,b);h&&(this.guid===e&&(this.guid+=1),b.setAttribute(this.templateAttribute,this.guid),this.addProperty(c,this.guid,h))}},addProperty:function(a,b,c){a[b]=a[b]||[],a[b].push({prop:c.property,value:c.value})},bindNodes:function(a,b,c,d){for(var e in c){var f=b.getAttribute(this.templateAttribute)===e.toString()?b:b.querySelector("["+this.templateAttribute+'="'+e+'"]'),g=c[e];f&&this.bindNode(a,g,f,d)}return b},bindNode:function(a,b,c,d){for(var e=0;e<b.length;e++){var f=b[e];if(".textContent"===f.prop)c.textContent=a.render(f.value,d);else{var g=a.render(f.value,d);g&&c.setAttribute(f.prop,g)}}},parseEngine:function(b){if("string"==typeof b){if("legacy"===b)return a("./engines/legacy.js");if("mustache"===b)return a("./engines/mustache.js");if("underscore"===b)return a("./engines/underscore.js");if("angular"===b)return a("./engines/angular.js")();throw new Error("Invalid template engine")}return b||a("./engines/legacy.js")},getEngine:function(a){var b=this.getType(a);return void 0===this.engines[b]&&(this.engines[b]=this.parseEngine(b)),this.engines[b]},getType:function(a){var b="string"==typeof a?a:a&&a.getAttribute?a.getAttribute("data-template-type"):null;return b=b||this.list.templateType,b=b||(d.templateCompiler?d.templateCompiler.defaultTemplateType:"legacy")}},init:function(a){a=a||{},this.engines={},this["public"].clear(),this.sourcepath=a.sourcepath,this.require=a.require,this.list=a.list||{}},destroy:function(){this.sourcepath=void 0,this.require=void 0,this.list=void 0,this.engines=void 0,this.cachedTemplates=void 0,this.cachedTemplateDOM=void 0}})},{"./engines/angular.js":45,"./engines/legacy.js":46,"./engines/mustache.js":47,"./engines/underscore.js":48,"./templaterUtils.js":50}],50:[function(a,b){var c,d=window.elsa.compiler,e=/function\s?\((.*)\)\s?{([\s\S]+.*)}/,f=function(a,b,c){return b?b(a):d.compile(a,c)},g=function(a,b){if(!a.hasAttributes())return b;for(var c=a.attributes.length,d=0;c>d;d++){var e=a.attributes[d];0===e.name.indexOf("data-")&&b.setAttribute(e.name,e.value)}return b},h=function(a,b,d){if("SCRIPT"===a.tagName){var e=c(a.innerHTML,b,d);return g(a,e)}return a},c=function(a,b,c){return a="function"==typeof a?a():a,a="string"==typeof a?f(a,b,c):a,a=a instanceof window.DocumentFragment?a.firstElementChild:a,h(a,b,c)},i=function(a,b){var c=e.exec(a),d=[c[1].replace(/\s+/g,"")],f=Function.bind.apply(Function,[null].concat(d).concat(b));return(new f)()},j=function(a){var b={},c=/\/(.*?)\(\[\\s\\S\]\+\?\)(.*?)\/g/,d=window._?window._.templateSettings:{evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};for(var f in d){var g=c.exec(d[f]);b[f]={open:g[1],close:g[2]}}for(var h=a.toString(),j=/=\((.*)\)\)==/,k=/_\.escape\(/,l="'\\+[\\s\\S].*[\\s\\S]'",m=new RegExp(l,"gm").exec(h);m;){var n=m[0],o=j.exec(n);if(o){var p=k.test(n)?b.escape:b.interpolate,q=p.open+j.exec(n)[1]+p.close;h=h.replace(m[0],q)}m=new RegExp(l).exec(h)}return i(h,e.exec(h)[2])},k=function(a){try{a="function"==typeof a?a():a}catch(b){a=j(a)}return a="object"==typeof a?a.outerHTML:a};b.exports={normalize:function(a,b,d){var e=k(a),f=c(e,b,d);return f.templateType=e,f},stringify:k,mapAttributes:g}},{}],51:[function(a){var b=(window.Ecma5Extend,window.elsa.compiler);b.registerElement(a("./draweritem")),b.registerElement(a("./action")),b.registerElement(a("./expandable-action")),b.registerElement(a("./dialog")),b.registerElement(a("./toast")),b.registerElement(a("./tabs/tab.js")),b.registerElement(a("./tabs")),b.registerElement(a("./bar")),b.registerElement(a("./list")),b.registerElement(a("./refresher/")),b.registerElement(a("./activityindicator")),b.registerElement(a("./toggle")),b.registerElement(a("./header")),b.registerElement(a("./overflow-menu")),b.registerElement(a("./common/collection"))},{"./action":5,"./activityindicator":8,"./bar":10,"./common/collection":12,"./dialog":16,"./draweritem":17,"./expandable-action":21,"./header":22,"./list":37,"./overflow-menu":52,"./refresher/":54,"./tabs":57,"./tabs/tab.js":58,"./toast":61,"./toggle":63}],52:[function(a,b){var c=(window.Ecma5Extend,window.elsa.utils.styles),d=a("../../shared/overlayTouch.js"),e=a("../../shared/events.js"),f=a("./template.html");b.exports={name:"overflow-menu",extend:window.HTMLElement,"open-overflow":e.createEventType("open-overflow",{bubbles:!0}),"close-overflow":e.createEventType("close-overflow",{bubbles:!0,cancelable:!0}),"public":{open:function(){if(!this.opened){this.closedFrameId&&(window.elsa.App.cancelAnimationFrame(this.closedFrameId),this.closedFrameId=void 0);var a=this.bar.parentElement;if(!a||"EL-PAGE"!==a.tagName)return void console.warn("invalid page",a);var c,d=-1!==Array.prototype.slice.call(a.querySelectorAll("el-page > el-page-content ~ el-bar")).indexOf(this.bar),e=this.bar.cloneNode(!0);d?(c=e.querySelectorAll("el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow)"),this["public"].classList.add("origin-bottom")):(c=e.querySelectorAll("el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow) ~ el-action:not(.el-action-placement-overflow)"),this["public"].classList.remove("origin-bottom")),c=Array.prototype.slice.call(c);for(var f=0,g=e.firstElementChild;g;g=e.firstElementChild)g&&"EL-ACTION"===g.tagName&&(g.classList.contains("el-action-placement-overflow")||-1!==c.indexOf(g))?(Object.defineProperty(g,"__originalAction",{value:this.bar.children[f]}),g.classList.add("horizontal"),this.container.appendChild(g)):e.removeChild(g),f++;a.appendChild(this["public"]);var h=this;window.elsa.App.requestAnimationFrame(h,function(){window.elsa.App.requestAnimationFrame(h,function(){window.elsa.App.scene.classList.add("fade-in"),h["public"].classList.add("fade-in"),h.overlayTouch.enableOverlayTouch(window.elsa.App.scene,this.container)}),h["public"].classList.add("open"),window.elsa.App.scene.classList.add("el-overlay")});var i=b.exports["open-overflow"]();this.bar.dispatchEvent(i),this.opened=!0}},close:function(a){if(this.opened){var d=b.exports["close-overflow"]({result:a});this.overlayTouch.disableOverlayTouch(window.elsa.App.scene),this["public"].addEventListener(c.transitionend,this.closed),this["public"].classList.remove("fade-in"),window.elsa.App.scene.classList.remove("fade-in"),this.bar.dispatchEvent(d),this.opened=!1}}},"private":{lock:!0,closed:function(a){return"opacity"===a.propertyName?!1:(this["public"].removeEventListener(c.transitionend,this.closed),this.closedFrameId=window.elsa.App.requestAnimationFrame(this,function(){this.closedFrameId=void 0,this["public"].parentNode.removeChild(this["public"]),this.container.innerHTML=""}),window.elsa.App.scene.classList.remove("el-overlay"),void this["public"].classList.remove("open"))}},"protected":{trigger:function(a){if(a.target.__originalAction){var b=e.trigger({action:a.target.__originalAction,cancelable:!0});a.target.__originalAction.dispatchEvent(b),this["public"].close()}}},init:function(a){this.bar=a.bar,this.closed=this.closed.bind(this),this.overlayTouch=new d(void 0,function(){this["public"].close()}.bind(this),function(a){this["protected"].trigger(a)}.bind(this)),this["public"].innerHTML=f,this.container=this["public"].querySelector(".el-overflow-menu-container")},destroy:function(){this.bar=void 0,this.overlayTouch=this.overlayTouch.destroy(),window.elsa.App.cancelAnimationFrame(this),this["public"].removeEventListener(c.transitionend,this.closed),this.closed=void 0,this.container=void 0
}}},{"../../shared/events.js":115,"../../shared/overlayTouch.js":117,"./template.html":53}],53:[function(a,b){b.exports="<div class=el-overflow-menu-positioner-left></div><div class=el-overflow-menu-wrapper><div class=el-overflow-menu-container></div></div><div class=el-overflow-menu-positioner-right></div>"},{}],54:[function(a,b){var c=(window.Ecma5Extend,window.elsa.compiler),d=window.elsa.utils.styles,e=a("./template.html"),f=a("./pullGestureDetector.js"),g=a("../list/animation/overscrollAnimator.js"),h=a("../list/templates/templaterUtils.js"),i=a("../../shared/utils.js"),j=a("../../shared/events.js"),k=function(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}},l={PULLING:"pull",REFRESH:"refresh"};b.exports={name:"refresher",extend:HTMLElement,Events:{writable:!1,value:l},pull:j.createEventType("pull",{bubbles:!0,cancelable:!0}),refresh:j.createEventType("refresh",{bubbles:!0,cancelable:!0}),"public":{close:function(){this.animateTo(0)}},"private":{loaderClass:"refresher-loader",pullTargetClass:"pull-target",visibleClass:"visible",onTouchMove:function(a){var b=!1;this.refreshUI.nextElementSibling&&this.configurePullTarget(this.refreshUI.nextElementSibling),b=this.pullTarget&&"EL-LIST"===this.pullTarget.tagName?this.pullTarget.isScrollPositionAtTop():this.pageContentEl.scrollTop<=0,b&&!this.pulling?this.startPull(a):this.delta<0&&this.pulling?(this.releasePull(!1),this.translate(0)):b&&this.pulling&&(a.preventDefault(),this.currentY=a.touches[0].pageY,this.delta=this.currentY-this.startY)},onTouchEnd:function(){this.releasePull(!0)},startPull:function(a){this.pulling=!0,this.animateClosed=!0,this.pullValue=this.delta=0,this.startY=this.currentY=a.touches[0].pageY,document.body.addEventListener("touchend",this.boundTouchEnd),this.pullTarget&&(this.size=i.getElementSize(this.refreshUI,"height"),this.overscrollAnimator.maxOverscroll=this.pullDetector.maxOverscroll=this.size,this.refreshUI.classList.add(this.visibleClass),this.pullAnimationId=window.requestAnimationFrame(this.boundPull))},configurePullTarget:function(a){a.classList.add(this.pullTargetClass),this.disablePageOverflow(),this.pullTarget=a,"EL-LIST"===this.pullTarget.tagName&&(this.pullTarget.overscrollEnabled=!1)},pull:function(){this.pullValue=this.overscrollAnimator.dragOverscroll(.5*(this.currentY-this.startY)),this.pullDetector.track(this.pullValue),this.pullValue>=0&&(this.translate(this.pullValue),this.pullAnimationId=window.requestAnimationFrame(this.boundPull))},releasePull:function(a){window.cancelAnimationFrame(this.pullAnimationId),document.body.removeEventListener("touchend",this.boundTouchEnd),this.pulling&&0!==this.pullValue&&a&&this.pullDetector.end(),this.pulling=!1},open:function(){this.animateTo(this.size)},animate:function(a){this.pullValue=this.overscrollAnimator.tick(a),this.translate(this.pullValue),this.overscrollAnimator.complete||(this.resetAnimationId=window.requestAnimationFrame(this.boundAnimate))},animateTo:function(a){this.overscrollAnimator.configureResetScroll(a,this.pullValue)&&(this.resetAnimationId=window.requestAnimationFrame(this.boundAnimate))},onPullReleased:function(){this.pullDetector.state===f.States.PULLED?this.forwardEvent(l.REFRESH)?this["public"].close():this.open():this["public"].close()},forwardEvent:function(a,c){var d=b.exports[a](c);return this["public"].dispatchEvent(d)},translate:function(a){a=0|a,this.translateItemY(this.pullTarget.style,a),this.translateItemY(this.refreshUI.style,a-this.size)},translateItemY:function(a,b){a[d.transform]="translateY("+b+"px)"},disablePageOverflow:function(){this.pageContentEl.style["-webkit-overflow-scrolling"]="auto"},createRefresherUI:function(){var a=this["public"].querySelector('script[type="text/template"]');if(a){a.parentNode.removeChild(a);var b=h.normalize(a);return b.classList.add(this.loaderClass),b}return c.compile(e,this.parentControl).firstElementChild}},init:function(a){this.parentControl=a.parentControl,this.refreshUI=this.createRefresherUI();for(var b=this["public"];b&&"EL-PAGE-CONTENT"!==b.tagName;)b=b.parentNode;this.pageContentEl=b,this["public"].insertBefore(this.refreshUI,this["public"].firstChild),this.boundTouchMove=this.onTouchMove.bind(this),this.boundTouchEnd=this.onTouchEnd.bind(this),this.boundPull=this.pull.bind(this),this.boundAnimate=this.animate.bind(this),this.overscrollAnimator=g.create(),this.boundProcessPullStartEvent=k(this.forwardEvent,this,l.PULLING),this.boundProcessPullReleasedEvent=k(this.onPullReleased,this,l.REFRESH),this.pullDetector=f.create(),this.pullDetector.subscribe(f.Events.START,this.boundProcessPullStartEvent),this.pullDetector.subscribe(f.Events.RELEASED,this.boundProcessPullReleasedEvent),document.body.addEventListener("touchmove",this.boundTouchMove)},destroy:function(){this.pullDetector.unsubscribe(f.Events.START,this.boundProcessPullStartEvent),this.pullDetector.unsubscribe(f.Events.RELEASED,this.boundProcessPullReleasedEvent),document.body.removeEventListener("touchmove",this.boundTouchMove),document.body.removeEventListener("touchend",this.boundTouchEnd),window.cancelAnimationFrame(this.pullAnimationId),window.cancelAnimationFrame(this.resetAnimationId),this.boundTouchMove=void 0,this.boundTouchEnd=void 0,this.boundPull=void 0,this.pageContentEl=void 0,this.boundProcessPullStartEvent=void 0,this.boundProcessPullPulledEvent=void 0,this.boundProcessPullReleasedEvent=void 0,this.boundProcessPullingEvent=void 0,this.overscrollAnimator.destroy(),this.overscrollAnimator=void 0,this.pullDetector.destroy(),this.pullDetector=void 0,this.refreshUI=void 0,this.pullTarget=void 0,this.parentControl=void 0,this.pageContentEl=void 0}}},{"../../shared/events.js":115,"../../shared/utils.js":118,"../list/animation/overscrollAnimator.js":29,"../list/templates/templaterUtils.js":50,"./pullGestureDetector.js":55,"./template.html":56}],55:[function(a,b){var c=window.Ecma5Extend,d={IDLE:"idle",DETECTING:"detecting",PULLED:"pulled"},e={START:"start",PULLING:"pulling",PULLED:"pulled",RELEASED:"released"};b.exports=c.createType({name:"PullGestureDetector",Events:{writable:!1,value:e},States:{writable:!1,value:d},"public":{maxOverscroll:0,state:{writable:!1,value:d.IDLE},track:function(a){a>=.75*this.maxOverscroll?this.state=d.PULLED:a>0&&this.state===d.IDLE?(this.state=d.DETECTING,this["protected"].publish(e.START)):a>0&&(this.state=d.DETECTING)},end:function(){this["protected"].publish(e.RELEASED),this.state=d.IDLE}},"private":{state:null},init:function(){this.state=d.IDLE}})},{}],56:[function(a,b){b.exports='<el-activityindicator class="pull-activity-indicator small refresher-loader"></el-activityindicator>'},{}],57:[function(a,b){function c(a){var b=document.createElement("div");b.classList.add("el-tabs-nav-item");var c=document.createElement("div");return c.classList.add("el-tabs-nav-item-label"),c.textContent=a.label?a.label:a.getAttribute("data-label"),b.appendChild(c),b}function d(a,b){var c=Array.prototype.slice,d=c.call(arguments,2);return function(){return a.apply(b,d.concat(c.call(arguments)))}}var e=(window.Ecma5Extend,window.elsa.compiler,window.elsa),f=a("../common/fastTouch.js"),g=(a("../../shared/utils"),a("../../core/polyfill/styles.js")),h=a("../list/swipe/swipeActions.js"),i=a("../list/gestures/swipeGestureDetector.js"),j=a("../list/gestures/railDetector.js"),k={SWIPE_START:"swipestart",SWIPE_MOVE:"swipemove",SWIPE_END:"swipeend"},l="el-tabs > .el-tabs-content > el-tab";b.exports={name:"tabs",extend:HTMLElement,"public":{tabs:{get:function(){return this.contentEl.children}},count:{get:function(){return this.contentEl.childElementCount}},appendChild:function(a){var b=this.contentEl.children.length;this.contentEl.appendChild(a),this.nav.appendChild(c(a)),this["protected"].publishChange("add",b),0===b&&this.setActiveTab(a,!1,!0)},removeChild:function(a){var b=Array.prototype.indexOf.call(this.contentEl.children,a);this.contentEl.removeChild(a),this.nav.removeChild(this.nav.children[b]),a===this.activeTab&&this.setActiveTab(a.previousElementSibling||a.nextElementSibling,!1,!0),this["protected"].publishChange("remove",b)},replaceChild:function(a,b){var d=Array.prototype.indexOf.call(this.contentEl.children,b),e=this.nav.children[d];this.activeTab===b&&a.classList.add("active-item"),this.contentEl.replaceChild(a,b),this.nav.replaceChild(c(a),e),this["protected"].publishChange("update",d)},insertBefore:function(a,b){if(!b)return this["public"].appendChild(a);var d=Array.prototype.indexOf.call(this.contentEl.children,b);this.contentEl.insertBefore(a,b),this.nav.insertBefore(c(a),this.nav.children[d]),this["protected"].publishChange("add",d)},subscribe:function(a,b){this["public"].addEventListener(a,b)},unsubscribe:function(a,b){this["public"].removeEventListener(a,b)},activeTab:{set:function(a){this.setActiveTab(a,!1,!0)}}},"private":{getActiveTabIndex:function(a){var b=Array.prototype.slice.call(this.contentEl.children);return b.indexOf(a)},setActiveTab:function(a,b,c){var d=this.getActiveTabIndex(a),e=this.nav.children[d],f=this;this.deActivateNav(f.activeNavItem),this.activateNav(e);var g=function(){if(c&&!f.isFixedPages&&f.activeTab&&f.activeTab!==a&&f.translate(a,f.activeTab),c&&!f.transitioning&&(f.deactivateTab(f.activeTab,f.activeNavItem),f.activateTab(a,e),void 0===f.activeTab&&f.resetTransformVal(a)),f.prevActiveTab=f.activeTab,f.prevActiveNavItem=f.activeNavItem,f.activeTab=a,f.activeNavItem=e,f["protected"].publishChange("active",d),!f.silent&&f.page){var b=a?a.stateid:null;f.page.updateState({tab:b})}};this.isFixedPages?g():this.setTabAnimationId=window.elsa.App.requestAnimationFrame(this,g)},setTransformVal:function(a,b,c){a.parentElement.transformValX=b,a.parentElement.style[g.transform]="translate("+b+"px)",a.parentElement.style.transitionDuration=c?"0.5s":"0s"},resetTransformVal:function(a){var b=a||this.activeTab;0!==this.getActiveTabIndex(b)&&this.setTransformVal(b,-(1*b.parentElement.clientWidth),!1)},transitionEndCb:function(){this.deactivateTab(this.prevActiveTab,this.prevActiveNavItem),this.activateTab(this.activeTab,this.activeNavItem),this.resetTransformVal(),this.transitioning=!1},translate:function(a,b){var c=this.getActiveTabIndex(a),d=(this.nav.children[c],this.getActiveTabIndex(b));if(this.transitioning=!0,Math.abs(d-c)>1){var e=Array.prototype.slice.call(this.contentEl.children);e[d+(c>d?1:-1)].classList.remove("active-item"),a.classList.add("active-item")}0===d?this.setTransformVal(a,-(1*a.parentElement.clientWidth),!0):c>d?this.setTransformVal(a,-(2*a.parentElement.clientWidth),!0):this.setTransformVal(a,0,!0)},activateTab:function(a,b){if(a){if(a.classList.add("active-item"),!this.isFixedPages){var c=Array.prototype.slice.call(this.contentEl.children),d=c.indexOf(a);c[d-1]&&c[d-1].classList.add("active-item"),c[d+1]&&c[d+1].classList.add("active-item")}this.activateNav(b)}},activateNav:function(a){a&&a.classList.add("active-item")},deActivateNav:function(a){a&&a.classList.remove("active-item")},deactivateTab:function(a,b){if(a){if(a.classList.remove("active-item"),!this.isFixedPages){var c=Array.prototype.slice.call(this.contentEl.children),d=c.indexOf(a);c[d-1]&&c[d-1].classList.remove("active-item"),c[d+1]&&c[d+1].classList.remove("active-item")}this.deActivateNav(b)}},resolveTab:function(a){var b,c;if(c=this["public"].querySelectorAll(l),a){for(var d=0;d<c.length;d++)c[d].stateid===a&&(b=c[d]);b||(b=c[0])}else b=c[0];return b},configureRouting:function(){this.page?(this.boundPageStateChanged=this.onPageStateChanged.bind(this),this.page.addEventListener("statechange",this.boundPageStateChanged)):this.contentEl.firstElementChild&&this.setActiveTab(this.contentEl.firstElementChild,!1,!0)},onNavClicked:function(a,b){var c=b.target;if(c!==a&&!this.transitioning){var d=Array.prototype.slice.call(this.nav.children).indexOf(c),e=this.contentEl.children[d];e&&this.setActiveTab(e,!1,!0)}},onPageStateChanged:function(a){var b=a.state.tab,c=this.resolveTab(b);c!==this.activeTab&&(this["public"].constructor.debug&&console.log("tab.state.changed (from parent page):",b),this.setActiveTab(c||this.contentEl.firstElementChild,!0,!0)),a.state.tab=this.activeTab?this.activeTab.stateid:null},onActive:function(a){var b=a.target;b.classList.contains("el-tabs-nav-item-label")&&(b=b.parentElement),b.classList.contains("el-tabs-nav-item")&&b.classList.add("pressed")},onInactive:function(a){var b=a.target;b.classList.contains("el-tabs-nav-item-label")&&(b=b.parentElement),b.classList.contains("el-tabs-nav-item")&&b.classList.remove("pressed")},processSwipeStartEvent:function(a,b){this.swipeAction=h.create(void 0,this.activeTab.parentElement,b.direction,"vertical",!1)},processSwipeMoveEvent:function(a,b){this.swipeAction.swipeMove(b.originalEvent),this.processSwipeEvent(a,b)},processSwipeEndEvent:function(a,b){var c=this.swipeAction.swipeEnd(b.originalEvent);if(-1!==c){this.transitioning=!0;var d=Array.prototype.slice.call(this.nav.children).indexOf(this.activeNavItem),e=d-b.direction,f=this.contentEl.children[e];f&&this.setActiveTab(f,!1,!1)}this.processSwipeEvent(a,b)},processSwipeEvent:function(a,b){this.dispatchSwipeEvents&&(b.target=this.swipeTarget,b.index=this.index,this.forwardEvent(a,b)||this.swipeDetector.cancel())},onTouchStart:function(a){this.tabItemTouchStart(a)},tabItemTouchStart:function(a,b){if(!this.transitioning){var c={trackingID:-1,maxDy:0,maxDx:0};"touchstart"===a.type?(c.trackingID=a.changedTouches[0].identifier,c.x=a.changedTouches[0].pageX,c.y=a.changedTouches[0].pageY):(c.trackingID="mouse",c.x=a.screenX,c.y=a.screenY),c.maxDx=0,c.maxDy=0,c.historyX=[0],c.historyY=[0],c.historyTime=[a.timeStamp],this.findDelta=function(a){if("touchmove"!==a.type&&"touchend"!==a.type)return{x:a.screenX-c.x,y:a.screenY-c.y};for(var b=0;b<a.changedTouches.length;b++)if(a.changedTouches[b].identifier===c.trackingID)return{x:a.changedTouches[b].pageX-c.x,y:a.changedTouches[b].pageY-c.y};return null};var d=this,e={e:a};this.onTabItemTouchMove=function(a){if(d.railDetector.track(a),d.railDetector.horizontalRailState===j.States.ON_RAIL){a.preventDefault();var b=d.findDelta(a);if(b){for(c.maxDy=Math.max(c.maxDy,Math.abs(b.y)),c.maxDx=Math.max(c.maxDx,Math.abs(b.x)),c.historyX.push(b.x),c.historyY.push(b.y),c.historyTime.push(a.timeStamp);c.historyTime.length>10;)c.historyTime.shift(),c.historyX.shift(),c.historyY.shift();e.e=a}}},this.onTabItemTouchEnd=function(a){var e=d.findDelta(a);if(e){var f=c.historyTime.length,g={x:0,y:0};if(f>2)for(var h=c.historyTime.length-1,i=c.historyTime[h],j=c.historyX[h],k=c.historyY[h];h>0;){h--;var l=c.historyTime[h],m=i-l;if(m>30&&50>m){g.x=(j-c.historyX[h])/(m/1e3),g.y=(k-c.historyY[h])/(m/1e3);break}}c.historyTime=[],c.historyX=[],c.historyY=[],a.velocity=g,Object.getPrototypeOf(d["public"]).constructor.debug>1&&console.log("tab.events.touchend"),window.elsa.App.cancelAnimationFrame(d.touchMoveAnimationId),d.scrolling=!1,d.tabItemTouchEnd(a,b)}},this.activeTab.parentElement.style.transitionDuration="0s",document.body.addEventListener("touchend",this.onTabItemTouchEnd),document.body.addEventListener("touchcancel",this.onTabItemTouchEnd),document.body.addEventListener("touchmove",this.onTabItemTouchMove),document.body.addEventListener("mouseup",this.onTabItemTouchEnd),document.body.addEventListener("mouseleave",this.onTabItemTouchEnd),document.body.addEventListener("mousemove",this.onTabItemTouchMove),this.scrolling=!0,this.railDetector.start(a),this.swipeDetector.start(a),this.dragStartPos=this.scrollVal,window.elsa.App.cancelAnimationFrame(this.touchMoveAnimationId);var f=function g(){d.tabItemTouchMove(e.e,b),d.scrolling&&(d.touchMoveAnimationId=window.elsa.App.requestAnimationFrame(this,g))};this.touchMoveAnimationId=window.elsa.App.requestAnimationFrame(this,f),Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("tab.events.touchstart")}},tabItemTouchMove:function(a){a=a||window.event,this.swipeDetector.track(a)},tabItemTouchEnd:function(a){Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("tab touch end",a.type),this.activeTab.parentElement.style.transitionDuration="0.5s",document.body.removeEventListener("touchend",this.onTabItemTouchEnd),document.body.removeEventListener("touchcancel",this.onTabItemTouchEnd),document.body.removeEventListener("touchmove",this.onTabItemTouchMove),document.body.removeEventListener("mouseup",this.onTabItemTouchEnd),document.body.removeEventListener("mouseleave",this.onTabItemTouchEnd),document.body.removeEventListener("mousemove",this.onTabItemTouchMove),this.onTabItemTouchEnd=this.onTabItemTouchMove=null,this.railDetector.end(a),this.swipeDetector.end(a)}},"protected":{publishChange:function(a,b){"function"==typeof this["protected"][a]&&this["protected"][a](b)},publish:function(a,b){"function"==typeof this["protected"][a]&&this["protected"][a](b);var c=new CustomEvent(a,{detail:b,bubbles:!0});this["public"].dispatchEvent(c),c=void 0}},init:function(b){for(var h=document.createDocumentFragment(),l=document.createDocumentFragment(),m=this["public"].classList.contains("fixed-pages"),n=this["public"].firstElementChild;n;n=this["public"].firstElementChild){var o=c(n);n.tabIndex=0,l.appendChild(o),h.appendChild(n)}this["public"].innerHTML=a("./template.html"),this.contentEl=this["public"].querySelector(".el-tabs-content"),this.contentEl.appendChild(h),this.nav=this["public"].querySelector("nav"),this.nav.appendChild(l),this.isFixedPages=m,m||(this.swipeStartHandler=d(this.processSwipeStartEvent,this,k.SWIPE_START),this.swipeMoveHandler=d(this.processSwipeMoveEvent,this,k.SWIPE_MOVE),this.swipeEndHandler=d(this.processSwipeEndEvent,this,k.SWIPE_END),this.railDetector=j.create(),this.swipeDetector=i.create(10),this.swipeDetector.subscribe("start",this.swipeStartHandler),this.swipeDetector.subscribe("move",this.swipeMoveHandler),this.swipeDetector.subscribe("end",this.swipeEndHandler),this.boundTouchStart=this.onTouchStart.bind(this),this["public"].addEventListener("touchstart",this.boundTouchStart),this["public"].addEventListener("mousedown",this.boundTouchStart),this.transitionEndHandler=this.transitionEndCb.bind(this),this.contentEl.addEventListener(g.transitionend,this.transitionEndHandler,!1),this.contentEl.transformValX=0),this.fastTouch=f.create(this.nav,this.onNavClicked.bind(this)),b.parentControl&&e.page.prototype.isPrototypeOf(b.parentControl)?(this["public"].constructor.debug&&console.log("tabs.init",b.parentControl.tagName+"."+b.parentControl.routename),this.page=b.parentControl):this.contentEl.children.length>0&&this.setActiveTab(this.contentEl.firstElementChild,!1,!0),this.configureRouting()},destroy:function(){this.isFixedPages||(this.contentEl.removeEventListener(g.transitionend,this.transitionEndHandler,!1),this.transitionEndHandler=void 0,this["public"].removeEventListener("touchstart",this.boundTouchStart),this["public"].removeEventListener("mousedown",this.boundTouchStart),this.boundTouchStart=void 0,this.railDetector.destroy(),this.railDetector=void 0,this.swipeDetector.unsubscribe("start",this.swipeStartHandler),this.swipeDetector.unsubscribe("move",this.swipeMoveHandler),this.swipeDetector.unsubscribe("end",this.swipeEndHandler),this.swipeDetector.destroy(),this.swipeDetector=void 0,this.swipeStartHandler=void 0,this.swipeMoveHandler=void 0,this.swipeEndHandler=void 0),this.isFixedPages=void 0,this.page&&(this.boundPageStateChanged&&(this.page.removeEventListener("statechange",this.boundPageStateChanged),this.boundPageStateChanged=void 0),this.page=void 0),window.elsa.App.cancelAnimationFrame(this),this.touchMoveAnimationId=void 0,this.setTabAnimationId=void 0,this.nav.removeEventListener("click",this.boundNavClicked),this.boundPageStateChanged=void 0,this.fastTouch=this.fastTouch.destroy(),this.contentEl=void 0,this.nav=void 0,this.activeNavItem=void 0,this.activeTab=void 0,this.prevActiveNavItem=void 0,this.prevActiveTab=void 0}}},{"../../core/polyfill/styles.js":76,"../../shared/utils":118,"../common/fastTouch.js":14,"../list/gestures/railDetector.js":34,"../list/gestures/swipeGestureDetector.js":36,"../list/swipe/swipeActions.js":42,"./template.html":59}],58:[function(a,b){var c=(window.Ecma5Extend,a("../../shared/utils"));b.exports={name:"tab",extend:window.elsa.control,mixinExtended:[a("../../shared/content")],attributes:["label","stateid"],"public":{label:{set:function(a){this["public"].setAttribute("data-label",a)},get:function(){return this["public"].getAttribute("data-label")}},stateid:{writable:!1}},init:function(){if(this.label=this["public"].getAttribute("data-label"),this.stateid=this.stateid||(this["public"].label?c.slugify(this["public"].label):!1),!this.stateid)throw new Error("tab expects label or stateid",this["public"],this.sourcepath)},destroy:function(){}}},{"../../shared/content":113,"../../shared/utils":118}],59:[function(a,b){b.exports="<nav class=el-tabs-nav></nav><div class=el-tabs-content></div>"},{}],60:[function(a,b){b.exports="<div class=el-toast-content></div><div class=el-toast-pipe></div><button class=el-toast-button></button>"},{}],61:[function(a,b){var c=(window.Ecma5Extend,window.elsa.utils.styles),d=a("./simple.html"),e=a("./button.html"),f=a("../common/fastTouch.js");b.exports={name:"toast",extend:HTMLElement,"public":{open:function(){var a=this;window.elsa.App.requestAnimationFrame(this,function(){a["public"].classList.add("open"),window.elsa.App.requestAnimationFrame(a,function(){window.elsa.App.scene.classList.add("fade-in"),a["public"].classList.add("fade-in")})}),this.startAutoCloseTimeout()},close:function(){var a=this;this.cancelAutoCloseTimeout(),this["public"].addEventListener(c.transitionend,this.hideToast),window.elsa.App.scene.classList.remove("fade-in"),a["public"].classList.remove("fade-in")}},"private":{autoCloseTimeout:void 0,startAutoCloseTimeout:function(){var a=this;a.autoCloseTimeout=setTimeout(function(){a["public"].close()},this.options.timeout)},cancelAutoCloseTimeout:function(){this.autoCloseTimeout&&(clearTimeout(this.autoCloseTimeout),this.autoCloseTimeout=void 0)},touchStart:function(){this.cancelAutoCloseTimeout(),document.body.addEventListener("touchend",this.touchEnd),document.body.addEventListener("touchcancel",this.touchEnd)},touchEnd:function(){this.startAutoCloseTimeout(),document.body.removeEventListener("touchend",this.touchEnd),document.body.removeEventListener("touchcancel",this.touchEnd)},hideToast:function(){this["public"].removeEventListener(c.transitionend,this.hideToast),this["public"].classList.remove("open");var a=this;window.elsa.App.requestAnimationFrame(this,function(){a["public"].parentNode.removeChild(a["public"]),a["public"].destroy()})}},"protected":{trigger:function(){this["public"].close(),this.options.buttonPressedCallback&&this.options.buttonPressedCallback()}},init:function(a){var b;a||(a={}),a.timeout||(a.timeout=a.buttonLabel?5e3:1e3),a.buttonLabel?(this["public"].innerHTML=e,b=this["public"].getElementsByClassName("el-toast-button")[0],b.innerHTML=a.buttonLabel,this.fastTouch=new f(b,this["protected"].trigger.bind(this["protected"])),a.label&&(this["public"].getElementsByClassName("el-toast-content")[0].innerHTML=a.label)):(this["public"].innerHTML=d,a.label&&(this["public"].getElementsByClassName("el-toast-content")[0].innerHTML=a.label)),this.options=a,this.hideToast=this.hideToast.bind(this),this.startAutoCloseTimeout=this.startAutoCloseTimeout.bind(this),this.cancelAutoCloseTimeout=this.cancelAutoCloseTimeout.bind(this),this.touchStart=this.touchStart.bind(this),this.touchEnd=this.touchEnd.bind(this),this["public"].addEventListener("mouseenter",this.cancelAutoCloseTimeout),this["public"].addEventListener("mouseleave",this.startAutoCloseTimeout),this["public"].addEventListener("touchstart",this.touchStart)},destroy:function(){this.cancelAutoCloseTimeout(),this.options.buttonLabel&&(this.fastTouch=this.fastTouch.destroy()),window.elsa.App.cancelAnimationFrame(this),this["public"].removeEventListener(c.transitionend,this.hideToast),this["public"].removeEventListener("mouseenter",this.cancelAutoCloseTimeout),this["public"].removeEventListener("mouseleave",this.startAutoCloseTimeout),this["public"].removeEventListener("touchstart",this.touchStart),document.body.removeEventListener("touchend",this.touchEnd),document.body.removeEventListener("touchcancel",this.touchEnd),this.options=void 0,this.hideToast=void 0,this.startAutoCloseTimeout=void 0,this.cancelAutoCloseTimeout=void 0,this.touchStart=void 0,this.touchEnd=void 0}}},{"../common/fastTouch.js":14,"./button.html":60,"./simple.html":62}],62:[function(a,b){b.exports='<div class=el-toast-content style="text-align: center"></div>'},{}],63:[function(a,b){var c=(window.elsa.compiler,window.elsa,a("../../shared/utils.js").applyAttributes),d=a("../common/fastTouch.js"),e=a("../../shared/events.js");b.exports={name:"toggle",extend:window.HTMLElement,mixinExtended:[d.mixin],attributes:["checked","value","disabled"],events:["trigger"],modelDrivenAttribute:{event:"trigger",attr:"checked"},"public":{checked:{set:function(a){a===this.checked||this.disabled||(this.checked=a,this["public"].setAttribute("aria-checked",this.checked),this["public"].setAttribute("checked",this.checked),this["public"].dispatchEvent(e.trigger()))}},disabled:{set:function(a){a!==this.disabled&&(this.disabled=a,this.disabled?(this["public"].setAttribute("disabled",""),this["public"].setAttribute("aria-disabled",this.disabled)):(this["public"].removeAttribute("disabled"),this["public"].removeAttribute("aria-disabled")),this["protected"].publish("disabledChanged",this.disabled))},get:function(){return this.disabled}},value:{set:function(a){a===this.value&&(this.value=a)},get:function(){return this.value}}},"private":{checked:!1,value:void 0},"protected":{trigger:function(){this.disabled||(this["public"].checked=this.checked?!1:!0)}},init:function(){this["public"].innerHTML=a("./template.html"),this["public"].setAttribute("role","checkbox"),this.enableFastTouch(this["public"]),this.disabled=!1,c(this["public"],b.exports.attributes)},destroy:function(){this.handleEvent=void 0}}},{"../../shared/events.js":115,"../../shared/utils.js":118,"../common/fastTouch.js":14,"./template.html":64}],64:[function(a,b){b.exports="<span class=el-toggle-switch></span>"},{}],65:[function(a,b){var c,d,e=a("ecma5-extend"),f=a("path"),g=a("./elements"),h=a("../shared/error-utils.js"),i=a("./control/plugins"),j=function(a,b){return{configurable:!0,enumerable:!1,get:function(){var c=e.createType(b);return Object.defineProperty(this,a,{enumerable:!0,configurable:!0,writable:!1,value:c}),c.debug=(window.elsa.App||{}).debug,c}}},k=".//*[starts-with(local-name(), 'el-')]",l=function(a,b){for(var c=document.evaluate(k,a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),d=0;d<c.snapshotLength;d++)b(c.snapshotItem(d));c=void 0},m=function(a,b){for(var c=document.evaluate(k,a,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null),d=c.snapshotLength-1,e=d;e>=0;e--){var f=c.snapshotItem(e);b(f)}"EL-"===a.tagName.substring(0,3)&&b(a),c=void 0};c=b.exports={"public":{},parsing:!1,creationCompletedQueue:[],destructionQueue:[],destructionList:[],ignoreTypes:["page-content"],packageJSON:a("../../package.json"),registerElementType:function(a){var b=a.name.toLowerCase();"undefined"==typeof g[b]&&(e.isType(a)?Object.defineProperty(g,b,{configurable:!0,writable:!1,enumerable:!0,value:a}):Object.defineProperty(g,b,j(b,a)))},compileDocumentFragment:function(b,d,e){a("../core/control/index.js");b=b||{},d=d||window.elsa.App;var f={parentControl:d,require:b.require,sourcepath:b.sourcepath,routename:b.routename};return c._compileDocumentFragment(b,e,f)},_compileDocumentFragment:function(a,b,e){var f=document.createElement("div"),g=document.createDocumentFragment();if(b=b||{},"string"==typeof a)f.innerHTML=a;else if("function"==typeof a)try{f.innerHTML=a(b)}catch(i){h.log(i)}else{if(!(a instanceof window.Node))throw Error("elsa.compiler: Unable to compile unsupported parameter type "+typeof a+": "+a);f=a}var j=c.parsing,k=!0;if(c.parsing=!0,d&&(k=!d.create(1===f.childElementCount?f.firstElementChild:f,b,e)),k&&c.compileDOMTree(f,b,e),c.creationCompleted(j,f),f===a)return f;for(var l=f.firstChild;l;l=f.firstChild)g.appendChild(l);return g},destroyDOMNode:function(a){a&&-1===c.destructionList.indexOf(a)&&(c.destructionList.unshift(a),d&&d.destroy&&d.destroy(a)||c.destroyDOMTree(a))},destroyDocumentFragment:function(a){var b,d=0===c.destructionList.length;if(a instanceof window.HTMLCollection||a instanceof window.NodeList||Array.isArray(a)){for(var e=a.length-1;e>=0;e--){var f=a[e];b=f.parentNode,b&&b.removeChild(f)}for(e=0;e<a.length;e++)c.destroyDOMNode(a[e])}else a&&(b=a.parentNode,b&&b.removeChild(a),c.destroyDOMNode(a)),d&&(c.destructionList=[])},replaceDocumentFragment:function(a,b,d){c.destroyDocumentFragment(a.children);var e=c.compileDocumentFragment(b,d||a);a.appendChild(e)},precompileTemplate:function(a){return l(a,function(a){var b=a.tagName.toLowerCase().substring(3),c=g[b];c&&c.precompile&&c.precompile(a)}),a},compileDOMTree:function(a,b,d){var e,h,i=f.dirname(d.sourcepath);""===i&&(i="/");!c.parsing;c.parsing=!0;var j=1===a.childElementCount?a.firstElementChild:void 0,k=this.ignoreTypes;return l(a,function(f){var i=f.tagName.toLowerCase().substring(3),l=g[i];if(!l)return void(-1===k.indexOf(i)&&console.warn("No known type "+i));var m={},n=l===g.control||g.control.prototype.isPrototypeOf(l.prototype);j===f&&n&&(h=f,m=d,m.state=b),m.require=d.require,m.sourcepath=d.sourcepath,h&&f!==h?m.parentControl=h:f===j&&d&&d.parentControl&&(m.parentControl=d.parentControl),e=l.create(f,m),f===a&&(a=e),f===h&&(h=e),"import"!==i&&c.creationCompletedQueue.push(e)}),a},creationCompleted:function(a){if(!a){for(;c.creationCompletedQueue.length>0;){var b=c.creationCompletedQueue.shift();try{b.publish("creationCompleted")}catch(d){h.log(d)}}c.parsing=!1}},destroyDOMTree:function(a){var b,d=c.destructionQueue.length>0;if(m(a,function(a){"function"==typeof a.destroy&&-1===c.destructionQueue.indexOf(a)&&c.destructionQueue.unshift(a)}),!d){for(;void 0!==(b=c.destructionQueue.shift());)"function"==typeof b.destroy&&b.destroy();c.destructionList=[]}}},Object.defineProperties(c["public"],{templateCompiler:{get:function(){return d},set:function(a){d=a,d&&d.initialize({creationCompletedQueue:c.creationCompletedQueue,destructionQueue:c.destructionQueue})}},defaultTemplateType:{get:function(){return c.defaultTemplateType},set:function(a){c.defaultTemplateType=a}},plugins:{value:i},registerElement:{value:c.registerElementType},elements:{enumerable:!0,value:g},compile:{value:c.compileDocumentFragment},destroy:{value:function(a){return a.parentNode&&a.parentNode.removeChild(a),c.destroyDocumentFragment(a)}}})},{"../../package.json":4,"../core/control/index.js":66,"../shared/error-utils.js":114,"./control/plugins":67,"./elements":68,"ecma5-extend":1,path:3}],66:[function(a,b){var c=(a("../compiler.js"),a("../elements"),a("./plugins")),d=a("../../shared/error-utils.js"),e=a("path"),f=function(a){var b=a.split(":");return[b[0],b.slice(1).join(":")]};b.exports={name:"control",extend:HTMLElement,"public":{controller:{writable:!1},get:function(a){for(var b=this["public"].parentControl;b&&b!==document.body;b=b.parentControl)if(b.controller){var c=b.controller[a];if(c)return c}return void 0},parentControl:{get:function(){return this["protected"].parentControl}}},"protected":{creationCompleted:function(a){var b;if(Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log(Object.getPrototypeOf(this["public"]).constructor.name+"#"+this["protected"].routename+".creationCompleted"),this["protected"].lifecyclePhase="created",this.plugin){var c=this._controller;if(this._controller=void 0,this["protected"].require=this["protected"].require||window.require,c){var f=e.dirname(this["protected"].sourcepath);try{if(c=this["protected"].require(e.normalize(e.join(f,c))),!c){var g=new Error(Object.getPrototypeOf(this["public"]).constructor.name+"."+this["public"].routename+": Unable to find module "+c);
throw g.code="MODULE_NOT_FOUND",g}this.controller=this.plugin.controller.create(this["public"],c,{scheme:this.scheme,data:a||{}})}catch(h){"MODULE_NOT_FOUND"!==h.code?(this.controller=void 0,b=h):d.log(h)}}}if(b)throw b}},init:function(a){a=a||{},a.parentControl||(a.parentControl=window.elsa.App),this.scheme=a.scheme,this["protected"].parentControl=a.parentControl,this["protected"].lifecyclePhase="initialized",this["protected"].require=a.require,this["protected"].sourcepath=a.sourcepath;var b=a.controller||this["public"].getAttribute("controller")||this["public"].getAttribute("data-controller");if(b){var d=f(b),e=c.get(d[0]);e&&e.controller?(this._controller=d[1],this.scheme=d[0],this.plugin=e):(console.warn("unable to load scheme plugin for controller: "+b),this.controller=void 0)}Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("control#"+this.routename+".init",this.scheme,this._controller)},destroy:function(){this.controller&&this.plugin.controller.destroy(this["public"],this.controller),this.plugin=void 0,this.controller=void 0,this["protected"].parentControl=void 0}}},{"../../shared/error-utils.js":114,"../compiler.js":65,"../elements":68,"./plugins":67,path:3}],67:[function(a,b){var c={};b.exports={get:function(a){return c[a]},register:function(a,b){c[a]=b}}},{}],68:[function(a,b){b.exports={}},{}],69:[function(a,b){var c=a("ecma5-extend"),d=a("./compiler");window.Ecma5Extend||(window.Ecma5Extend=c),d["public"].registerElement(a("./control")),b.exports=Object.create(a("./elements"),{compiler:{enumerable:!0,value:d["public"]},utils:{enumerable:!0,value:{styles:a("./polyfill/styles")}},version:{enumerable:!0,value:d.packageJSON.version}}),d["public"].plugins.register("elsa",a("../plugins/elsa.js")),d["public"].plugins.register("jquery",a("../plugins/jquery.js")),d["public"].plugins.register("backbone",a("../plugins/backbone.js")),d["public"].plugins.register("angular",a("../plugins/angular.js"))},{"../plugins/angular.js":99,"../plugins/backbone.js":110,"../plugins/elsa.js":111,"../plugins/jquery.js":112,"./compiler":65,"./control":66,"./elements":68,"./polyfill/styles":76,"ecma5-extend":1}],70:[function(){if("function"!=typeof window.CustomEvent){var a={bubbles:!1,cancelable:!1,detail:void 0},b=function(b,c){c=c||a;var d=document.createEvent("CustomEvent");return d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail),d};b.prototype=window.CustomEvent?window.CustomEvent.prototype:window.Event.prototype,window.CustomEvent=b}},{}],71:[function(){function a(a,b){"firstElementChild"in b||Object.defineProperty(a,"firstElementChild",{get:function(){var a=this.firstChild;do{if(1===a.nodeType)return a;a=a.nextSibling}while(a);return null}}),"lastElementChild"in b||Object.defineProperty(a,"lastElementChild",{get:function(){for(var a=this.lastChild;a;){if(1===a.nodeType)return a;a=a.previousSibling}return null}}),"nextElementSibling"in b||Object.defineProperty(a,"nextElementSibling",{get:function(){for(var a=this.nextSibling;a;){if(1===a.nodeType)return a;a=a.nextSibling}return null}}),"previousElementSibling"in b||Object.defineProperty(a,"previousElementSibling",{get:function(){for(var a=this.previousSibling;a;){if(1===a.nodeType)return a;a=a.previousSibling}return null}}),"childElementCount"in b||Object.defineProperty(a,"childElementCount",{get:function(){for(var a=0,b=this.firstElementChild;b;)a++,b=b.nextElementSibling;return a}}),"children"in b||Object.defineProperty(a,"children",{get:function(){for(var a=[],b=this.firstElementChild;b;)a.push(b),b=b.nextElementSibling;return a}})}a(window.Node.prototype,document.createElement("div")),a(window.DocumentFragment.prototype,document.createDocumentFragment())},{}],72:[function(a){a("./CustomEvent.js"),a("./requestAnimationFrame.js")(["webkit","moz"]),a("./ParentNode.js"),a("./iosTouch.js")},{"./CustomEvent.js":70,"./ParentNode.js":71,"./iosTouch.js":73,"./requestAnimationFrame.js":75}],73:[function(){document.body.hasAttribute("ontouchstart")||document.body.setAttribute("ontouchstart","")},{}],74:[function(){!function(){if("undefined"==typeof window.performance&&(window.performance={}),!window.performance.now){var a=Date.now();window.performance.timing&&window.performance.timing.navigationStart&&(a=window.performance.timing.navigationStart),window.performance.now=function(){return Date.now()-a},window.performance.polyfilled=!0}}()},{}],75:[function(a,b){(function(c){a("./performance.now.js"),b.exports=function(a){void 0===a&&(a=["webkit","moz"]);for(var b="AnimationFrame",d=window["request"+b],e=c["cancel"+b]||c["cancelRequest"+b],f=0;f<a.length&&!d;f++)d=c[a[f]+"Request"+b],e=c[a[f]+"Cancel"+b]||c[a[f]+"CancelRequest"+b];if(!d||!e){var g=0,h=0,i=[],j=1e3/60;d=function(a){if(0===i.length){var b=window.performance.now(),c=Math.max(0,j-(b-g));g=c+b,setTimeout(function(){var a=i.slice(0);i.length=0;for(var b=0;b<a.length;b++)if(!a[b].cancelled)try{a[b].callback(g)}catch(c){}},c)}return i.push({handle:++h,callback:a,cancelled:!1}),h},e=function(a){for(var b=0;b<i.length;b++)i[b].handle===a&&(i[b].cancelled=!0)}}window.requestAnimationFrame=d,window.cancelAnimationFrame=e}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./performance.now.js":74}],76:[function(a,b){var c=["-ms-","-moz-","-webkit-"],d=["Moz"],e=document.createElement("div").style;b.exports={};var f=b.exports.resolveStyle=function(a){var f=a.replace(/-([a-z])/g,function(a,b){return b.toUpperCase()}),g=f.substr(0,1).toUpperCase()+f.substr(1);if(a in e)return void(b.exports[f]=a);var h=function(a,c,d){for(var f=a.length-1;f>=0;f--){var g=a[f]+c;if(g in e)return b.exports[d]=g,!0}},i=h(c,f,f)||h(d,g,f);if(!i)throw new Error("Unsupported Browser: no style support for "+a+"/"+f)},g={transition:"transitionend",webkitTransition:"webkitTransitionEnd",MozTransition:"transitionend"};f("transform"),f("transition"),f("transition-delay"),f("transition-duration"),f("transition-property"),f("transition-timing-function"),b.exports.transitionend=g[b.exports.transition],e=void 0},{}],77:[function(a,b){b.exports=a("./core/module"),"object"==typeof window&&(window.elsa=b.exports),a("./navigation/module"),a("./controls/module")},{"./controls/module":51,"./core/module":69,"./navigation/module":94}],78:[function(a,b){var c,d,e=window.Ecma5Extend,f=window.elsa.compiler.elements,g=window.elsa.utils.styles,h=f.control,i=a("../router"),j=a("./raf.js"),k=function(a){return a.split("?")[0]},l=function(a){var b=a.split("?");return 1===b.length?{}:i.paramsToObject(b[1])},m=function(a){return[k(a),l(a)]},n=0,o=function(b){return d||(d=a("../controls/pane")),d.getPrivate(b)["protected"]};b.scope={},Object.defineProperties(b.scope,{device:{get:function(){return this._device||(this._device=a("./device-detection").create()),this._device}},testdevice:{value:{type:"narrow",addListener:function(){},removeListener:function(){}}}});var p=function(){this.sceneTransitionListener&&(document.body.lastElementChild.removeEventListener(g.transitionend,this.sceneTransitionListener),this.sceneTransitionListener=void 0),this.scene&&window.elsa.compiler.destroy(this.scene),this.scene=void 0,c&&(window.removeEventListener("hashchange",this.onhashchange,!1),window.removeEventListener("popstate",this.onpopstate,!1),b.scope._device&&(b.scope._device.destroy(),b.scope._device=void 0),c=!1),Object.defineProperty(this["public"],"destroy",{configurable:!0,writable:!0})};b.exports=e.createType({name:"app",extend:e.createType(h),"public":{router:i,device:{writable:!1},registerRoutes:i.registerRoutes,defaultroute:"",debug:{set:function(a){this.debug=a;for(var b in f)f[b].debug=a}},testmode:{set:function(b){b=!!b,this.testmode!==b&&(this.testmode=b,this.testmodeStylesheet||(document.head.insertAdjacentHTML("beforeend",'<style type="text/css" disabled="true">'+a("./testmode.inc")+"</style>"),this.testmodeStylesheet=document.head.lastElementChild),this.testmodeStylesheet.disabled=!b,this.updateDevice())}},updateRoute:function(a){if(!this.navigatingTo){var b,c=a?"replaceState":"pushState";if(this.scene&&this.scene.__id){var d=o(this.scene).getCompoundRoute();this.updateRoute(c,d,void 0,"navigation")}else b=window.location.href.substr(0,window.location.href.indexOf("#"))+"#",window.location.href!==b&&(this["public"].debug&&console.log("App.updateRoute "+c+" ''"),"pushState"===c&&(this.state={prev:window.location.hash.slice(1),index:this.state.index+1}),window.history[c](this.state,"app:///",b)),this.navigatingTo=""}},navigateTo:function(a,b){this.navigateTo(a,void 0,b,"navigation")},scene:{set:function(a){if(a&&a instanceof window.DocumentFragment){if(1!==a.childElementCount)throw TypeError("scene must be 1 DOM node");a=a.firstElementChild}if(a=a||void 0,a&&!a.__id)return void console.error("Unable to set uninstantiated scene");if(a!==this.scene){if(this["public"].debug>1&&console.log("APP.scene.set begin"),a){if(f.page.prototype.isPrototypeOf(a)){var b=document.createElement("el-stack");b.appendChild(a),b.setAttribute("default-route",a.routename),f.stack.create(b,{require:o(a).require,sourcepath:o(a).sourcepath}),b.publish("creationCompleted"),a=b}this.scene||a.classList.add("el-fade-out"),this.scene&&this.scene.parentElement===document.body?document.body.insertBefore(a,this.scene):document.body.appendChild(a)}var c=this,d=this.scene||a;this.oldscene=this.scene,this.scene=a;var e=c["public"].debug,h=this.oldscene,i=function(a){if("opacity"===a.propertyName){d.removeEventListener(g.transitionend,i),e>1&&console.log("APP.scene.transitionend","==> "+h.routename);var b=c.sceneTransitionListeners.indexOf(i);-1!==b&&c.sceneTransitionListeners.splice(b,1),c.sceneTransitionEnd(h),b>0&&c.sceneTransitionListeners[b-1](a)}};h?(this.sceneTransitionListeners.push(i),h.classList.contains("el-fade-out")?(this["public"].debug>2&&console.log("APP.scene.no-transition",h.routename+" ==> "+(a?a.routename:"")),i({propertyName:"opacity"})):(this["public"].debug>2&&console.log("APP.scene.transition",h.routename+" ==> "+(a?a.routename:"")),d.addEventListener(g.transitionend,i)),h.classList.add("el-fade-out")):this["public"].debug>2&&console.log("APP.scene.skiptransition","==> "+(a?a.routename:"")),this.sceneRafId=this["public"].requestUniqueAnimationFrame(this,"scene",this.sceneNavigationFrame,[a,h]),this["public"].debug>1&&console.log("APP.scene.set end")}this.navigatingTo||this["public"].updateRoute()}},activePage:{get:function(){if(!this.scene)return void 0;return"EL-DRAWER"!==this.scene.tagName?"EL-STACK"===this.scene.tagName?this.scene.top:this.scene:this.scene.activeItem?this.scene.activeItem.stack.top:void 0}},currentRoute:{get:function(){if(this.navigatingTo){var a=this.navigatingTo;return"/"!==a[0]&&(a="/"+a),a}if(!this.scene||!this.scene.__id)return"";var b=o(this.scene).getCompoundRoute();return 0===b.length?"":"/"+i.compoundRouteToString(b)}},previousRoute:{get:function(){if(this.navigatingTo){if(this.scene&&this.scene.__id){var a=o(this.scene).getCompoundRoute();if(0!==a.length)return"/"+i.compoundRouteToString(a)}return""}return this.state?this.state.prev:""}},addEventListener:function(a,b,c){return document.body.addEventListener(a,b,c)},removeEventListener:function(a,b,c){return document.body.removeEventListener(a,b,c)},initialize:function(){var d,e=window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:Date.now();b.exports.debug&&console.log("elsa.start",e),c||(window.addEventListener("hashchange",this.onhashchange,!1),window.addEventListener("popstate",this.onpopstate,!1),this.updateDevice(),void 0===c&&(a("../../core/polyfill"),a("./viewport")()),this.testmodeStylesheet||(document.head.insertAdjacentHTML("beforeend",'<style disabled="true">'+a("./testmode.inc")+"</style>"),this.testmodeStylesheet=document.head.lastElementChild,this.testmodeStylesheet.disabled=!this.testmode),c=!0);var f,g=arguments,h=[],j={};if("undefined"==typeof g[0]&&""===b.exports.defaultroute)throw new Error("App.defaultroute hasn't been set, and no route passed to elsa.initialize()");if("string"==typeof g[0]&&(b.exports.defaultroute=g[0],g=Array.prototype.slice.call(g,1)),Array.isArray(g[0]===!0))h=g[0],j=g[1];else if("function"==typeof g[0])h.push(g[0]);else{var k=g[0],l={};for(var m in k)f=k[m],k[m]={path:f.sourcepath,href:m,name:m},l[m]=f,h.push(f);i.registerRoutes(k,function(a){return l[a]})}var o={},p={};h.forEach(function(a){var b=i.getRouteForPath(a.sourcepath);if(!b){var c="scene"+n++;b={name:c,path:a.sourcepath,href:c},o[b.name]=b,p[b.path]=a}}),i.registerRoutes(o,function(a){return p[a]}),g.length>1?b.exports.defaultroute=b.exports.defaultroute||g[1]:h.length>0&&(b.exports.defaultroute=b.exports.defaultroute||i.getRouteForPath(h[0].sourcepath).name),b.exports.debug>1&&console.log("elsa.App.defaultroute",b.exports.defaultroute),""===window.location.hash&&h.length>0?b.exports.navigateTo(void 0,void 0,!0,"hashchange"):b.exports.navigateTo(window.location.hash.replace(/^#/,""),void 0,!1,"hashchange"),b.exports.debug&&(d=window.performance&&window.performance.now&&window.performance.timing?window.performance.now()+window.performance.timing.navigationStart:Date.now(),console.log("elsa.end",d))}},"private":{updateDevice:function(){var a=this.device;this.device=b.scope[this.testmode?"testdevice":"device"],a!==this.device&&a===b.scope._device&&(a.destroy(),b.scope._device=void 0),this.testmode?(document.body.classList.remove("wide","wider","widest"),document.body.classList.add("narrow")):"narrow"!==this.device.type&&(document.body.classList.remove("narrow"),document.body.classList.add(this.device.type))},sceneNavigationFrame:function(a,b){this.sceneRafId=void 0,!b&&a&&a.classList.remove("el-fade-out"),a&&a.__id&&o(a).visible()},sceneTransitionEnd:function(a){a&&a.parentElement===document.body&&(document.body.removeChild(a),"function"==typeof a.destroy&&window.elsa.compiler.destroy(a),a===this.oldscene&&(this.oldscene=void 0))},navigateTo:function(a,c,d,e){if(this.navigatingTo)return 1;var g=[];a=a||"",this.scene&&!this.scene.__id&&(this.scene=void 0),this.scene?g=o(this.scene).getCompoundRoute():c&&(g=c.split("/").map(m));var h=this.processRouteInput(a,d,g);d=h.replace,a=h.routeString;var j=i.compoundRouteToString(g),k=new CustomEvent("navigation",{cancelable:!0,bubbles:!0,detail:a});if(k.oldRoute=j,k.newRoute=a,!document.body.dispatchEvent(k))return 1;k.newRoute!==a&&(h=this.processRouteInput(a,d,g),d=h.replace,a=h.routeString),this.navigatingTo=a;var l=a.split("/"),n=!1,p=!1;try{""===l[0]&&l.shift();var q=l[l.length-1];if(q||l.pop(),0===l.length)return void(this["public"].scene=void 0);l=l.map(m);var r=l[0];if(this.scene)if(g=o(this.scene).getCompoundRoute(),this.scene.routename===r[0])n=!0;else{var s=g[0];n=s&&s[0]===r[0]}else c&&(g=c.split("/").map(m));if(this["public"].debug&&console.log("App.navigateTo","/"+l.map(function(a){return Object.getOwnPropertyNames(a[1]).length>0?a[0]+"?"+i.objectToParams(a[1]):a[0]}).join("/"),c?"["+c+"]":""),n){this["public"].debug>1&&console.log("App.navigateTo reusing scene "+this.scene.routename);var t=o(this.scene);t.setCompoundRoute({route:l,index:0,source:this.testmode?"hashchange":e})}else{var u=i.loadModule(r[0],r[1],this["public"],l);if(!u)throw i.RouteErrorEvent.create("routeerror",{cancelable:!0,bubbles:!0},{source:document.body,head:"",route:r[0],state:r[1],message:"Unable to find module for route: "+r[0]});if(u instanceof window.DocumentFragment){if(1!==u.childElementCount)throw TypeError("scene must be 1 DOM node");u=u.firstElementChild}if(f.page.prototype.isPrototypeOf(u)){var v=a&&"/"===a[0]?a.slice(1):a,w=document.createElement("el-stack");w.setAttribute("data-defaultroute",v),w.appendChild(u),w=f.stack.create(w),w.publish("creationCompleted"),w.defaultroute=b.exports.defaultroute,u=w}this["public"].scene=u,b.exports.debug&&console.log("App.sceneCreated"),u.publish("route",l)}}catch(x){if(!i.RouteErrorEvent.prototype.isPrototypeOf(x))throw console.warn(x.stack),x;var y=x.source||document.body,z=y.dispatchEvent(x);if(z){if(this.state&&this.state.prev&&d)window.history.back();else if(g.length>0){var A=i.compoundRouteToString(g),B=window.location.href.substr(0,window.location.href.indexOf("#"))+"#/"+A;window.history.replaceState(this.state,"app://"+A,B)}else window.location.hash="#";throw x}p=!0}finally{if(!p){var C=!n;l=this.scene&&this.scene.__id?o(this.scene).getCompoundRoute():[],d?C=!1:d===!1?C=!0:n&&g.length===l.length&&(C=!l.every(function(a,b){return a[0]===g[b][0]})),this.updateRoute(C?"pushState":"replaceState",l,c,e)}this.navigatingTo=void 0,this.scene&&this.scene.__id&&"EL-STACK"===this.scene.tagName&&this.scene.publish("visible")}},updateRoute:function(a,b,c,d){var e=i.compoundRouteToString(b);e.length>0&&(e="/"+e);var f=window.location.hash.slice(1);if(c===e){if(f===e)return;a="replaceState"}var g=window.location.href.substr(0,window.location.href.indexOf("#"))+"#"+e,h=window.location.href!==g;if(h&&(this["public"].debug&&console.log("App.updateRoute "+a,e),"pushState"===a&&(this.state={prev:f,index:this.state.index+1}),window.history[a](this.state,"app://"+e,g)),h||"hashchange"===d){var j=new CustomEvent("urlchange",{cancelable:!1,bubbles:!0,detail:e});j.oldRoute=f,j.currentRoute=e,document.body.dispatchEvent(j)}},processRouteInput:function(a,b,c){if(a)if("/"!==a[0]){b=window.location.hash==="#"+a;var d=i.compoundRouteToString(c);a=d+"/"+a}else b=window.location.hash==="#"+a;else;return a&&"/"!==a||(b=window.location.hash==="#"+a,a=this.defaultroute||""),{replace:b,routeString:a}},hashchange:function(a){var b,c=a.newURL.indexOf("#")+1;c>0&&a.oldURL.slice(0,c)===a.newURL.slice(0,c)?b=a.oldURL.slice(c):(c=a.oldURL.indexOf("#"),b=-1===c?"":a.oldURL.slice(c)),this.popstate||(this.state={prev:b,index:0}),this.popstate=void 0,this.debug>1&&console.log("App.onhashchange",this.state);var d=a.newURL.slice(c);this.navigateTo("/"===d?"":d,b,void 0,"hashchange")}},init:function(){this.scene=void 0,this.state={prev:"",index:0};var a=this;this.device=b.scope.testdevice,this.onhashchange=function(b){return a.hashchange(b)},this.onpopstate=function(b){b.state&&(a.state=b.state,a.popstate=!0,a["public"].debug>1&&console.log("App.onpopstate",a.state))},this.sceneTransitionListeners=[],Object.defineProperty(this["public"],"destroy",{configurable:!0,value:p.bind(this)})},destroy:function(){}}).create(),Object.defineProperties(b.exports,{requestAnimationFrame:{value:j.requestAnimationFrame},cancelAnimationFrame:{value:j.cancelAnimationFrame},requestUniqueAnimationFrame:{value:j.requestUniqueAnimationFrame},destroy:{configurable:!0,writable:!0}})},{"../../core/polyfill":72,"../controls/pane":91,"../router":97,"./device-detection":79,"./raf.js":80,"./testmode.inc":81,"./viewport":82}],79:[function(a,b){var c=window.Ecma5Extend,d={"(max-width: 769px), (orientation: portrait)":"narrow","(max-width: 1031px) and (min-width: 770px) and (orientation: landscape)":"wide","(max-width: 1293px) and (min-width: 1032px) and (orientation: landscape)":"wider","(min-width: 1294px) and (orientation: landscape)":"widest"},e=[],f=[],g={name:"App.device","public":{type:{writable:!1},addListener:{value:function(a){e.push(a)}},removeListener:{value:function(a){for(var b=0;b<e.length;b++)a===e[b]&&(e[b]=void 0)}}},"private":{setDevice:function(a){a.matches?(this.type=d[a.media],document.body.classList.add(this.type),console.log("deviceDetection.type",this.type)):document.body.classList.remove(d[a.media]),a.matches&&this.executeMatches(e,this.type)},executeMatches:function(a,b){for(var c=0;c<a.length;c++)"function"==typeof a[c]&&a[c](b)}},init:function(){this.boundSetDevice=this.setDevice.bind(this);for(var a in d){var b=window.matchMedia(a);d[b.media]=d[a],this.setDevice(b,!0),b.addListener(this.boundSetDevice),f.push(b)}return this},destroy:function(){for(var a=0;a<f.length;a++)f[a].removeListener(this.boundSetDevice);f=[],this.boundSetDevice=void 0}};"undefined"!=typeof b?b.exports=c.createType(g):window.device=c.createType(g)},{}],80:[function(a,b){var c,d,e=function(a){var b=d||[];c=void 0,d=void 0;for(var e=b.length,f=[a],g=0;e>g;g++){var h=b[g];h.callback.apply(h.self,h.arguments?h.arguments.concat(f):f)}};b.exports={requestAnimationFrame:function(a,b,f){1===arguments.length&&(f=b,b=a,a=window);var g={callback:"function"==typeof b?b:a[b],self:a,arguments:f};return c?d.push(g):(c=window.requestAnimationFrame(e),d=[g]),c<<6|63&d.length},cancelAnimationFrame:function(a){if(c)if("number"==typeof a){var b=a>>6,e=(63&a)-1;c===b&&(d.splice(e,1),0===d.length&&(window.cancelAnimationFrame(c),c=void 0))}else for(var f=d.length-1;f>=0;f--){var g=d[f];g.self===a&&d.splice(f,1)}},requestUniqueAnimationFrame:function(a,b,f,g){var h={callback:"function"==typeof f?f:a[f],self:a,arguments:g,uid:b};if(c){for(var i=d.length-1;i>=0;i--){var j=d[i];if(j.uid===b&&j.self===a)return d[i]=h,(c<<6)+i+1}d.push(h)}else c=window.requestAnimationFrame(e),d=[h];return(c<<6)+d.length}}},{}],81:[function(a,b){b.exports="el-dialog,\nel-drawer, .el-drawer-items, el-drawer::after\nel-page, el-page::after,\nel-stack, el-stack::after,\nel-toast,\nel-toggle, .el-toggle-switch,\n.el-overlay,\n.el-overflow-menu, .el-overflow-menu-container, .el-overflow-menu-wrapper,\n.el-swipe-container,\n.el-tabs-nav-item,\n.el-signature-action-bg, .el-signature-action-wrapper, .el-signature-action-overlay,\nbutton, .btn, .btn-danger, .btn-success, .btn-warning, .btn-primary {\n    transition: 0.001ms linear !important;\n}\n\nel-action, .el-action {\n    transition-duration: 0.001ms !important;\n    transition-delay: 0ms !important;\n}\n\nel-page {\n    background-color: lightgrey !important;\n}\n\nel-page.animate-in, el-page.animate-out,\n.el-modal-container.animate-in, .el-modal-container.animate-out,\n.el-modal-inner-container.animate-in, .el-modal-inner-container.animate-out,\n.el-modal-overlay.animate-in, .el-modal-overlay.animate-out {\n    transition-duration: 0.001ms !important;\n    transition-delay: 0ms !important;\n}"},{}],82:[function(a,b){b.exports=function(){var a="",b={width:"device-width","initial-scale":1,"maximum-scale":1,"user-scalable":"no"};for(var c in b){var d=b[c];a+=c+"="+d+", "}var e=document.createElement("meta");e.setAttribute("name","viewport"),e.setAttribute("content",a.substring(0,a.length-2)),document.head.appendChild(e)}},{}],83:[function(a,b){var c,d=window.Ecma5Extend,e=window.elsa.utils.styles,f=a("../../app/app.js"),g=(a("../../router"),a("path"),window.elsa.compiler.elements,a("../../../shared/overlayTouch.js")),h=function(b){return c||(c=a("../pane")),c.getPrivate(b)["protected"]},i=function(a){return a?h(a.stack):void 0},j="el-drawer > :not(.el-drawer-items) ";b.exports={name:"drawer",extend:d.createType(a("../pane")),tagName:"el-drawer","public":{itemSelector:"el-draweritem",items:{get:function(){return this["public"].querySelectorAll(j+this.itemSelector)}},activeItem:{set:function(a){var b;if(this.navigating)return void console.warn("elsa.drawer: unable to set active item during a routing operation to "+(a&&a.routename));if(a!==this.activeItem){if(a){var c=Array.prototype.slice.apply(this["public"].items).indexOf(a);-1===c&&this["public"].querySelector("nav").appendChild(a),this.setActiveItem(a,{invisible:!this["public"].visible}),b=this.activeItem.stateid}else{var d=this.activeItem;this.activeItem=void 0,b=void 0,f.requestAnimationFrame(this,function(){d.stack.classList.add("el-hidden"),d.classList.remove("active-item")})}this["protected"].pushState({item:b},!0)}}},mode:{set:function(a){a=a.toLowerCase(),-1!==["closed","compact","open","auto"].indexOf(a)&&(this.items.classList.remove("el-drawer-mode-"+this.mode),this.items.classList.add("el-drawer-mode-"+a),this.mode=a)}},visualState:{set:function(a){"toggle"===a&&(a="open"===this.visualState?"closed":"open");var b=this;if("open"===a){if(this.opened)return;f.requestAnimationFrame(this,function(){this.items.classList.add("el-overlay"),this["public"].classList.add("pre-open"),f.requestAnimationFrame(this,function(){this.overlayTouch.enableOverlayTouch(this.items,this.nav),this.items.classList.add("fade-in"),this["public"].classList.add("open")})}),this.opened=!0}else{if(!this.opened)return;var c=function(a){a.propertyName===e.transform&&(this.removeEventListener(e.transitionend,c),b["public"]&&(b.items.classList.remove("el-overlay"),b["public"].classList.remove("pre-open")))};this["public"].addEventListener(e.transitionend,c),this.items.classList.remove("fade-in"),this["public"].classList.remove("open"),this.overlayTouch.disableOverlayTouch(),this.opened=!1}this.removeFocus(),this.visualState=a}},addItem:function(a){this.nav.appendChild(a)},removeItem:function(a){this.nav.removeChild(a),a.stack.pop(Array.prototype.slice.call(a.stack.children))}},"protected":{getCompoundRoute:function(){var a=this["super"]["protected"]("getCompoundRoute")[0],b=this.activeItem,c=[],d=i(b);return c=d?d.getCompoundRoute():[],c.unshift(a),c},setCompoundRoute:function(a){var b,c=!0,d=a.route,e=a.index=a.index||0,f=d[e];this.navigating=!0,f||(f=[this["public"].routename,{item:0}],d[e]=f),this["super"]["protected"]("setCompoundRoute",a),b=this.resolveItem(f);try{c=this.setActiveItem(b,a)}catch(g){throw b&&b!==this.activeItem&&b.classList.remove("active-item"),this.navigating=!1,g}finally{this.navigating=!1}return b?this["public"].state.item=b.stateid:delete this["public"].state.item,c},stateChange:function(a,b){var c=a.state.item!==(a.oldstate||{}).item;if(this["super"]["protected"]("stateChange",a,c||b),a.update&&"item"in a.state||a.oldstate&&a.state.item!==this.activeItem.stateid){var d=this.resolveItem([void 0,this["public"].state]);if(c=d!==this.activeItem,c&&d){var e=Array.prototype.slice.apply(this["public"].items).indexOf(d);-1===e&&this["public"].querySelector("nav").appendChild(d),this.setActiveItem(d,{}),a.state.item=d.stateid}else c&&delete a.stateitem}}},"private":{resolveItem:function(a){{var b,c,d=a[1].item;parseInt(d)}if(d){c=this["public"].querySelectorAll(j+this.itemSelector);for(var e=c.length-1;e>=0;e--)if(c[e].stateid===d){b=c[e];break}}else;return b||(b=this["public"].querySelector(j+this.itemSelector))?(b.stateid!==d&&this["public"].constructor.debug&&console.log("drawer.resolve.redirect"),b):void 0},setActiveItem:function(a,b){{var c=this.activeItem,d=b.route,e=b.index;b.animate}d||(d=b.route=[[this["public"].routename,this["public"].state]],this["public"].state&&(this["public"].state.item=a.stateid),e=0);var g=i(a),h=!0,j=c!==a;return this.activeItem=a,a?(b.index=e+1,j&&(b.source="hashchange"),b.route[b.index]?h=g.setCompoundRoute(b):j&&"destroy"===a.memoryManagementStrategy?g.setCompoundRoute(b):0===a.stack.length&&(b.source="hashchange",g.setCompoundRoute(b))):d.splice(e+1,1/0),j&&(this.setActiveItemRafId?(f.cancelAnimationFrame(this.setActiveItemRafId),c&&c.stack&&c.stack.parentNode&&(this.runActiveItemFinisher(c,c.stack,b),c.stack.classList.remove("el-fade-out"))):this.transitionActiveItem,g["public"].classList.add("el-fade-out"),g["public"].classList.remove("el-hidden"),this.items.insertBefore(g["public"],c&&c.stack.parentNode?c.stack:null),this.setActiveItemRafId=f.requestAnimationFrame(this,this.setActiveItemRaf,[a,c,g,b.invisible])),h},setActiveItemRaf:function(a,b,c,d){if(b){var e=b.stack;this.runActiveItemFinisher(b,e,d),b.stack.classList.add("el-fade-out"),b.classList.remove("active-item")}a.classList.add("active-item"),c["public"]&&c["public"].classList.remove("el-fade-out"),this.opened&&(this["public"].visualState="closed"),c.visible&&c.visible(),this.setActiveItemRafId=void 0},runActiveItemFinisher:function(a,b,c){var d=this;if(!b.classList.contains("el-hidden")){var f=function(c){if("opacity"===c.propertyName&&d.items){b.removeEventListener(e.transitionend,f),"hide"!==a.memoryManagementStrategy&&b.parentNode===d.items&&d.items.removeChild(b),b.classList.add("el-hidden"),b.classList.remove("el-fade-out"),"hide"===a.memoryManagementStrategy&&d.items.insertBefore(b,d.items.firstElementChild);var g=h(b);g.invisible(),"destroy"===a.memoryManagementStrategy&&(g.drawerCompoundRoute=g.getCompoundRoute(),g.setCompoundRoute({route:[],index:0,noTransition:!0}))}};c?f({propertyName:"opacity"}):b.addEventListener(e.transitionend,f)}},removeFocus:function(){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur()},onOverlayTriggered:function(){this["public"].visualState="closed"},onDeviceResize:function(a){!this.opened||"wider"!==a&&"widest"!==a||(this["public"].visualState="closed")}},init:function(){this.visualState="closed",this.mode="auto",this.anonItemCount=0,this.animationFrameIds={},this.items=document.createElement("div"),this.items.classList.add("el-drawer-mode-auto"),this.overlayTouch=new g(void 0,this.onOverlayTriggered.bind(this)),this.items.classList.add("el-drawer-items"),this.nav=this["public"].querySelector("nav"),this.nav||(this.nav=document.createElement("nav"),this["public"].appendChild(this.nav),Array.prototype.slice.call(this["public"].children,0,-1).forEach(function(a){this.nav.appendChild(a)}));var a=this;this.onNavTriggered=function(b){if(!b.defaultPrevented){var c=b.target||b.currentTarget;"EL-DRAWERITEM"===c.tagName&&(a["public"].activeItem=c,a["public"].visualState="closed")}},this.nav.addEventListener("trigger",this.onNavTriggered),this["public"].appendChild(this.items),this.opened=this.items.classList.contains("pre-open")?!0:!1,this.boundOnDeviceResize=this.onDeviceResize.bind(this),f.device.addListener(this.boundOnDeviceResize)},destroy:function(){f.cancelAnimationFrame(this),this.activeItemRAFTimeout&&clearTimeout(this.activeItemRAFTimeout),this.overlayTouch=this.overlayTouch.destroy(),this.overlayTouch=void 0,this.nav.removeEventListener("trigger",this.onNavTriggered),this.animationFrameIds=void 0,this.items=void 0,this.nav=void 0,this.activeItem=void 0,f.device.removeListener(this.boundOnDeviceResize)}}},{"../../../shared/overlayTouch.js":117,"../../app/app.js":78,"../../router":97,"../pane":91,path:3}],84:[function(a,b){var c=window.elsa.compiler,d=a("path"),e=a("../../router"),f=a("../../../shared/error-utils.js");b.exports={name:"import",extend:HTMLElement,resolveImport:function(a,b,c){if(b){var g,h=b,i=d.dirname(a||"/");if(i&&"."===b[0]&&(h=d.normalize(d.join(i,b))),!c){var j=e.getRouteForPath(h);c=j?j.require:window.require||e.xhr.require}try{g=c(h)}catch(k){f.log(k)}return g}},init:function(a){a=a||{};var d,g=a.href||this["public"].getAttribute("href");try{d=b.exports.resolveImport(a.sourcepath,g,a.require)}catch(h){e.RouteErrorEvent.prototype.isPrototypeOf(h)?console.error("elsa.import: unable to load module "+g+": "+h.message):f.log(h)}if(d){delete a.href,a.require=d.require||a.require,a.sourcepath=d.sourcepath||a.sourcepath;var i=c.compile(d,a.parentControl,a.state);this["public"].parentElement.replaceChild(i,this["public"]),this["public"].destroy()}},destroy:function(){}}},{"../../../shared/error-utils.js":114,"../../router":97,path:3}],85:[function(a,b){var c=window.Ecma5Extend,d=(window.elsa.compiler,window.elsa.compiler.elements,a("../../app/app.js")),e=a("../stack/index.js"),f=(a("../../../shared/utils"),function(){}),g={push:f,pop:f,popTo:f,length:0},h=a("./paneltypes/default"),i={"default":h,get:function(a){return i[a]||h}},j=function(a,b){Object.setPrototypeOf(b,h),i[a]=b};j("fullscreen",a("./paneltypes/fullscreen")),j("anchor",a("./paneltypes/anchor")),j("modal",a("./paneltypes/modal")),b.exports={name:"page",extend:c.createType(a("../pane")),mixinExtended:[a("../../../shared/content")],events:["pop","visible","invisible"],registerPanelType:j,"public":{stack:{get:function(){var a=this["public"].parentElement;return a&&"EL-STACK"!==a.tagName&&(a=a.parentElement,a&&"EL-STACK"!==a.tagName&&(a=a.parentElement,a&&"EL-STACK"!==a.tagName&&(a=a.parentElement,a&&"EL-STACK"!==a.tagName&&(a=void 0)))),a||(a=g),a}},paneltype:{get:function(){return this["public"].getAttribute("data-paneltype")?this["public"].getAttribute("data-paneltype"):"large"}},adaptive:{get:function(){return"false"!==this["public"].getAttribute("data-adaptive")
},set:function(a){a?this["public"].removeAttribute("data-adaptive"):this["public"].setAttribute("data-adaptive","false")}},navigateTo:function(a,b){if("/"===a[0])return void d.navigateTo(a,b);"."!==a[0]&&(a="./"+a);var c=this["public"].stack;if(!c)return console.warn("Navigation is only available for pages in a stack"),void elsa.App.navigateTo(a,b);var f=e.getPrivate(c);f&&f["protected"]&&f["protected"].navigateTo(this["public"],a,b,"navigation")},toast:function(a){var b=elsa.toast.create(a);this["public"].appendChild(b),b.open()},contentSelector:"el-page-content"},"protected":{creationCompleted:function(){this["super"]["protected"]("creationCompleted");var a=this["public"].getAttribute("data-paneltype")||this["public"].getAttribute("paneltype"),b=Object.create(i.get(a));b.page=this["public"],b.container=b.init(),this["protected"].layout=b}},init:function(){this["public"].classList.add("el-stack-item")},destroy:function(){this["protected"].layout.container=void 0,this["protected"].layout.page=void 0,this["protected"].layout=void 0}}},{"../../../shared/content":113,"../../../shared/utils":118,"../../app/app.js":78,"../pane":91,"../stack/index.js":92,"./paneltypes/anchor":86,"./paneltypes/default":87,"./paneltypes/fullscreen":88,"./paneltypes/modal":90}],86:[function(a,b){b.exports={insert:function(a){var b=this.page;this.appendChild(a,this.container),a.parent=this.container,a.nextElementSibling=this.container.firstElementChild,this.appendChild(a,b),a.index+=1,a.parent=this.previewContainer,a.nextElementSibling=a.parent.firstElementChild},remove:function(){this.container.parentNode.removeChild(this.container),this.page.parentNode.removeChild(this.page)},getVisibleContainers:function(a){var b=this.container.lastElementChild.lastElementChild;return b&&b.classList.contains("animate-out")&&(b=b.previousElementSibling),b?"narrow"===a?[b]:[this.page,b]:[this.page]},init:function(){var a=document.createElement("div");a.classList.add("el-anchor-container","el-stack-item");var b=document.createElement("div");return b.classList.add("el-anchor-preview-container","el-anchor-placeholder","el-stack-container"),a.appendChild(b),this.previewContainer=b,a}}},{}],87:[function(a,b){b.exports={insert:function(a){this.appendChild(a,this.page),a.index+=1,a.nextElementSibling=this.page.nextElementSibling},remove:function(){this.page.parentNode.removeChild(this.page)},getVisibleContainers:function(){return[this.container]},appendChild:function(a,b){a.nextElementSibling!==b&&a.parent.insertBefore(b,a.nextElementSibling)},init:function(){return this.page}}},{}],88:[function(a,b){b.exports={insert:function(a){for(;"EL-STACK"!==a.parent.tagName&&!a.parent.classList.contains("el-modal-inner-container");)a.nextElementSibling=a.parent.nextElementSibling,a.parent=a.parent.parentElement;this.appendChild(a,this.page),a.index+=1,a.nextElementSibling=this.page.nextElementSibling}}},{}],89:[function(a,b){b.exports='<div class="el-modal-container el-stack-item"><div class=el-modal-overlay></div><div class="el-modal-inner-container el-stack-container"></div></div>'},{}],90:[function(a,b){var c=a("./modal.html");b.exports={insert:function(a){for(var b=this.page;"EL-STACK"!==a.parent.tagName;)a.nextElementSibling=a.parent.nextElementSibling,a.parent=a.parent.parentElement;this.appendChild(a,this.container),a.parent=this.container.lastElementChild,a.nextElementSibling=a.parent.firstElementChild,this.appendChild(a,b),a.index+=1,a.nextElementSibling=b.nextElementSibling},remove:function(){this.container.parentNode.removeChild(this.container),this.page.parentNode.removeChild(this.page)},getVisibleContainers:function(a){var b=this.container.lastElementChild.lastElementChild;if("narrow"===a)return[b];var c=this.container.previousElementSibling;return c?[b,c]:[b]},init:function(){var a=document.createElement("div");return a.innerHTML=c,a.firstElementChild}}},{"./modal.html":89}],91:[function(a,b){var c=(window.Ecma5Extend,window.elsa.compiler,window.elsa.control),d=a("../../app/app.js"),e=a("../../router"),f=a("../../../shared/error-utils.js"),g=a("../../../shared/utils"),h=a("../../../shared/events.js"),i=function(a){var b={};for(var c in a){var d=a[c];null===d?b[c]=d:void 0!==d&&(b[c]=d.toString())}return b};b.exports={name:"pane",extend:c,visible:h.createEventType("visible",{bubbles:!1,cancelable:!1}),invisible:h.createEventType("invisible",{bubbles:!1,cancelable:!1}),statechange:h.createEventType("statechange",{bubbles:!1,cancelable:!1}),"public":{visible:{writable:!1},state:{writable:!1},routename:{writable:!1},updateState:function(a){var b=!1;for(var c in a){var d=a[c];void 0===d?(this.state&&delete this.state[c],b=!0):this.state&&this.state[c]===d||(this.state||(this.state={}),this.state[c]=d,b=!0)}b&&(this.statechange?console.warn(Object.getPrototypeOf(this["public"]).constructor.name+".updateState() called during a statechange event"):this.stateChange({state:a,update:!0}))},replaceState:function(a,b){var c={state:a,oldstate:this.state},d=!e.compareStates(this.state,a);if(d){if(this.statechange)throw new Error(Object.getPrototypeOf(this["public"]).constructor.name+".replaceState() called during a statechange event");this.state=a,this.stateChange(c,b&&"created"===this["protected"].lifecyclePhase),b&&(this.state=i(a))}}},"protected":{routename:void 0,visible:function(a){if(this.visible)return!1;this.visible=!0;var c=Object.getPrototypeOf(this["public"]).constructor;return c.debug&&console.log(c.name+"#"+this["public"].routename+".visible"),a||this["public"].dispatchEvent(b.exports.visible()),!0},invisible:function(a){if(!this.visible)return!1;var c=Object.getPrototypeOf(this["public"]).constructor;return c.debug&&console.log(c.name+"#"+this["public"].routename+".invisible"),this.visible=!1,a||this["public"].dispatchEvent(b.exports.invisible()),!0},pushState:function(a,b){var c=this.state;if(this.state=a,!this.statechange){if(b){var f=i(a);if(this.publishStateChange({state:a,oldstate:c}),a=i(a),e.compareStates(a,f))this.state=a;else{var g={state:a,oldstate:f};this.state=a,this.stateChange(g)}}d.updateRoute(!b)}},updateRoute:function(a){this.statechange||"created"!==this["protected"].lifecyclePhase||d.updateRoute(a)},getCompoundRoute:function(){return this["protected"].routename?[[this["protected"].routename,this.state]]:void 0},setCompoundRoute:function(a){var b=a.route;b||(a.route=b=[]);var c=a.index=a.index||0,d=b[c];if(d){if(d[0]!==this["protected"].routename&&""!==d[0])throw new Error("control.route.InvalidRoute "+this["protected"].routename+": "+b);if("initialized"===this["protected"].lifecyclePhase||!e.compareStates(d[1],this.state)){var f={state:d[1],oldstate:this.state};this.state=f.state,this.statechange||(this.publishStateChange(f),this.state=i(f.state))}}else d=[this["protected"].routename,this["public"].state||{}];b[c]=d},stateChange:function(a,b){var c=Object.getPrototypeOf(this["public"]);c.debug>1&&console.log(c.constructor.name+"#"+this["protected"].routename+" stateupdate",a),this.statechange||"created"!==this["protected"].lifecyclePhase||(d.updateRoute(!0),b&&this.publishStateChange(a))},creationCompleted:function(){var a;try{this["super"]["protected"]("creationCompleted",this.state)}catch(b){a=b}a&&f.log(a)},route:function(a){Object.getPrototypeOf(this["public"]).constructor.debug&&console.log(Object.getPrototypeOf(this["public"]).constructor.name+"#"+this["protected"].routename+".ready"),a=a?{route:a}:e.stringToCompoundRoute(this["protected"].defaultroute||""),a.invisible=!this.visible,this["protected"].setCompoundRoute(a)},resolveRoute:function(a){var b=a.routename||g.getAttribute(this["public"],"routename");if(!b){var c=e.getRouteForPath(a.sourcepath);c&&(b=c.name)}return b},resolveDefaultRoute:function(a){var b;return b=a.state?this["public"].routename+"?"+e.objectToParams(a.state):this["public"].routename}},"private":{publishStateChange:function(a){var c=Object.getPrototypeOf(this["public"]).constructor;c.debug&&console.log(c.name+"#"+this["protected"].routename+" statechange",a),this.statechange=!0;var d=b.exports.statechange(a);this["public"].dispatchEvent(d),this.statechange=void 0},stateChange:function(a,b){return this["protected"].blockStateChange?(this.state=a.state,void console.warn("elsa.control["+Object.getPrototypeOf(this["public"]).constructor.name+"]: internal recursive bug (don't call pane.updateState() during a statechange event, instead modify the state parameter of the event):",a,b)):(this["protected"].blockStateChange=!0,this["protected"].stateChange(a,b),void(this["protected"].blockStateChange=!1))}},init:function(a){if(a=a||{},this["protected"].sourcepath=a.sourcepath,this.visible=!1,this.routename=this["protected"].resolveRoute(a),!this.routename){{Object.getPrototypeOf(this["public"]).constructor.name}throw new Error("No router entry was found for "+this["protected"].sourcepath+". Please specify a routename attribute OR register this route using elsa.App.registerRoutes.",this["public"])}this["protected"].defaultroute=this["protected"].resolveDefaultRoute(a)},destroy:function(){this.state=void 0,this.compoundRoute=void 0}}},{"../../../shared/error-utils.js":114,"../../../shared/events.js":115,"../../../shared/utils":118,"../../app/app.js":78,"../../router":97}],92:[function(a,b){var c=window.Ecma5Extend,d=window.elsa.compiler,e=window.elsa.compiler.elements,f=(window.elsa.utils.styles,a("../../router")),g=a("../../app/app.js"),h=a("../../../shared/utils"),i=a("../../../shared/events"),j=a("../pane/index.js"),k=a("./navigation.js"),l=0;b.exports={name:"stack",extend:c.createType(j),pop:i.createEventType("pop",{cancelable:!0}),"public":{top:{writable:!1,get:function(){return this.pages[this.pages.length-1]}},length:{writable:!1,get:function(){return this.pages.length}},pages:{writable:!1,get:function(){return this.pages.slice()}},defaultroute:{get:function(){return this["protected"].defaultroute},set:function(a){this["protected"].defaultroute=a}},pop:function(a,b){var c,d,e=this["public"].pages.slice(),h=[],i=function(a){var b=e.indexOf(a);if(-1===b)throw Error("Page "+(a?a.routename:"<unknown>")+" is not part of this stack");return b};if("[object Array]"===Object.prototype.toString.call(a))h=a.map(i);else if("boolean"==typeof b)h=[i(a)];else if("boolean"==typeof a)b=a;else{h=Array.prototype.slice.call(arguments);var j=h[h.length-1];b="boolean"==typeof j?h.pop():!1,h=h.map(i)}if(!h.length){if(0===e.length)return console.warn("No pages in the stack to pop"),!1;h.push(e.length-1)}if(1===h.length&&h[0]===e.length-1){var k=f.stringToCompoundRoute(window.location.hash.slice(2));if(k.pop(),g.previousRoute){var l=f.stringToCompoundRoute(g.previousRoute.slice(1)),m=!1;if(l.length===k.length){var n,o,p=l.length;for(m=!0,d=0;m&&p>d;d++)n=l[d],o=k[d],m=n[0]===o[0]}}}h=h.sort();var q=this["protected"].getCompoundRoute(),r=q.slice();for(d=0;d<r.length;d++)r[d].__id=e[d].__id;for(d=h.length-1;d>=0;d--)r.splice(h[d],1);var s={route:r,routeIndex:0,source:b||g.testmode?"hashchange":"navigation"},t=this["protected"].setCompoundRoute(s,q);return this["protected"].updateRoute(c),t},push:function(a,b,c){b&&(a=a+"?"+f.objectToParams(b));var d=c||g.testmode?"hashchange":"navigation";return this["protected"].navigateTo(this.pages[this.pages.length-1],a,!1,d)},popTo:function(a,b){if("number"!=typeof a&&(a=Array.prototype.slice.call(this["public"].pages).indexOf(a)),0>a||a>this["public"].childElementCount-1)throw new Error("Invalid page supplied, perhaps it is not in the stack?");if(a+1===this["public"].childElementCount)return!1;b=b;var c=this["protected"].getCompoundRoute(),d=c.slice(0,a+1),e=this["protected"].setCompoundRoute({route:d,routeIndex:0,source:b||g.testmode?"hashchange":"navigation"},c);return this["protected"].updateRoute(),e}},"protected":{navigateTo:function(a,b,c){var d=Array.prototype.slice.call(this["public"].pages).indexOf(a),e=this["protected"].getCompoundRoute();"."===b[0]&&"/"===b[1]&&(b=b.slice(2)),-1===d&&(d=e.length-1);var h=e.slice(0,d+1).concat(f.stringToCompoundRoute(b)),i=this["protected"].setCompoundRoute({route:h,routeIndex:0,source:g.testmode?"hashchange":"navigation"},e);return this["protected"].updateRoute(c),i},visible:function(){var a=this["super"]["protected"]("visible",!!this["public"].parentControl);a&&this.applyVisible(g.device.type)},invisible:function(){var a=this["super"]["protected"]("invisible",!!this["public"].parentControl);if(a)for(var b=this.visiblePages.length-1;b>=0;b--)j.getPrivate(this.visiblePages[b])["protected"].invisible()},getCompoundRoute:function(){for(var a=[],b=this.pages.length-1;b>=0;b--){var c=this.pages[b],d=j.getPrivate(c);a=d["protected"].getCompoundRoute().concat(a)}return a},setCompoundRoute:function(a,b){var c=a.route,d=a.index=a.index||0,e=this["public"].pages;c.length-d===0&&this["protected"].defaultroute&&c.splice.apply(c,[d,0].concat(f.stringToCompoundRoute(this["protected"].defaultroute))),b||(b=Array.apply(Array,this["protected"].getCompoundRoute()));var g={};b.forEach(function(a,b){g[b]=a});var h,i,j,k,l,m,n=new Array(c.length-d);for(h=0;h<c.length-d;h++){k=c[d+h],j=k[0],l=k[1];for(i in g)if(m=g[i],j===m[0]&&f.compareStates(m[1],l)){var o;if(k.__id){for(var p=0;p<e.length;p++)if(e[p].__id===k.__id){o=p;break}if(void 0===o)continue}else o=b.indexOf(m);n[h]={index:o},delete g[i];break}}for(h=0;h<c.length-d;h++)if(!n[h]){k=c[d+h],j=k[0];for(i in g)if(m=g[i],j===m[0]){n[h]={index:b.indexOf(m),update:!0},delete g[i];break}}return Object.getPrototypeOf(this["public"]).constructor.debug>1&&console.log("stack.route",f.compoundRouteToString(c),n),this.applyRouteChange(b,n,a,e)},resolveRoute:function(a){var b=this["super"]["protected"]("resolveRoute",a);return b||(b="stack-anon"+l++),b},resolveDefaultRoute:function(a){var b=a.defaultroute||h.getAttribute(this["public"],"defaultroute"),c=this["public"].querySelector("el-page");return b||c&&(b=c.routename),b}},"private":{createPage:function(a,b,c){b||(b=this["public"].parentControl);var d=f.loadModule(a[0],a[1],b);if(!d){var e=f.RouteErrorEvent.init({route:a[0],head:f.compoundRouteToString(c||[]),state:a[1],message:"Unable to find module for route "+a[0],source:this["public"]});throw e}return d instanceof window.DocumentFragment&&(d=d.querySelector("el-page")),d.publish("route",[a]),d},isAnimationAllowed:function(a,b,c){if("hashchange"===c.source)return!1;var d=b.length===a.length-1,e=b.length===a.length+1;return d||e?d?"pop":"push":!1},actionsContainPage:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(d&&d.index===b)return!0}return!1},applyRouteChange:function(a,c,d,e){var f,h,i,k,l=g.device.type,m=d.route,n=!0;e=e||[];var o=new Array(a.length),p=new Array(a.length),q=a.length;for(h=q-1;h>=0;h--){var r=!this.actionsContainPage(c,h);if(r){if(k=e[h],!k.dispatchEvent(b.exports.pop())){for(n=!1,m.splice.apply(m,[d.index,m.length].concat(a.slice(0,h+1))),c=new Array(h+1),f=0;f<c.length;f++)c[f]={index:f};for(p=new Array(a.length),f=h+1;q>f;f++)p[f]=e[f];break}p[h]=k}}var s=m.length-d.index,t={pages:new Array(s),deviceType:l,destroy:[]},u=this["public"];for(f=0;s>f;f++){var v=c[f];if(v){h=v.index,k=e[h];var w=j.getPrivate(k)["protected"];w.parentControl=u,v.update&&w.pushState(m[d.index+f][1],!0)}else i=m[d.index+f],k=this.createPage(i,u,m.slice(0,d.index+f+1)),o[f]=k;u=k,t.pages[f]=k}for(u=void 0,t.transition=this.isAnimationAllowed(a,c,d),this.navigation&&!this.navigation.transition&&this.finishNavigation(this.navigation),this["public"].classList.add("transitioning"),"push"===t.transition&&(t.target=t.pages[s-1],t.targetLayout=j.getPrivate(t.target)["protected"].layout,t.targetLayout.container.classList.add("animate-in-from","animate-in")),h=0;q>h;h++)if(k=p[h])if("pop"===t.transition&&h===q-1)t.target=k,t.targetLayout=j.getPrivate(k)["protected"].layout,t.targetLayout.container.classList.add("animate-out"),t.destroy.push(k);else{k.__id?(j.getPrivate(k)["protected"].layout.remove(),t.destroy.push(k)):k.parentNode&&k.parentNode.removeChild(k)}for(var x={pages:t.pages,parent:this["public"],index:0,nextElementSibling:this["public"].firstElementChild};x.index<s;)j.getPrivate(x.pages[x.index])["protected"].layout.insert(x);return this.pages=t.pages,this.postNavigation(t,m),n},updateVisiblePages:function(a,b){var c=[],d=this["public"].lastElementChild;for(b=b||[];-1!==b.indexOf(d);)d=d.previousElementSibling;for(var f=d?[d]:[];f.length>0;){var g=f.shift();if(e.page.prototype.isPrototypeOf(g))c.unshift(g);else for(var h=g.querySelector("el-page"),i=j.getPrivate(h)["protected"].layout.getVisibleContainers(g,a),k=i.length-1;k>=0;k--){var l=i[k];-1===b.indexOf(l)&&f.push(l)}}this.visiblePages=c},applyVisible:function(){for(var a=this.visiblePages.length-1;a>=0;a--){var b=this.visiblePages[a];b.__id?j.getPrivate(b)["protected"].visible():this.visiblePages.splice(a,1)}},applyInvisible:function(){for(var a=this.pages.length,b=0;a>b;b++){var c=this.pages[b];-1===this.visiblePages.indexOf(c)&&(c.__id?j.getPrivate(c)["protected"].invisible():this.visiblePages.splice(b,1))}}},init:function(a){a=a||{},this.pages=Array.prototype.slice.call(this["public"].querySelectorAll("el-page")),this["public"].classList.add("el-stack-container"),this.visiblePages=[];var b=this;this.onDeviceTypeChanged=function(a){b["public"].visible&&g.requestAnimationFrame(b,function(){this.updateVisiblePages(a),g.requestAnimationFrame(this,function(){this.applyVisible(),this.applyInvisible()})})},g.device.addListener(this.onDeviceTypeChanged)},destroy:function(){g.device.removeListener(this.onDeviceTypeChanged),this.navigation&&this.finishNavigation(this.navigation),d.destroy(this.pages),this.visiblePages=void 0,this.pages=void 0,this.onDeviceTypeChanged=void 0,this.transitionEndHandler=void 0,this.navigation=void 0,g.cancelAnimationFrame(this)}};for(var m in k["private"])b.exports["private"][m]=k["private"][m]},{"../../../shared/events":115,"../../../shared/utils":118,"../../app/app.js":78,"../../router":97,"../pane/index.js":91,"./navigation.js":93}],93:[function(a,b){var c=(window.elsa.utils.styles,a("../../app/app.js")),d=(a("../pane/index.js"),{Idle:{navigate:"Start"},Start:{frame:"Transition",cancel:"Idle"},Transition:{transitionend:"Idle",cancel:"Idle"}}),e=function(a,b){var c=d[a.navigationState],e=c&&c[b];if(e){var f=a.navigationState;return Object.getPrototypeOf(a["public"]).constructor.debug&&console.log("stack.navigationState ("+b+") "+f+" => "+e),a.navigationState=e,!0}},f="transitionend";b.exports={"private":{navigationState:"Idle",postNavigation:function(a){e(this,"navigate",a)&&(this.navigation=a,this["public"].classList.add("transitioning"),this.pageTransitionRafId=c.requestAnimationFrame(this,function(a){if(!a.target){if(!e(this,"frame"))return;return this.pageTransitionRafId=void 0,void this.finishNavigation(this.navigation)}this.pageTransitionRafId=c.requestAnimationFrame(this,this.postNavigationFrame,[a])},[a]))},postNavigationFrame:function(a){if(e(this,"frame")){this.pageTransitionRafId=void 0;this.navigationStarted(a);var b=this,d=a.targetLayout.container,g=this.transitionEndHandler=function(e){return e.target!==d?void(Object.getPrototypeOf(b["public"]).constructor.debug>1&&console.warn(e)):(d.removeEventListener(f,b.transitionEndHandler),void(b.postPageTransitionRafId=c.requestAnimationFrame(b,b.navigationTransitionEnd,[a])))};d.addEventListener(f,g),this.transitionTarget=d,"push"===a.transition?d.classList.remove("animate-in-from"):"pop"===a.transition&&d.classList.add("animate-out-to"),Object.getPrototypeOf(this["public"]).constructor.debug&&console.log("stack.navigation.Animation",a.transition,a.target.routename+JSON.stringify(a.target.state))}},navigationTransitionEnd:function(a){e(this,"transitionend")&&this.navigationEnded(a)},finishNavigation:function(a){e(this,"cancel")&&(this.pageTransitionRafId&&c.cancelAnimationFrame(this.pageTransitionRafId),this.transitionTarget?(this.transitionTarget.removeEventListener(f,this.transitionEndHandler),this.transitionEndHandler=void 0):this.postPageTransitionRafId?(c.cancelAnimationFrame(this.postPageTransitionRafId),this.postPageTransitionRafId=void 0):this.navigationStarted(a),"push"===a.transition?a.targetLayout.container.classList.remove("animate-in","animate-in-from"):"pop"===a.transition&&a.targetLayout.container.classList.remove("animate-out","animate-out-to"),this.navigationEnded(a))},pushTransitionEnd:function(a){a.targetLayout.container.classList.remove("animate-in")},popTransitionEnd:function(a){a.targetLayout.remove(),a.target=void 0},navigationStarted:function(a){var b=this["public"].visible,c=[];b&&"pop"===a.transition&&(c=[a.target]),this.updateVisiblePages(a.deviceType,c),b&&this.applyVisible()},navigationEnded:function(a){this.postPageTransitionRafId=void 0,"push"===a.transition?this.pushTransitionEnd(a):"pop"===a.transition&&this.popTransitionEnd(a),this.navigation=void 0,this.transitionTarget=void 0,this.transitionEndHandler=void 0,this.navigation!==a&&this["public"].classList.remove("transitioning"),this["public"].visible&&this.applyInvisible(),setTimeout(function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c&&c.__id&&window.elsa.compiler.destroy(c)}},0,a.destroy)}}}},{"../../app/app.js":78,"../pane/index.js":91}],94:[function(a,b){if("undefined"==typeof window.elsa)throw Error("elsa-compiler must be loaded before elsa-core");var c=window.elsa.compiler;c.registerElement(a("./controls/page")),c.registerElement(a("./controls/stack")),c.registerElement(a("./controls/drawer")),c.registerElement(a("./controls/import")),Object.defineProperties(window.elsa,{App:{enumerable:!0,writable:!1,value:a("./app/app.js")},compile:{value:c.compile},destroy:{value:c.destroy}}),b.exports=window.elsa},{"./app/app.js":78,"./controls/drawer":83,"./controls/import":84,"./controls/page":85,"./controls/stack":92}],95:[function(a,b){b.exports=window.Ecma5Extend.createType({name:"RouteErrorEvent",extend:window.CustomEvent,"public":{base:{writable:!1},route:{writable:!1},state:{writable:!1},source:{writable:!1},message:{writable:!1},toString:function(){return Object.getPrototypeOf(this["public"]).constructor.name+": "+this.message}},init:function(a,b,c){for(var d in c)this[d]=c[d];if(!this.stack)try{throw Error()}catch(e){var f=e.stack.split("\n");f.splice(0,2,"RouteErrorEvent"),this["public"].stack=f.join("\n")}}})},{}],96:[function(require,module,exports){module.exports=function(code,require){var module={},exports;return Object.defineProperty(module,"exports",{get:function(){return exports},set:function(a){exports=a}}),eval(code),exports}},{}],97:[function(a,b){var c,d=window.elsa.compiler,e=a("path"),f=a("../../shared/error-utils.js"),g=a("./xhr-require.js"),h=a("./error.js"),i={},j={};Object.defineProperties(h,{init:{configurable:!0,value:function(a){return h.create.call(this,"routeerror",{bubbles:!0,cancelable:!0},a)}}});var c=b.exports={RouteErrorEvent:h,xhr:g,objectToParams:function(a){var b=[];for(var c in a){var d=a[c];b.push(null===d||void 0===d?c:c+"="+d)}return b.join("&")},paramsToObject:function(a){if(""===a)return{};var b={};return a.split("&").forEach(function(a){var c=a.split("=");b[c[0]]=c.length>1?c[1]:null}),b},stringToCompoundRoute:function(a){return a.split("/").map(function(a){var b=a.split("?");return[b.shift(),c.paramsToObject(b.join("?"))]})},compoundRouteToString:function(a){return a.map(function(a){var b=c.objectToParams(a[1]);return b.length>0?a[0]+"?"+b:a[0]}).join("/")},compareStates:function(a,b){if(!a||!b)return a===b;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(var e=c.length-1;e>=0;e--)if(a[c[e]]!==b[d[e]])return!1;return!0},registerRoutes:function(a,b,d){if(arguments.length<3&&"function"!=typeof b){var e={};for(var f in a){var h=a[f];e[f]={path:h,href:h,name:f}}return c.registerRoutes(e,g.require,d)}for(var k in a){var l=a[k];k.indexOf("/")>=0&&(k=k.replace("/","")),"string"==typeof l&&(l={path:l}),l.name=l.name||k,l.require=b,l.href=l.href||l.path,i[k]=l,j[l.path]=l}},getRouteForPath:function(a){return j[a]},resolveRoute:function(a,b){if(b){var d,f;return"/"===b[0]?f=c.getRouteForPath(b):(a&&("."===b[0]&&(d=e.normalize(e.join(e.dirname(a),b))),f=c.getRouteForPath(d)),f||(d=e.resolve("/"+b),f=c.getRouteForPath(d))),f}},getModule:function(a){return i[a]},loadModule:function(a,b,c){var e,g=i[a];if(!g)throw Error("elsa.router: Route not registered '"+a+"'");try{e=g.require(g.href)}catch(h){return void f.log(h)}var j=e;if(void 0===e)throw Error("elsa.router: Module not found '"+a+"' from  '"+(g.path||g.href)+"'");return e="function"!=typeof e?function(){return j}:function(a,b,c,d,e,f,g){return j(a,b,c,d,e,f,g)},e.sourcepath=e.sourcepath||g.path,e.require=e.require||g.require,e.routename=a,d.compile(e,c)}}},{"../../shared/error-utils.js":114,"./error.js":95,"./xhr-require.js":98,path:3}],98:[function(a,b){var c=a("path"),d=a("./eval.js"),e=(a("./error.js"),function(a){return a}),f=function(a){return window._.template(a)};b.exports={transforms:{js:d,json:JSON.parse,html:e,jst:f,tmpl:f},require:function(a){var d=new XMLHttpRequest;d.open("GET",a,!1);try{d.send(null)}catch(e){}if(4!==d.readyState||0===d.status||!(d.status<200||d.status>=300)){var f=/[^.]*$/.exec(a)[0].toLowerCase(),g=b.exports.transforms[f];if(g)return g(d.response,function(d){return"."===d[0]&&(d=c.normalize(c.join(c.dirname(a),d))),b.exports.require(d)});throw new Error("No known require shim for file type: ."+f)}}}},{"./error.js":95,"./eval.js":96,path:3}],99:[function(a,b){if(window.angular){var c=window.angular;c.module("elsa",["ngRoute","ngLocale"]),a("./angular/ngRoute/ngRoute.js"),a("./angular/ngHref/ngHref.js"),c.module("elsa").run(function(b){var c=window.elsa.compiler.plugins.get("angular");c.controller.injector=b,window.elsa.compiler.templateCompiler=c.compiler,window.elsa.list.templateType=window.elsa.list.templateType||a("../controls/list/templates/engines/angular.js")()}),a("./angular/directives/events.js"),a("./angular/directives/simple.js"),a("./angular/directives/pane.js"),a("./angular/directives/list.js"),b.exports={compiler:a("./angular/compiler.js"),controller:{create:function(){},destroy:function(){}}}}},{"../controls/list/templates/engines/angular.js":45,"./angular/compiler.js":100,"./angular/directives/events.js":102,"./angular/directives/list.js":103,"./angular/directives/pane.js":104,"./angular/directives/simple.js":105,"./angular/ngHref/ngHref.js":106,"./angular/ngRoute/ngRoute.js":108}],100:[function(a,b){var c=window.angular,d=a("./scopeutil.js");b.exports={defaultTemplateType:"angular",DISABLEDdefaultTemplater:{engine:"angular",parse:function(a){return a},bind:function(a,b,d){var e=c.element(b).scope();if(e)e.$apply(function(a){a[a.listValueIdentifier]=d});else{var f=window.elsa.compiler.plugins.get("angular").controller.injector;f.invoke(function(f){var g=c.element(a);e=g.scope().$new(),e.$apply(function(a){a[a.listValueIdentifier]=d}),f(b)(e)})}},clear:function(){},create:function(a,b){var d=c.element(document.createElement("li"));d.html(b);{var e,f=window.elsa.compiler.plugins.get("angular").controller.injector;c.element(a).scope()}return f.invoke(function(a){e=a(d)}),d[0]},destroy:function(a,b){var d=c.element(b);d.scope().destroy(),d.remove()}},create:function(a,c,e){var f=window.angular.element(a);if(f.data("params",e),f.data("state",c),e.sourcepath){var g=window.elsa.App.router.getRouteForPath(e.sourcepath);f.data("routename",g.name)}var h,i,j=window.elsa.compiler.plugins.get("angular").controller.injector;if(j){{b.exports.compiler.creationCompletedQueue.length>0}j.invoke(function(b,c){var f=e.parentControl;f&&(h=window.angular.element(f).scope()),h||(h=b),i=window.angular.element(a),d.apply(h,function(){var a=c(i);a(h)})},this)}else console.warn("elsa.angular: Unable to get injector from document. Did you initialize angular?");return!0},initialize:function(a){b.exports.compiler=a},compiler:void 0}},{"./scopeutil.js":109}],101:[function(a,b){var c=window.angular,d=(c.module("elsa"),a("../../../shared/utils")),e=(a("../scopeutil.js"),a("../compiler.js")),f=function(){var a=this,b=c.element(a),d=b.scope();if(Object.defineProperty(a,"destroy",{configurable:!0,value:void 0}),d&&d.hasOwnProperty("$route")){var e=["$route","$routeParams","navigateTo"],f=b.children().data("params");f&&(f.parentControl=void 0),d.$route&&Object.defineProperty(d.$route,"pane",{value:void 0,configurale:!0}),b.children().remove(),e.forEach(function(a){Object.defineProperty(d,a,{configurable:!0,value:void 0})}),d.$destroy(),d=void 0}else-1!==["EL-ACTION"].indexOf(a.tagName);var g=["statechange","$destroy"];g.forEach(function(a){b.off(a)}),b.remove(),b=void 0,Object.getPrototypeOf(a).destroy.call(a),a=void 0};b.exports=function(a,b,c,g,h){var i=c.tagName.slice(3).toLowerCase();"routename"in g&&b[0].setAttribute("data-routename",g.routename);var j=elsa[i],k=b.inheritedData("params")||{};if(k.state=b.data("state"),j.attributes&&d.contains("stateid",j.attributes)){var l=g.stateid||g.label;b[0].setAttribute("data-stateid",d.slugify(l))}if(b[0]=c=j.create(c,k),"import"===j.name)return{};var m={sourcepath:k.sourcepath,require:k.require,parentControl:c};return b.children().data("params",m),b.one("$destroy",function(){if(this.destroy){var a=this;h(function(){a.destroy&&a.destroy()},0)}}),e.compiler.creationCompletedQueue.push(c),Object.defineProperty(c,"destroy",{configurable:!0,value:f}),{attributes:j.attributes,events:j.events,modelDrivenAttribute:j.modelDrivenAttribute,typename:i,bindings:["destroy"],eventHandlers:["$destroy"]}}},{"../../../shared/utils":118,"../compiler.js":100,"../scopeutil.js":109}],102:[function(a){var b=a("../scopeutil.js"),c=window.angular.module("elsa"),d=function(a){return{restrict:"A",priority:0,compile:function(c,d){for(var e=a(d.elOn)(),f=Object.keys(e),g=f.length,h=0;g>h;h++)e[f[h]]=a(e[f[h]]);return function(a,c){for(var d=c[0],h=function(c){b.apply(a,function(){e[c.type](a,{$event:c})})},i=0;g>i;i++)d.addEventListener(f[i],h);c.one("$destroy",function(){for(var a=0;g>a;a++)d.removeEventListener(f[a],h)})}}}};c.directive("elOn",["$parse",d])},{"../scopeutil.js":109}],103:[function(a){function b(a){return{restrict:"E",priority:998,require:"?ngModel",compile:function(b,f){return function(b,g,h,i){var j=f.listRepeat,k=g[0];if(k.nodeType===e&&"number"!=typeof k.__id){{Object.create(g.inheritedData("params")||{}),d(b,g,k,h,a)}if(!j)return g;var l=k,m=j.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!m)throw new Error("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",j);{var n=m[1],o=m[2],p=m[3];m[4]}if(m=n.match(/^(?:([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\))$/),!m)throw new Error("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",n);{var q=m[3]||m[1];m[2]}if(p&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(p)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(p)))throw new Error("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",p);g.scope().listValueIdentifier=q;var r=function(a,b){var c=parseInt(b);c=c||"string"==typeof b&&0===b.indexOf("[")?JSON.parse(b):b,l[a]=c},s=[];for(var t in h)-1!==window.elsa.list.attributes.indexOf(t)&&s.push(h.$observe(t,r.bind(void 0,t)));if(i){i.$render=function(){l.selectedIndices=i.$viewValue};var u=function(){c.apply(b,function(){i.$setViewValue(l.selectedIndices)})};l.addEventListener("selected",u)}return b.$watchCollection(o,function(a){l.collection=a}),g.one("$destroy",function(){l.removeEventListener("selected",u),s.forEach(function(a){a()}),s.length=0}),g}}}}}var c=a("../scopeutil.js"),d=a("./create.js"),e=(window.angular,1);b.$inject=["$timeout"],window.angular.module("elsa").directive("elList",b)},{"../scopeutil.js":109,"./create.js":101}],104:[function(a){function b(a){a.stopPropagation()}function c(){return this.$route.pane.state}function d(a,b){"."!==a[0]?elsa.App.navigateTo(a,b):this.$route.pane.navigateTo(a,b)}function e(a,d,e,f,g,h,i){var k=m(a,d,e,f,i);
return k.eventHandlers.statechange=function(a){console.log("PANE.$routeChangeSuccess",a.target.__id===e.__id,e.routename,JSON.stringify(e.state));var b=j.element(this).scope();b?l.apply(b,function(){b.$emit("$routeChangeSuccess",a.state)}):console.warn("NO SCOPE")},Object.defineProperties(a,{$routeParams:{get:c,configurable:!0},$route:{value:Object.create(h,{pane:{configurable:!0,value:e}}),configurable:!0}}),d[0].addEventListener("statechange",k.eventHandlers.statechange),a.$on("$routeChangeSuccess",b),d.one("$destroy",function(){d[0].removeEventListener("statechange",k.eventHandlers.statechange)}),k}function f(a,b,c){return{restrict:"E",priority:980,scope:!0,controller:function(b,f,g,h){var i=f[0];if(i.nodeType===n&&"number"!=typeof i.__id){{e(b,f,i,g,h,a,c)}return Object.defineProperties(b,{navigateTo:{configurable:!0,value:d},pop:{configurable:!0,value:function(){return i.stack.pop.apply(i.stack,arguments)}},toast:{configurable:!0,value:function(){return i.toast.apply(i,arguments)}}}),f}}}}function g(a,b){return{restrict:"E",priority:980,scope:!1,controller:function(c,d,f,g){var h=d[0];if(h.nodeType===n&&"number"!=typeof h.__id){{e(c,d,h,f,g,a,b)}return d}}}}function h(a,b){return{restrict:"E",priority:980,scope:!1,controller:function(c,d,f,g){var h=d[0];if(h.nodeType===n&&"number"!=typeof h.__id){{e(c,d,h,f,g,a,b)}return d}}}}function i(a){return{restrict:"E",priority:980,scope:!1,controller:function(b,c,d){var e=c[0];if(e.nodeType===n&&"number"!=typeof e.__id){{m(b,c,e,d,a)}return c}}}}var j=window.angular,k=j.module("elsa"),l=a("../scopeutil.js"),m=a("./create.js"),n=1;f.$inject=["$route","$compile","$timeout"],g.$inject=["$route","$timeout"],h.$inject=["$route","$timeout"],i.$inject=["$timeout"],k.directive("elDrawer",g),k.directive("elStack",h),k.directive("elPage",f),k.directive("elTab",i)},{"../scopeutil.js":109,"./create.js":101}],105:[function(a){var b=window.angular,c=b.module("elsa"),d=a("../scopeutil.js"),e=a("./create.js"),f=function(a,b,c){var d=function(a){return"string"==typeof c[a]&&b.attributes&&-1!==b.attributes.indexOf(a)},e=function(b){return c.$observe(b,function(c){a[b]=c})};return Object.keys(c).filter(d).map(e)},g=function(a){a()},h=function(a,b){var c=1;return{restrict:"E",priority:980,scope:!1,require:"?ngModel",compile:function(){return function(a,h,i,j){var k=h[0];if(k.nodeType===c&&"number"!=typeof k.__id){var l=e(a,h,k,i,b),m=f(k,l,i);if(h.one("$destroy",function(){m.forEach(g)}),l.modelDrivenAttribute&&i.ngModel){var n=l.modelDrivenAttribute.attr,o=l.modelDrivenAttribute.event;j.$render=function(){k[n]=j.$viewValue};var p=function(){j.$setViewValue(k[n])},q=function(){d.apply(a,p)};k.addEventListener(o,q),h.one("$destroy",function(){k.removeEventListener(o,q)}),p()}return h}}}}};h.$inject=["$parse","$timeout"],["Bar","Control","Draweritem","Action","Import","ExpandableAction","Tabs","Toggle","Activityindicator","Header","Dialog","Refresher"].forEach(function(a){c.directive("el"+a,h)})},{"../scopeutil.js":109,"./create.js":101}],106:[function(){var a=new RegExp("^[^/]*:|^#"),b=function(){function b(b){return!a.test(b)}return{restrict:"A",priority:100,link:function(a,c,d){var e=function(c){b(d.href)&&(c.preventDefault(),a.navigateTo(d.href))};c.bind("click",e),a.$on("$destroy",function(){c.unbind("click",e)})}}};window.angular.module("elsa").directive("ngHref",[b])},{}],107:[function(a,b){b.exports=["$rootScope",function(a){elsa.App.addEventListener("urlchange",function(b){a.$broadcast("$locationChangeSuccess",b.currentRoute,b.oldRoute)}),elsa.App.addEventListener("navigation",function(b){a.$broadcast("$locationChangeStart",b.newRoute,b.oldRoute).defaultPrevented&&b.preventDefault()});var b=function(a){return a?elsa.App.navigateTo(a):elsa.App.currentRoute};return{absUrl:function(){return window.location.href},url:b,path:b,hash:b,protocol:function(){return window.location.protocol},host:function(){return window.location.host},port:function(){return window.location.port},replace:function(){console.warn("Unsupported api: elsa does not support $location.replace()")},state:function(){console.warn("Unsupported api: elsa does not support $location.state()")},search:function(){console.warn("Unsupported api: elsa does not support $location.search()")}}}]},{}],108:[function(a){function b(){var a={};this.when=function(){return this},this.otherwise=function(a){return elsa.App.defaultRoute=a,this},this.$get=function(){var b={routes:a,reload:window.location.reload,updateParams:function(a){if(!this.pane)throw d("norout","Tried updating route when with no current route");this.pane.updateState(a)},replaceParams:function(a,b){if(!this.pane)throw d("norout","Tried updating route when with no current route");this.pane.replaceState(a,b)}};return Object.defineProperties(b,{params:{get:function(){return this.pane?this.pane.state:{}}},current:{get:function(){return this.pane?this.pane.routename:void 0}}}),b},this.$get.$inject=["$rootScope","$injector"]}var c=window.angular,d=(window.angular.module("ngRoute",["ng"]).config(function(b,c){var d=Object.create(c,{$get:{value:a("./location.js")}});b.provider("$location",d)}),window.angular.$$minErr("ngRoute"));c.module("ngRoute").provider("$routeParams",{$get:function(){return{}}}),window.angular.module("ngRoute").provider("$route",b)},{"./location.js":107}],109:[function(a,b){b.exports={apply:function(a,b){a.$$phase?b():a.$apply(b)}}},{}],110:[function(a,b){var c=function(a,b){return function(c,d,e,f,g){b(a,this,c,d,e,f,g)}};b.exports={controller:{create:function(a,b,c){return b?new b({el:a,data:c.data}):void console.warn("Unable to load backbone module: "+b)},destroy:function(a,b){b.remove(),b.unbind()}},collection:{change:function(a,b,c){a.publish("change",c.changedAttributes(),b.indexOf(c))},add:function(a,b,c,d,e){a.publish("add",c,e.at)},remove:function(a,b,c,d,e){a.publish("remove",c,e.index)},get:function(a,b,c){return b.at(c).attributes},indexOf:function(a,b,c){return b.indexOf(c)},length:function(a,b){return b.length},bind:function(a,b){this.changeHandler=c(a,this.change),this.addHandler=c(a,this.add),this.removeHandler=c(a,this.remove),b.on("change",this.changeHandler),b.on("add",this.addHandler),b.on("remove",this.removeHandler)},unbind:function(a,b){b.off("change",this.changeHandler),b.off("add",this.addHandler),b.off("remove",this.removeHandler),this.changeHandler=void 0,this.addHandler=void 0,this.removeHandler=void 0}}}},{}],111:[function(a,b){var c=function(a,b){return function(c,d,e,f,g){b(a,this,c,d,e,f,g)}};b.exports={controller:{create:function(a,b,c){if(!b)return void console.warn("Unable to load Elsa module: "+b);var d=Object.create(b,{el:{configurable:!0,writable:!1,value:a},data:{configurable:!0,writable:!0,value:c.data}});if("function"!=typeof d.create)throw new Error("Elsa controls must have a create method defined.");return d.create(),d},destroy:function(a,b){"function"==typeof b.destroy&&b.destroy()}},collection:{change:function(a,b,c,d){a.publish("change",d,c)},add:function(a,b,c,d){a.publish("add",d,c)},remove:function(a,b,c){a.publish("remove",void 0,c)},get:function(a,b,c){return b[c]},indexOf:function(a,b,c){return b.indexOf(c)},length:function(a,b){return b.length},bind:function(a,b){"function"==typeof b.publish&&(this.changeHandler=c(a,this.change),this.addHandler=c(a,this.add),this.removeHandler=c(a,this.remove),b.subscribe("change",this.changeHandler),b.subscribe("add",this.addHandler),b.subscribe("remove",this.removeHandler))},unbind:function(a,b){this.changeHandler&&(b.unsubscribe("change",this.changeHandler),b.unsubscribe("add",this.addHandler),b.unsubscribe("remove",this.removeHandler),this.changeHandler=void 0,this.addHandler=void 0,this.removeHandler=void 0)}}}},{}],112:[function(a,b){var c=!1,d=function(a){var b=a.cleanData;a.cleanData=function(a){return window.elsa.destroy(a),b(a)}};b.exports={controller:{create:function(a,e){c||d(b.exports.$||$);var f=$(a);if(e(f),"function"!=typeof e)throw new Error("jQuery controllers need to be a function.");return f},destroy:function(a,b){b.remove()}}}},{}],113:[function(a,b){var c=a("../core/compiler.js");b.exports={"public":{content:{get:function(){return this.content||(this.content=this.contentSelector?this["public"].querySelector(this.contentSelector):this["public"]),this.content},set:function(a){if(!this.content&&(this.content=this.contentSelector?this["public"].querySelector(this.contentSelector):this["public"],!this.content))throw Error("No content defined for "+Object.getPrototypeOf(this["public"]).constructor.name+": "+this["public"].routename+". Did you forget to use <el-page-content></el-page-content?");a?c.replaceDocumentFragment(this.content,a,this["public"]):c.destroyDocumentFragment(this.content)}}},init:function(){},destroy:function(){this.content=void 0}}},{"../core/compiler.js":65}],114:[function(a,b){b.exports={log:console.warn};var c="color:red; line-hight: 16px; font-weight: 600",d="color:black; line-height: 16px";if(console.groupCollapsed){var e=/^[ ]*at ([^ ]*)\b.* \(([^)]*)\)$/,f=/^[ ]*at ([^ ]+)\b.* \(eval at ([^ ]+) \(([^)]+)\), (.+)\)$/;b.exports.log=function(a){var b=a.name||a.constructor.name;void 0!==a.code&&(b+="("+a.code+")"),b+=": "+a.message,console.groupCollapsed("%cx%c"+b,"border-radius: 9px; background-color: rgba(255,0,0,0.8); color: white; padding: 0px 3px 1px 3px;font-size: 8.5px; margin-right: 8px;","color: red; font-weight: normal !important; line-height: 18px");var g=[],h=[];a.stack.split("\n").slice(1).forEach(function(a){var b=e.exec(a);b?(g.push(c),g.push(d),h.push("%c"+b[1]+"%c    "+new Array(Math.max(32-b[1].length,1)).join(" ")+b[2])):(b=f.exec(a))?(g.push(c),g.push(d),h.push("%c"+b[2]+"%c    "+new Array(Math.max(32-b[2].length,1)).join(" ")+b[4]),g.push(c),g.push(d),h.push("%c"+b[1]+"%c    "+new Array(Math.max(32-b[1].length,1)).join(" ")+b[3])):h.push(a)}),g.unshift(h.join("\n")+"%c"),g.push("padding-right: 100%;"),console.log.apply(console,g),console.groupEnd()}}},{}],115:[function(a,b){var c=(a("ecma5-extend"),function(a,b){return function(c){c=c||{cancelable:!1,bubbles:!1};for(var d in b)c[d]=b[d];var e=new CustomEvent(a,c);for(var f in c)e[f]=c[f];return e}});b.exports={createEventType:c,trigger:c("trigger",{cancelable:!0,bubbles:!0})}},{"ecma5-extend":1}],116:[function(a,b){var c={ANY:"any",TOUCH:"touch",MOUSE:"mouse"},d=2e3,e=b.exports=function f(){return this===f?new f:(this.interactionMode=c.ANY,void(this.reset=this.reset.bind(this)))};e.create=e,e.prototype={isValid:function(a){var b=0===a.type.indexOf("touch")?c.TOUCH:c.MOUSE;return this.interactionMode===b||this.interactionMode===c.ANY?(this.enter(b),!0):!1},enter:function(a){clearTimeout(this.interactionModeResetId),this.interactionMode=a,this.interactionModeResetId=setTimeout(this.reset,d)},reset:function(){this.interactionMode=c.ANY},destroy:function(){clearTimeout(this.interactionModeResetId)}}},{}],117:[function(a,b){var c=(a("./interactionMode.js"),function(a,b,c,d){return a>=c.left-d&&a<=c.right+d&&b>=c.top-d&&b<=c.bottom+d}),d=b.exports=function f(a,b,c,d){return this===f?new f(a,b,c,d):("function"==typeof a&&(c=b,b=a,a=void 0),"function"==typeof b&&(d=c,c=b,b=void 0),this.onTouchStart=this.onTouchStart.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseLeave=this.onMouseLeave.bind(this),this.callbacks={overlay:c,passthrough:d},a&&this.enableOverlayTouch(a,b),this)},e=function(a,b,d){var e=!0;return e=0===b.type.indexOf("mouse")?d.contains(b.target)===d.contains(a.target):c(b.changedTouches[0].clientX,b.changedTouches[0].clientY,d.getBoundingClientRect(),0)===c(a.touches[0].clientX,a.touches[0].clientY,d.getBoundingClientRect(),0)};d.create=d,d.prototype={hitAreaPadding:10,enableOverlayTouch:function(a,b){return b&&(this.passthrough=b),this.overlayElement=a,this.overlayElement.addEventListener("touchstart",this.onTouchStart,!0),this.overlayElement.addEventListener("mousedown",this.onTouchStart,!0),this},disableOverlayTouch:function(){return this.overlayElement&&(document.body.removeEventListener("touchmove",this.onTouchMove,!0),document.body.removeEventListener("touchend",this.onTouchEnd,!0),document.body.removeEventListener("touchcancel",this.onTouchEnd,!0),document.body.removeEventListener("mousemove",this.onTouchMove,!0),document.body.removeEventListener("mouseup",this.onTouchEnd,!0),document.body.removeEventListener("mouseleave",this.onMouseLeave,!0),this.overlayElement.removeEventListener("touchstart",this.onTouchStart,!0),this.overlayElement.removeEventListener("mousedown",this.onTouchStart,!0),this.overlayElement=void 0),this.state="idle",this},onTouchStart:function(a){var b=this.passthrough.contains(a.target);this.stateChange(b?"pass":"down",a)},onTouchMove:function(a){a.stopPropagation(),a.preventDefault()},onTouchEnd:function(a){return a.cancelable&&a.preventDefault(),this.stateChange("up",a),!0},onMouseLeave:function(a){a.target===this.overlayElement&&this.onTouchEnd(a)},"idle-exit":function(a){document.body.addEventListener("touchend",this.onTouchEnd,!0),document.body.addEventListener("touchcancel",this.onTouchEnd,!0),document.body.addEventListener("mouseup",this.onTouchEnd,!0),document.body.addEventListener("mouseleave",this.onMouseLeave,!0),this.startEvent=a},"idle-enter":function(){document.body.removeEventListener("touchend",this.onTouchEnd,!0),document.body.removeEventListener("touchcancel",this.onTouchEnd,!0),document.body.removeEventListener("mouseup",this.onTouchEnd,!0),document.body.removeEventListener("mouseleave",this.onMouseLeave,!0),this.startEvent=void 0},"track-enter":function(a){a.stopPropagation(),a.preventDefault(),document.body.addEventListener("touchmove",this.onTouchMove,!0),document.body.addEventListener("mousemove",this.onTouchMove,!0)},"track-exit":function(a){var b=e(this.startEvent,a,this.passthrough);a.stopPropagation(),b&&this.callbacks.overlay&&this.callbacks.overlay(a,this.overlayElement),document.body.removeEventListener("touchmove",this.onTouchMove,!0),document.body.removeEventListener("mousemove",this.onTouchMove,!0)},"passthrough-enter":function(a){this.passthroughTargetBounds=a.target.getBoundingClientRect()},"passthrough-exit":function(a){var b=this.startEvent,d=e(b,a,this.passthrough);if(d){var f=a.clientX||a.changedTouches[0].clientX,g=a.clientY||a.changedTouches[0].clientY;if(c(f,g,this.passthroughTargetBounds,this.hitAreaPadding))if(this.callbacks.passthrough)a.originalTarget=b.target,a.originalTouch=b,this.callbacks.passthrough(a,this.overlayElement);else if(-1===a.type.indexOf("mouse")){var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,document.defaultView,a.detail,f,g,f,g,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,null),h.forwardedTouchEvent=!0,a.target.dispatchEvent(h)}}this.passthroughTargetBounds=void 0},state:"idle",stateChange:function(a,b,c,d){var e={idle:{down:"track",pass:"passthrough"},track:{up:"idle"},passthrough:{up:"idle"}},f=e[this.state],g=f&&f[a];if(g){var h=this.state;this.state=g;var i=this[h+"-exit"];"function"==typeof i&&i.call(this,b,c,d);var j=this[g+"-enter"];return"function"==typeof j&&j.call(this,b,c,d),this.state}},destroy:function(){this.disableOverlayTouch(),this.startEvent=void 0,this.passthroughTargetBounds=void 0,this.callbacks=void 0}}},{"./interactionMode.js":116}],118:[function(a,b){var c=function(a){return a.clientX||(a.touches&&a.touches.length?a.touches[0].clientX:0)},d=function(a){return a.clientY||(a.touches&&a.touches.length?a.touches[0].clientY:0)},e=function(a){return a.deltaX},f=function(a){return a.deltaY},g={width:"clientWidth",height:"clientHeight"};b.exports={applyAttributes:function(a,b){if(b)for(var c=0;c<b.length;c++){var d=b[c].split(":"),e="data-"+d[0],f=d.length>1?d[1]:d[0];a[f]=a.getAttribute(f)||a.getAttribute(e)}},getInteractionPositionMethod:function(a){return"x"===a?c:d},getEventDelta:function(a){return"x"===a?e:f},getElementSize:function(a,b){if(a.cachedSize&&a.cachedSizeDimension===b)return a.cachedSize;var c=a.style[b];return c=-1===c.indexOf("px")?null:parseInt(c),a.cachedSize=c||a[g[b]]||parseInt(window.getComputedStyle(a)[b]),a.cachedSizeDimension=b,a.cachedSize},slugify:function(a){return a.toString().toLocaleLowerCase().replace(/[\s.\-\/?&]+/g,"-").replace(/[\u2000-\u206F\u20A0-\u20CF\u2200-\u22FF\u2E00-\u2E7F]+/g,"").replace(/^-+/,"").replace(/-+$/,"")},getAttribute:function(a,b){return a.getAttribute(b)||a.getAttribute("data-"+b)},contains:function(a,b){for(var c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},capitaliseFirstLetter:function(a){return a.charAt(0).toUpperCase()+a.slice(1)}}},{}]},{},[77])(77)});